{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/gatsby-blog/","result":{"data":{"site":{"siteMetadata":{"title":"NoSleep Javascript Blog"}},"markdownRemark":{"id":"f1a35112-2683-5cdb-9d26-506ed7da6cad","excerpt":"Introduction In this post we are going to examine how we created this, the nosleepjavascript.com, blog\n(the one that you are currently reading) with Javascript…","html":"<h2 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>In this post we are going to examine how we created this, the <a href=\"https://nosleepjavascript.com\">nosleepjavascript.com</a>, blog\n(the one that you are currently reading) with Javascript and React, Gatsby as the core framework,\nGitHub Pages as a hosting solution and GitHub Actions to automatically deploy when pushing to a particular branch,\nwhich is a rudimentary CD or Continuous Delivery Solution.</p>\n<h2 id=\"prerequisites\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h2>\n<ul>\n<li><a href=\"https://nodejs.org/en/\">NodeJs</a> 12 (Erbium) or higher</li>\n<li>a text editor like <a href=\"https://www.vim.org/\">Vim</a> or an IDE like <a href=\"https://code.visualstudio.com/\">Visual Studio Code</a></li>\n</ul>\n<h2 id=\"bootstrapping-a-site-with-gatsby\"><a href=\"#bootstrapping-a-site-with-gatsby\" aria-label=\"bootstrapping a site with gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bootstrapping a site with Gatsby</h2>\n<h3 id=\"what-is-gatsby\"><a href=\"#what-is-gatsby\" aria-label=\"what is gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Gatsby?</h3>\n<p>According to their <a href=\"https://www.gatsbyjs.org/\">website</a>:</p>\n<blockquote>\n<p>Gatsby is a free and open source framework based on React that helps developers build blazing fast websites and apps</p>\n</blockquote>\n<p>We wanted to do a simple Tech Blog without any fancy stuff and Blogs naturally\nare pretty much static sites (i.e. they only need a backend that serves js, css, images and html static files),\nso we looked for a static site generator.</p>\n<p>I had good experiences with <a href=\"https://jekyllrb.com/\">Jekyll</a> in the past,\nso it was the first option we considered but we wanted to inspect the\necosystem and see whether there were some other options available.</p>\n<p>Enter Gatsby: we have been hearing very good things about Gatsby.js so\nwe wanted to explore it.</p>\n<p>I usually check a couple of important aspects of open source software before\neven beginning exploring it and Gatsby checked all the boxes:</p>\n<ul>\n<li>excellent documentation</li>\n<li>active community</li>\n<li>wide solutions to common problems (starters, plugins, posts, etc)</li>\n<li>it is a very active project</li>\n</ul>\n<p>We performed some initial spikes and compared the time it took\nto create a somewhat complete Blog with Gatsby and Jekyll and both\ntook us about the same time: 15 minutes.</p>\n<p>A <em>complete</em> Blog in this context included the following capabilities:</p>\n<ul>\n<li>write posts in markdown</li>\n<li>out of the box Google Analytics integration</li>\n<li>out of the box SEO good practices (metas, titles, etc)</li>\n</ul>\n<p>We finally settled in favor of Gatsby because</p>\n<ul>\n<li>it uses modern and familiar technology: Javascript, React, GraphQL, etc</li>\n<li>the plugin and theme API is much better than Jekyll’s</li>\n<li>it seemed very powerful and we wanted to explore more of it in the future</li>\n</ul>\n<h3 id=\"why-gatsby\"><a href=\"#why-gatsby\" aria-label=\"why gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Gatsby?</h3>\n<p>The things that we liked to most about Gatsby are</p>\n<ul>\n<li><strong>themes API</strong>: it is hierarchical and allows composition and easily switching in and out of different themes, contrary to Jekyll, that heavily couples the theme with the initial files skeleton and switching between themes is not at all trivial.</li>\n<li><strong>flexibility</strong>: one of things that amazed us and that we are currently exploring (you will probably hear more about this in future blog posts) is that Gatsby is not only for static websites, it is pretty flexible and you can even create full fledged apps with it (without runtime server side rendering and some other considerations).</li>\n<li><strong>development tools</strong>: the whole development workflow is very nicely polished and the GraphiQL explorer of the entire site’s data is a very nice quality of life improvement for developers.</li>\n</ul>\n<h2 id=\"install-gatsby\"><a href=\"#install-gatsby\" aria-label=\"install gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Gatsby</h2>\n<p>We used a Gatsby <em>starter</em> called <a href=\"https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/\">gatsby-starter-blog</a>\nbut you might be interested in other starters that are <a href=\"https://www.gatsbyjs.org/starters/?v=2\">provided by the community</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install Gatsby cli</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli\n\n<span class=\"token comment\"># Create a new gatsby site using the starter-blog starter</span>\ngatsby new my-blog https://github.com/gatsbyjs/gatsby-starter-blog</code></pre></div>\n<p>Check the output to see how to run the app but at this point you have a working blog.</p>\n<p>These are the most relevant files:</p>\n<ul>\n<li><code class=\"language-text\">gatsby-config.js</code> to edit data about your site such as author, description, titles, etc</li>\n<li><code class=\"language-text\">gatsby-config.js</code> to add your Google Analytics ID</li>\n<li><code class=\"language-text\">content/name-of-the-post/index.md</code> to see how to write posts in Markdown</li>\n<li>add <code class=\"language-text\">import &quot;prismjs/themes/prism-tomorrow.css&quot;</code> to <code class=\"language-text\">gatsby-browser.js</code> to enable <strong>syntax highlighting</strong> of code blocks. This starter uses <a href=\"https://prismjs.com/\">prism.js</a> but it does not add the css theme by default. Check prism.js documentation to see other themes available.</li>\n</ul>\n<p>And you are done! Told you! It is super fast and easy.</p>\n<p>Useful links</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/quick-start/\">https://www.gatsbyjs.org/docs/quick-start/</a></li>\n</ul>\n<h2 id=\"host-your-site-in-github-pages\"><a href=\"#host-your-site-in-github-pages\" aria-label=\"host your site in github pages permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Host your site in <a href=\"https://pages.github.com/\">GitHub Pages</a></h2>\n<p>GitHub pages is a static page hosting solution, if you are a software developer\nthis hosting solution is pretty near to our daily roaming places so that is why we chose it.</p>\n<p>There are tons of alternatives but if you already host your page’s code in GitHub\nthen this will be pretty easy to setup.</p>\n<p>Follow the instructions on <a href=\"https://pages.github.com/\">the website</a> to enable GitHub pages.</p>\n<p>These are the extra steps we took for this blog.</p>\n<h3 id=\"1-make-code-classlanguage-textdevelopcode-your-default-branch-only-for-project-site\"><a href=\"#1-make-code-classlanguage-textdevelopcode-your-default-branch-only-for-project-site\" aria-label=\"1 make code classlanguage textdevelopcode your default branch only for project site permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 make <code class=\"language-text\">develop</code> your default branch (only for <em>project site</em>)</h3>\n<p>Since this blog qualifies as a <em>project site</em> (per repo) instead of a <em>user or organization site</em>\nwe need to have the following repo branch configuration:</p>\n<ul>\n<li><code class=\"language-text\">develop</code>: where our Gatsby code lives</li>\n<li><code class=\"language-text\">master</code>: where our Gatsby-generated static files for our website are stored</li>\n</ul>\n<p>These generated static files will be the ones that GitHub pages will deploy and show.</p>\n<p>Keep in mind that you will be managing two code bases, one is your Gatsby site, the code that you will\nbe interacting with as a developer and then we have the generated static site code that will be the one\nthat we serve.\nThink of these two code bases as the source code and the compiled target code in traditional\ncompiled programming languages such as C/C++ or Rust.</p>\n<h3 id=\"2-adjust-the-code-classlanguage-textpackagejsoncode-deploy-script\"><a href=\"#2-adjust-the-code-classlanguage-textpackagejsoncode-deploy-script\" aria-label=\"2 adjust the code classlanguage textpackagejsoncode deploy script permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 Adjust the <code class=\"language-text\">package.json</code> deploy script</h3>\n<p>It should look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build --prefix-paths &amp;&amp; gh-pages -d public -b master\"</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">--prefix-paths</code> is only useful if you are going to use the default GitHub domain: <code class=\"language-text\">username.github.io/reponame</code>. Remove it if you are making your site accessible from some <code class=\"language-text\">domain.com</code></li>\n<li><code class=\"language-text\">gh-pages</code> is a helper node package that you need to install: <code class=\"language-text\">npm install --dev gh-pages</code></li>\n<li><code class=\"language-text\">-b master</code> specifies to <code class=\"language-text\">gh-pages</code> package that you want to deploy to the <code class=\"language-text\">master</code> branch</li>\n</ul>\n<h3 id=\"3-adjust-your-code-classlanguage-textpathprefixcode\"><a href=\"#3-adjust-your-code-classlanguage-textpathprefixcode\" aria-label=\"3 adjust your code classlanguage textpathprefixcode permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 Adjust your <code class=\"language-text\">pathPrefix</code></h3>\n<p>IMPORTANT! Only do this if you are using the default GitHub domain. If you are using a custom domain,\nlike <code class=\"language-text\">myblog.com</code> you should probably leave it unset, or if you want your blog to live in a custom path\nof your custom domain like <code class=\"language-text\">myblog.com/custompath</code> then adjust accordingly.</p>\n<p>Go to <code class=\"language-text\">gatsby-config.js</code> and set the top level property</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">pathPrefix<span class=\"token operator\">:</span> reponame<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"4-deploy\"><a href=\"#4-deploy\" aria-label=\"4 deploy permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4 deploy!</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># make sure you commit and push your changes to develop</span>\n<span class=\"token function\">git</span> commit <span class=\"token punctuation\">..</span>.\n<span class=\"token function\">git</span> push origin develop\n\n<span class=\"token comment\"># deploy!</span>\n<span class=\"token function\">npm</span> run deploy</code></pre></div>\n<p>Now if you go to <code class=\"language-text\">username.github.io/reponame</code> you should be able to navigate your site!</p>\n<p>Congratulations! Your site is live!</p>\n<h2 id=\"optional-buy-a-domain-and-use-it\"><a href=\"#optional-buy-a-domain-and-use-it\" aria-label=\"optional buy a domain and use it permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[optional] Buy a domain and use it</h2>\n<p>We used <code class=\"language-text\">GoDaddy</code> but we have no affiliations with them and there are plenty of\ndomain name providers. Choose the right one for you, buy your domain and then adjust DNS accordingly.</p>\n<h3 id=\"1-setup-your-dns\"><a href=\"#1-setup-your-dns\" aria-label=\"1 setup your dns permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 Setup your DNS</h3>\n<p>Most of the domain providers will let you set up the DNS records for your site. We are going to use\nthat to redirect to your GitHub page, set up the following records in your DNS managing tool.</p>\n<p>Read the official <a href=\"https://help.github.com/en/github/working-with-github-pages/about-custom-domains-and-github-pages\">instructions</a>.</p>\n<p>But here is the gist:</p>\n<ul>\n<li><strong>for apex domain</strong>: create an 4 <code class=\"language-text\">A</code> records, each with one of these IPs</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">185.199</span>.108.153\n<span class=\"token number\">185.199</span>.109.153\n<span class=\"token number\">185.199</span>.110.153\n<span class=\"token number\">185.199</span>.111.153</code></pre></div>\n<ul>\n<li><strong>for <code class=\"language-text\">www.</code></strong>: create a <code class=\"language-text\">CNAME</code> record with a key of <code class=\"language-text\">www</code> and a value of <code class=\"language-text\">username.github.io</code></li>\n</ul>\n<p>You may have both without a problem.</p>\n<h3 id=\"2-setup-you-cname-in-github\"><a href=\"#2-setup-you-cname-in-github\" aria-label=\"2 setup you cname in github permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 Setup you CNAME in GitHub</h3>\n<p>If you are using <code class=\"language-text\">npm run deploy</code> to deploy you app then go to your repo’s settings,\nscroll to the bottom and add the custom domain in the <strong>Custom Domain</strong> input.\nYou should add your naked or apex domain, without the <code class=\"language-text\">www</code>.</p>\n<p>If you are using GitHub actions (more on this later) then you need to add\nthis exact file to your source code in the <code class=\"language-text\">develop</code> branch,\nit should be named exactly <code class=\"language-text\">CNAME</code> and it should contain your domain as the only line of text.</p>\n<p>CNAME</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">myblog.com</code></pre></div>\n<p>Depending on your domain provider these changes in the DNS records might take\nfrom a couple of minutes to a couple of days (in our case it was pretty fast with GoDaddy).</p>\n<p>Checkout the <code class=\"language-text\">dig</code> linux/unix command to diagnose DNS updates (probably will do a blog post about this)</p>\n<h2 id=\"deploy-automatically-with-github-actions-cd\"><a href=\"#deploy-automatically-with-github-actions-cd\" aria-label=\"deploy automatically with github actions cd permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy automatically with GitHub Actions (CD)</h2>\n<p><a href=\"https://help.github.com/en/actions/automating-your-workflow-with-github-actions\">GitHub Actions</a> is an automation\nservice provided by GitHub with free tiers and quick access if you host your code in GitHub.\nYou may use other automation tools for this but the steps will definitely vary greatly.</p>\n<p>A bit of a glossary:</p>\n<ul>\n<li>actions: a list of steps to perform a reusable task, it accepts parameters (yes, the service is called “GitHub actions” and one of the unit of abstractions inside the service are also called “actions”).</li>\n<li>Workflow: an automation that will executed by GitHub when some event that you define happens (i.e. push to a branch). It will run a number of steps that might be actions or simple bash commands</li>\n</ul>\n<h3 id=\"1-create-a-workflow\"><a href=\"#1-create-a-workflow\" aria-label=\"1 create a workflow permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 Create a Workflow</h3>\n<p>Create the Workflow file in your <code class=\"language-text\">develop</code> branch at <code class=\"language-text\">.github/workflows/deploy.yml</code>\nYou can call it whatever you like as long as it is inside that directory.</p>\n<p>Add this to the file contents</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Gatsby Publish\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> develop\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> master</code></pre></div>\n<p>You may create this via the GitHub actions UI in your repo’s GitHub page.</p>\n<p>Notice we are using two actions, one is a standard action provided\nby GitHub to download the repo’s code in the\nautomation runner (think of it as a virtual machine) and\nthe other one <a href=\"https://github.com/enriikke/gatsby-gh-pages-action\"><code class=\"language-text\">gatsby-gh-pages</code></a> is a third party provided one.</p>\n<p>I inspected the code of the latter and it seemed OK but I always recommend checking third party\ncode before using it to avoid any potential security attacks.\nIn this case it is even more important because this action will have\naccess to an <code class=\"language-text\">ACCESS_TOKEN</code> that we will be creating in the next step\nand that gives the script access to push to your repo.</p>\n<p>TLDR: be careful to whom you give this sort of permissions to.</p>\n<p>Please note that if you are doing this step you must have added the CNAME file to your source\nas explained in the section above.</p>\n<h3 id=\"2-set-up-an-access-token\"><a href=\"#2-set-up-an-access-token\" aria-label=\"2 set up an access token permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 Set up an access token</h3>\n<p>You may have noticed this line in your Workflow:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is telling GitHub actions to read a variable called <code class=\"language-text\">ACCESS_TOKEN</code> from your repo’s secrets\nand pass it as a parameter named <code class=\"language-text\">access-token</code> to the <code class=\"language-text\">enriikke/gatsby-gh-pages-action@v2</code> action.</p>\n<p>This will give the action permissions to push to your master branch to deploy your code.</p>\n<p>Follow the following instructions to set up your token. Please note that the name\nis important so be sure to name it <code class=\"language-text\">ACCESS_TOKEN</code> or if you want a different\nname make sure you change the name you use in your Workflow. This is just a variable,\nso treat it like so.</p>\n<ul>\n<li><a href=\"https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line\">create a token</a></li>\n<li><a href=\"https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets#creating-encrypted-secrets\">use it in your Workflow</a></li>\n</ul>\n<h2 id=\"closing\"><a href=\"#closing\" aria-label=\"closing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Closing</h2>\n<p>At this point you will have a proper Gatsby blog deployed to the cloud.</p>\n<p>Lets put a list of things you probably want to take care before you really\nconsider this blog production-ready.</p>\n<ul>\n<li>setup google analytics id to analyse traffic</li>\n<li>setup HTTPS for free via settings in your GitHub repo</li>\n<li>register your site in <a href=\"https://stackoverflow.com/questions/49073043/get-github-pages-site-found-in-google-search-results\">google search console</a> to improve SEO</li>\n<li>add proper meta data to improve your SEO</li>\n<li>generate real content to improve SEO</li>\n<li>start writing posts!</li>\n</ul>","fields":{"slug":"/gatsby-blog/","readingTime":{"text":"10 min read"}},"frontmatter":{"title":"Create a blog with Gatsby.js","date":"December 23, 2019","description":"In this post we are going to cover the steps we took to create the nosleepjavascript.com blog in simple, easy, steps using the latest front end technologies: Gatsby.js (JAMstack), NodeJs, React, GraphQL, Javascript, GitHub Pages and GitHub Actions","tags":["gatsbyjs","javascript","react"],"seoFooter":null,"author":{"id":"franleplant","bio":"Tech Lead and Software developer with a degree in Engineering. Woodworker, all things Javascript, Rust and Software Architecture.","twitter":"franleplant","github":"https://github.com/franleplant","profilepicture":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACjUlEQVQ4y2P4jwr+/fsHJL9++dLT1RkbFZGWkrxy+fL379/BpZABAxr/79+/QPLyxYsWpiYqSkoaykou9naLFsz/jw2ga/7z5w+QbKitsVSVKorwWFafHuFgLCYscujgAbjRBGzesnHd9vasnwfm/D+1fH1bgaCgwKSJE+BG49QM8diL508nF8Yc6i1cVZ++tafETlf19GEibIZo/vLp/Zn5bfeWd77YNOX8guYj0+v+f/sIkcanGa5i68SqVeXxFxe2nJxVfW7LEpAwqrXYNUMUndm9dk9P/obOgukFYZeO7iFKM9DZf8GhcmDvriw/y3xvgy0tSetn9xw4fPT6tes/f/4kYDMwSJ88eRIREZ7oqDkhw7cxL8nTzc3dw9va2nbPnr3IwcaAFlTv3r3r6OgMj4i0srZ0d7KzMDU2s7T18w/MzMzOyMxdtnwlclJjQNYJJNva2wMCgyOjon39fH18/ULDwvMLivLyi2Jj41NSUpOSU65dvw63nAE5bew9cNDR1T0yJiYkNAQIAgID0zOycnLzw8IjIyIiMzOz4uISdu7cjaIZYu3nz58mtdaWpUYFBwd4eXkFBASGhYUBrQqPjPLy9k5ISEhLS4uKilm/fj0WzauWLT47p+760uakYA9zKytPT4/wcKDfo9zc3aNjolNT0zIyMkNDIzZs2IjQDKFu374NNHtBR8XVlT0N6WGW1jZBQUH+AQGWFibOjg5ABwNRUlJqSEjY9es3EJohaX3OnDlOri7BQItiYuPi4qNjgFRCdkrC6o789MTY0PDI8LBwX1//iooqeNAiNE+cNFFPT9fJ2dHZ1dXF1c3MzMTCwiIiNDgzJc7PP8DX19fb29vOzn7jxo3I8QwAkD8cNPji0p0AAAAASUVORK5CYII=","aspectRatio":1.1363636363636365,"src":"/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png","srcSet":"/static/3d0df698a9c84ca995878f7c2815d974/69585/franleplant-profile.png 200w,\n/static/3d0df698a9c84ca995878f7c2815d974/497c6/franleplant-profile.png 400w,\n/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png 620w","sizes":"(max-width: 620px) 100vw, 620px"}}}}}}},"pageContext":{"slug":"/gatsby-blog/","previous":null,"next":{"fields":{"slug":"/page-view-counter/"},"frontmatter":{"title":"Using Azure Functions to create a page view counter"}}}},"staticQueryHashes":["63159454"]}