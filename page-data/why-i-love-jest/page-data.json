{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/why-i-love-jest/","result":{"data":{"site":{"siteMetadata":{"title":"NoSleep Javascript Blog"}},"markdownRemark":{"id":"330a3d51-ad5e-5ee3-8e9c-fa088f448a6f","excerpt":"Why I love Jest and why should consider it for your next project. Jest is a full-blown, batteries included, ready to rock, testing framework that\nhas…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAeVfO1SSRP8A/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQACAxExIf/aAAgBAQABBQJuyA3SGHriv//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAwEBPwFwn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAARARAhMf/aAAgBAQAGPwLjNhUzZr//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhEDFB/9oACAEBAAE/IWZ7MCUpdqWOAFBHy1i2f//aAAwDAQACAAMAAAAQJw//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QHuP/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QVH//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/EABBdD2B7kIUXvciqripfDVRAHmgxMW5k//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jest\"\n        title=\"jest\"\n        src=\"/static/01d3ca0bdad871ffff120730c040bf17/1c72d/img.jpg\"\n        srcset=\"/static/01d3ca0bdad871ffff120730c040bf17/a80bd/img.jpg 148w,\n/static/01d3ca0bdad871ffff120730c040bf17/1c91a/img.jpg 295w,\n/static/01d3ca0bdad871ffff120730c040bf17/1c72d/img.jpg 590w,\n/static/01d3ca0bdad871ffff120730c040bf17/a8a14/img.jpg 885w,\n/static/01d3ca0bdad871ffff120730c040bf17/fbd2c/img.jpg 1180w,\n/static/01d3ca0bdad871ffff120730c040bf17/92903/img.jpg 3435w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<div style=\"text-align: center; margin-bottom: 40px;\">\n<span>Photo by <a href=\"https://unsplash.com/@fernanddecanne\">Fernand De Canne</a> on <a href=\"https://unsplash.com/s/photos/clown\">Unsplash</a></span>\n</div>\n<h2 id=\"why-i-love-jest-and-why-should-consider-it-for-your-next-project\"><a href=\"#why-i-love-jest-and-why-should-consider-it-for-your-next-project\" aria-label=\"why i love jest and why should consider it for your next project permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why I love Jest and why should consider it for your next project.</h2>\n<p>Jest is a full-blown, batteries included, ready to rock, testing framework that\nhas similarities with mocha and other testing frameworks but with a much\nmore integrated experience, making it very easy to have a production\nready unit test setup out of the box with very little effort.</p>\n<p>Let’s cover some of the things I love about Jest,\nif you are interested in my unit testing mindset and philosophy\nand an illustrative story check it at the <a href=\"#bonus-my-unit-test-mind-set\">end of this article</a>.</p>\n<h2 id=\"1-less-verbose-than-similar-frameworks\"><a href=\"#1-less-verbose-than-similar-frameworks\" aria-label=\"1 less verbose than similar frameworks permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Less verbose than similar frameworks</h2>\n<ul>\n<li>Simple tests can be terse</li>\n<li>Assertion library is always available</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my function\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>You can omit a top level describe when using the BDD interface</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should do something'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Tests should be expressive but abstract, the less code\nthe better, Jest helps with this.</p>\n<p>In a lot of cases, if you structure your code a certain way,\nusing one or two <code class=\"language-text\">test</code> per unit will be more than enough.</p>\n<h2 id=\"3-jest-replaces-sinon-for-the-most-part\"><a href=\"#3-jest-replaces-sinon-for-the-most-part\" aria-label=\"3 jest replaces sinon for the most part permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Jest replaces sinon for the most part</h2>\n<ul>\n<li>need to mock / spy / stub pieces of code? use the global <code class=\"language-text\">jest.fn()</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jest mocks\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> mockSpyStub <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">mockSpyStub</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jest is love\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockSpyStub<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jest is love\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Check the <a href=\"https://jestjs.io/docs/en/mock-functions\">docs</a></p>\n<h2 id=\"3-jest-comes-with-an-assertion-library\"><a href=\"#3-jest-comes-with-an-assertion-library\" aria-label=\"3 jest comes with an assertion library permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3: Jest comes with an assertion library</h2>\n<ul>\n<li>Comes already installed, integrated and globally available in all tests</li>\n<li>Covers a wide range of assertions / matchers.</li>\n<li>Good typescript support</li>\n<li>Perfect integration with Jest mocks / stubs / spys <code class=\"language-text\">jest.fn()</code>j</li>\n<li>Nice diff reporting tool</li>\n</ul>\n<p>Check all the <a href=\"https://jestjs.io/docs/en/expect\">included assertions here</a>.</p>\n<h2 id=\"4-jest-comes-with-code-coverage-integration\"><a href=\"#4-jest-comes-with-code-coverage-integration\" aria-label=\"4 jest comes with code coverage integration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Jest comes with code coverage integration</h2>\n<ul>\n<li>Uses <a href=\"https://istanbul.js.org/\">instanbul</a> under the hood</li>\n<li>Flip a simple switch to enable it with little extra config</li>\n<li>Good <a href=\"https://jestjs.io/docs/en/cli.html#--coverageboolean\">official documentation</a></li>\n<li>Ready to rock</li>\n</ul>\n<blockquote>\n<p><em>Note</em> Actually I just checked mocha’s official documentation and it\nredirects to Wallaby.js which is great but it is a paid tool, instead\nof linking to <code class=\"language-text\">nyc</code> (instanbul) and how to integrate with that.</p>\n</blockquote>\n<h2 id=\"5-jest-has-out-of-the-box-module-mocking\"><a href=\"#5-jest-has-out-of-the-box-module-mocking\" aria-label=\"5 jest has out of the box module mocking permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Jest has out of the box module mocking</h2>\n<p>Jest has an awesome module mocking story:</p>\n<ul>\n<li>Out of the box support with little config</li>\n<li>Works with CommonJS and native ES6 modules</li>\n<li>Works well with local modules and <code class=\"language-text\">node_modules</code></li>\n<li>Simple and terse interface</li>\n<li>Enables well known practices of unit testing and mocking thoroughly.</li>\n<li>Enables effective, efficient and terse unit tests of complex pieces of code.</li>\n</ul>\n<blockquote>\n<p>Little implementation detail: Jest achieves\nthis partially by running tests inside an isolated <a href=\"https://nodejs.org/api/vm.html\">Nodejs vm</a>\nwhich gives jest complete control of the test environment.</p>\n</blockquote>\n<p>Let’s cover some really useful patterns I have been using a lot lately:</p>\n<ul>\n<li>es6 modules: default export mock</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> myLib <span class=\"token keyword\">from</span> <span class=\"token string\">\"my-lib\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// now myLib is a mock</span>\njest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my-lib\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// configure a mock return value, you</span>\n<span class=\"token punctuation\">(</span>myLib <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"test value\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>es6 modules: member mock</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> member <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"my-lib\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// now myLib is a mock</span>\njest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my-lib\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// configure a mock return value, you</span>\n<span class=\"token punctuation\">(</span>member <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"test value\"</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>There are <a href=\"https://github.com/jhnns/rewire\">libs</a>\nout there that provide similar strategies but\nthey often fall short, or do not support ES6 modules,\nor are simply too complicated because they\ndo not have the level of control over how the code is being run\nlike Jest does.</p>\n<p>Check the official <a href=\"https://jestjs.io/docs/en/es6-class-mocks\">docs</a>.</p>\n<h2 id=\"6-jest-has-first-class-support-for-babel-and-typescript\"><a href=\"#6-jest-has-first-class-support-for-babel-and-typescript\" aria-label=\"6 jest has first class support for babel and typescript permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Jest has first class support for Babel and Typescript</h2>\n<p>Easy to integrate with <a href=\"https://www.typescriptlang.org/\">Typescript</a>\neither by using <a href=\"https://babeljs.io/\">Babel</a>\nor by using <a href=\"https://github.com/kulshekhar/ts-jest\">ts-jest</a>.</p>\n<p>If your codebase already uses typescript through Babel\nthen jest will automatically use that config and you won’t\nneed to do anything else.</p>\n<h2 id=\"7-jest-test-runner-interface-is-awesome\"><a href=\"#7-jest-test-runner-interface-is-awesome\" aria-label=\"7 jest test runner interface is awesome permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Jest test runner interface is awesome</h2>\n<p>Watch mode, interactive mode, filtering, Jest has you covered.</p>\n<p>Read more <a href=\"https://jestjs.io/docs/en/cli\">here</a>.</p>\n<p>This is a really nice trick I use a lot to focus\nonly on particular tests at a time: reg exp filtering</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># runs all the tests</span>\njest\n\n<span class=\"token comment\"># runs only the tests that fit this patterns</span>\njest pattern\njest myFunction\njest myFunc*</code></pre></div>\n<p>Something similar can be done in the interactive watch mode.</p>\n<h2 id=\"bonus-my-unit-test-mind-set\"><a href=\"#bonus-my-unit-test-mind-set\" aria-label=\"bonus my unit test mind set permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus: My unit test mind set</h2>\n<ul>\n<li>test in the most simple and minimalistic way</li>\n<li>do real unit tests, mocking everything else</li>\n<li>test only the high impact code</li>\n</ul>\n<p>In most of the cases I don’t see the value of being obsessed\nwith 100% coverage, because sometimes testing two\nerror handling lines inside a unhappy path branch might require\na whole lot of code.</p>\n<p>There are cases where a 100% coverage might be adequate\nor needed but in most high level business apps there’s really\nno need and the cost of keeping the coverage to 100% is really high.\nIn most cases I try to implement a Pareto approach, do the\nminimum thing with the highest impact which typically translates\ninto 80% code coverage and ignoring glue code files.</p>\n<p>Unit tests files is still code that you need to maintain so it should\nbe treated as close to regular code as possible and it should be as simple\nand as readable and maintainable as possible.</p>\n<h3 id=\"story-time-how-not-to-unit-test\"><a href=\"#story-time-how-not-to-unit-test\" aria-label=\"story time how not to unit test permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Story time: how not to unit test</h3>\n<p>Some random day I was cursing at my screen and my partner\nasked me why I was so mad and since she’s not a technical person\nI came up with this analogy on the fly to explain what was the problem\nand also how I would solve it.\nI believe this illustrates really well my unit test mindset:</p>\n<p>Let’s say we are building a wall lamp that would typically be used inside your house.\nThe guys who tested this lamp (unit testing) did the unthinkable: they\nbuild a testing house, with foundations, wall framing, ceiling, windows, doors, hardwood floors,\nwater pipes, heating system, insulation and a working power grid; they then proceeded\nto install the lamp that they were testing, and finally flipped the right wall switch to see if\nit worked.</p>\n<p>How I would have done it differently? I would just reveal the contacts and give them\npower by the simplest possible means (without risking my life), like for example:\nwiring them to a circuit with power!</p>\n<p>My partner hugged me and left feeling sorry for me.</p>\n<p>The point of this story is to emphasize that we need to have a clear\nmind set when unit testing our code, we need to ensure that we are testing an isolated unit,\nthat we are testing it in the simplest way that can provide the verifications we\nlook for, nothing more.</p>\n<p>Which brings up my coding mindset: <strong>clarity then simplicity then consistency</strong>\nwhich I will most likely be talking about in a follow up post.</p>\n<p>So remember: <strong>do not build a house around the lamp you want to test, simply connect it\nto a cable with power and be done with it.</strong></p>\n<h2 id=\"closing\"><a href=\"#closing\" aria-label=\"closing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Closing</h2>\n<p>As you can see, there’s a lot to love about Jest.</p>\n<p>Jest can be considered a composition of a bunch of libraries into a\nnice tight package that works out of the box:</p>\n<p><a href=\"https://mochajs.org/\">jest</a> =\n<a href=\"https://mochajs.org/\">mocha</a> +\n<a href=\"https://www.chaijs.com/\">chai</a> +\n<a href=\"https://github.com/power-assert-js/power-assert\">power-assert</a> +\n<a href=\"https://sinonjs.org/\">sinon</a> +\n<a href=\"https://github.com/jhnns/rewire\">rewire</a> +\n<a href=\"https://istanbul.js.org/\">instanbul</a> +\nmore</p>\n<p>I encourage you to consider it for your next project, it works well for\nNodejs and Browser projects, it works well with plain old Javascript or ES6+ or Typescript,\nand it has really nice integrations with <a href=\"https://reactjs.org/\">React.js</a>.</p>\n<p>Liked the content? Consider supporting us below.</p>\n<p>Want to know more? Consider joining our mailing list below.</p>","fields":{"slug":"/why-i-love-jest/","readingTime":{"text":"7 min read"}},"frontmatter":{"title":"Jest makes unit testing fun again","date":"November 04, 2020","description":"Why I love Jest and why you should consider it for your next project.","tags":["jest","typescript","javascript","unit testing","mock","Node.js","mocha","React.js","jsdom"],"seoFooter":null,"author":{"id":"franleplant","bio":"Tech Lead and Software developer with a degree in Engineering. Woodworker, all things Javascript, Rust and Software Architecture.","twitter":"franleplant","github":"https://github.com/franleplant","profilepicture":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACjUlEQVQ4y2P4jwr+/fsHJL9++dLT1RkbFZGWkrxy+fL379/BpZABAxr/79+/QPLyxYsWpiYqSkoaykou9naLFsz/jw2ga/7z5w+QbKitsVSVKorwWFafHuFgLCYscujgAbjRBGzesnHd9vasnwfm/D+1fH1bgaCgwKSJE+BG49QM8diL508nF8Yc6i1cVZ++tafETlf19GEibIZo/vLp/Zn5bfeWd77YNOX8guYj0+v+f/sIkcanGa5i68SqVeXxFxe2nJxVfW7LEpAwqrXYNUMUndm9dk9P/obOgukFYZeO7iFKM9DZf8GhcmDvriw/y3xvgy0tSetn9xw4fPT6tes/f/4kYDMwSJ88eRIREZ7oqDkhw7cxL8nTzc3dw9va2nbPnr3IwcaAFlTv3r3r6OgMj4i0srZ0d7KzMDU2s7T18w/MzMzOyMxdtnwlclJjQNYJJNva2wMCgyOjon39fH18/ULDwvMLivLyi2Jj41NSUpOSU65dvw63nAE5bew9cNDR1T0yJiYkNAQIAgID0zOycnLzw8IjIyIiMzOz4uISdu7cjaIZYu3nz58mtdaWpUYFBwd4eXkFBASGhYUBrQqPjPLy9k5ISEhLS4uKilm/fj0WzauWLT47p+760uakYA9zKytPT4/wcKDfo9zc3aNjolNT0zIyMkNDIzZs2IjQDKFu374NNHtBR8XVlT0N6WGW1jZBQUH+AQGWFibOjg5ABwNRUlJqSEjY9es3EJohaX3OnDlOri7BQItiYuPi4qNjgFRCdkrC6o789MTY0PDI8LBwX1//iooqeNAiNE+cNFFPT9fJ2dHZ1dXF1c3MzMTCwiIiNDgzJc7PP8DX19fb29vOzn7jxo3I8QwAkD8cNPji0p0AAAAASUVORK5CYII=","aspectRatio":1.1363636363636365,"src":"/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png","srcSet":"/static/3d0df698a9c84ca995878f7c2815d974/69585/franleplant-profile.png 200w,\n/static/3d0df698a9c84ca995878f7c2815d974/497c6/franleplant-profile.png 400w,\n/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png 620w","sizes":"(max-width: 620px) 100vw, 620px"}}}}}}},"pageContext":{"slug":"/why-i-love-jest/","previous":{"fields":{"slug":"/openid-oauth-authentication-for-nodejs/"},"frontmatter":{"title":"Authenticating your Node.js app with Google as an OpenId Connect Provider"}},"next":{"fields":{"slug":"/redux-data-fetching-antipattern/"},"frontmatter":{"title":"Stop using Redux for Data Fetching, use this instead"}}}},"staticQueryHashes":["63159454"]}