<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[NoSleep Javascript Blog]]></title><description><![CDATA[A blog by franleplant about Software development, education, human relationships and the machine.]]></description><link>https://nosleepjavascript.com</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 08 Jan 2021 21:53:40 GMT</lastBuildDate><item><title><![CDATA[Javascript is the best programming language in the world]]></title><description><![CDATA[Do you dislike this statement? I do too.
Read on. Isn’t it weird how a lot of developers maintain
these sort of inside jokes / memes of…]]></description><link>https://nosleepjavascript.com/javascript-is-best/</link><guid isPermaLink="false">https://nosleepjavascript.com/javascript-is-best/</guid><pubDate>Fri, 08 Jan 2021 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;Do you dislike this statement? I do too.
Read on.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Isn’t it weird how a lot of developers maintain
these sort of inside jokes / memes of hating
certain tools and techniques like
programming languages or frameworks?&lt;/p&gt;
&lt;p&gt;It is not the criticism that I find peculiar
but the emotional subjective response these folk
have toward inanimate things.
Let’s unpack this aspect of developer culture that we see everyday everywhere.&lt;/p&gt;
&lt;p&gt;I have heard stuff like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Java is a verbose trash.&lt;/li&gt;
&lt;li&gt;Static Typing is extra boilerplate with no benefits.&lt;/li&gt;
&lt;li&gt;Javascript is trash.&lt;/li&gt;
&lt;li&gt;Javascript is crazy (talking about the nasty coercion rules it has).&lt;/li&gt;
&lt;li&gt;Php is the worst language ever.&lt;/li&gt;
&lt;li&gt;Only &lt;em&gt;newbies&lt;/em&gt; use PHP.&lt;/li&gt;
&lt;li&gt;PHP is not a real programming language.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Real programmers&lt;/em&gt; use Java because it has static typing.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Real programmers&lt;/em&gt; use &lt;em&gt;X&lt;/em&gt; (programming language, technique, etc).&lt;/li&gt;
&lt;li&gt;Dynamic typing is for newbies.&lt;/li&gt;
&lt;li&gt;Haskell is only for academic purposes.&lt;/li&gt;
&lt;li&gt;Node.js doesn’t have &lt;em&gt;concurrency&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Node.js is slow because it doesn’t have threads.&lt;/li&gt;
&lt;li&gt;Javascript’s &lt;em&gt;event-loop&lt;/em&gt; is bad.&lt;/li&gt;
&lt;li&gt;I don’t need &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;Typescript&lt;/a&gt; (static typing) because I already have &lt;a href=&quot;https://eslint.org/&quot;&gt;eslint&lt;/a&gt; (static analysis).&lt;/li&gt;
&lt;li&gt;and so much more.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have heard these at work, at open source communities
and by speakers in conferences and although it is entirely
fine for people to resonate and feel more comfortable with
certain tools and techniques I believe that is better
to take a step back and try to think about these tools
more objectively, without so much emotion and with a cool head,
if we do that then we can understand the &lt;strong&gt;trade offs&lt;/strong&gt; each tool
has and &lt;strong&gt;why was it built like that&lt;/strong&gt; and, although we might never use
it, we will most likely understand why other people might,
when we might want to consider using it
and the reasoning behind the decisions
that lead to that result, which in programming are most
likely things we can extrapolate to other areas and
maintain a more rich and broad understanding of the vast programming landscape.&lt;/p&gt;
&lt;p&gt;So for example, the other day I saw this meme used for a quick laugh at mostly Javascript.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/65699931773d46d42e5c45c7c8a1b052/da104/meme.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 133.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQP/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAbUMxVgo5O9bocigq//EAB0QAAIBBAMAAAAAAAAAAAAAAAECEgADESEQEzL/2gAIAQEAAQUCeVZyqE4fRYCNrSM5k26s+OtaiBx//8QAFREBAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQMBAT8BIf/EABYRAAMAAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEV/8QAHBAAAgICAwAAAAAAAAAAAAAAEBEAARIxIWFx/9oACAEBAAY/Am46temsjyuhqaH/xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMUFxYf/aAAgBAQABPyFPb5BkwR246N18IzBobplADXJZVScshoEw85Y26wvUM7gAYn//2gAMAwEAAgADAAAAEGwhwP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAMXH/2gAIAQMBAT8QCdgjdv/EABgRAQEBAQEAAAAAAAAAAAAAAAEAIREx/9oACAECAQE/EF2WSdjy/8QAHhABAQACAgIDAAAAAAAAAAAAAREAITFBUWFxgaH/2gAIAQEAAT8QQlDwKvxiYhbEnW7mvbjPwymUplFG6m8S+AtVfZ395QNvhxOsVJbQLhEEoUyDq0mHsBTeTnr1gTDuWhpmnOQQA8Bn/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;meme about dynamically vs statically typing&quot;
        title=&quot;meme about dynamically vs statically typing&quot;
        src=&quot;/static/65699931773d46d42e5c45c7c8a1b052/1c72d/meme.jpg&quot;
        srcset=&quot;/static/65699931773d46d42e5c45c7c8a1b052/a80bd/meme.jpg 148w,
/static/65699931773d46d42e5c45c7c8a1b052/1c91a/meme.jpg 295w,
/static/65699931773d46d42e5c45c7c8a1b052/1c72d/meme.jpg 590w,
/static/65699931773d46d42e5c45c7c8a1b052/da104/meme.jpg 809w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;And while I always enjoy a quick laugh, sometimes
these type of “jokes” hide a skew, subjective and
over simplified way of looking at things.&lt;/p&gt;
&lt;p&gt;Does &lt;a href=&quot;https://android.jlelse.eu/magic-lies-here-statically-typed-vs-dynamically-typed-languages-d151c7f95e2b&quot;&gt;dynamic typing&lt;/a&gt; let you build programs (puzzles) &lt;strong&gt;faster&lt;/strong&gt; that don’t work or are &lt;strong&gt;incorrect&lt;/strong&gt;?
Does &lt;a href=&quot;https://android.jlelse.eu/magic-lies-here-statically-typed-vs-dynamically-typed-languages-d151c7f95e2b&quot;&gt;static typing&lt;/a&gt; let you build programs (puzzles) &lt;strong&gt;slower&lt;/strong&gt; that do work and are &lt;strong&gt;correctly&lt;/strong&gt;?
Are Statically typed languages fundamentally better than Dynamically typed languages?&lt;/p&gt;
&lt;p&gt;Of course no!&lt;/p&gt;
&lt;p&gt;There is some nuance between the mechanisms by which different
programming languages allow developers to express logic and constraints,
and how and when they are verified and the errors are handled, one could
generalize Statically Typed languages as allowing more mechanisms to express
and verify constraints early on (mostly at build time) and
Dynamically Typed languages relying on later “out of band” constraint verifications
i.e. like doing more automated or manual testing and by doing that they allow
faster times to first run.&lt;/p&gt;
&lt;p&gt;But that is a wide spectrum with a lot of nuance, not all statically typed languages
are the same, some of them provide &lt;a href=&quot;https://android.jlelse.eu/magic-lies-here-statically-typed-vs-dynamically-typed-languages-d151c7f95e2b&quot;&gt;weaker&lt;/a&gt; type systems and good escape hatches,
and some of them provide &lt;a href=&quot;https://android.jlelse.eu/magic-lies-here-statically-typed-vs-dynamically-typed-languages-d151c7f95e2b&quot;&gt;strong&lt;/a&gt; type systems that at least in my experience tend
to take more time to “agree with the compiler”.&lt;/p&gt;
&lt;p&gt;After a lot of time spent in Dynamically Typed languages
such as Javascript and &lt;a href=&quot;https://www.python.org/&quot;&gt;Python&lt;/a&gt; now I really value
a good Statically typed language and most of the time
I do prefer them over untyped because of the capability
of Statically verifying correctness of my program at least partially,
because of the autocompletion among other things,
that is why now a days if I get to chose I only
write &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;Typescript&lt;/a&gt; and &lt;a href=&quot;https://www.python.org/dev/peps/pep-0484/&quot;&gt;typed Python&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Are Dynamically typed languages the worst of the two every time for every use case?&lt;/li&gt;
&lt;li&gt;Are Dynamically typed languages so sloppy that they let you build weird giraffes (not achieve the desired functionality)?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The answer is a definitive &lt;strong&gt;no&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are some cases where Dynamically Typed languages
let you express certain highly dynamic patterns
with much less boilerplate and more ease.
Highly polymorphic logic might be a good example of this,
it is much straight forward to do that in Dynamically Typed languages
with simple &lt;a href=&quot;https://en.wikipedia.org/wiki/Duck_typing&quot;&gt;duck typing&lt;/a&gt; that it is with Statically typed languages
by using &lt;a href=&quot;https://en.wikipedia.org/wiki/Generic_programming&quot;&gt;generics&lt;/a&gt;, &lt;a href=&quot;https://en.cppreference.com/w/cpp/language/templates&quot;&gt;templates&lt;/a&gt; or other mechanisms.&lt;/p&gt;
&lt;p&gt;This &lt;a href=&quot;https://instil.co/blog/static-vs-dynamic-types/#generic-programming-and-simpler-errors&quot;&gt;article&lt;/a&gt; has some good illustrations of this.&lt;/p&gt;
&lt;p&gt;There is a &lt;strong&gt;multi dimensional space&lt;/strong&gt;
that has axis such as &lt;strong&gt;development speed&lt;/strong&gt;, &lt;strong&gt;correctness verification&lt;/strong&gt;,
&lt;strong&gt;memory safety&lt;/strong&gt;, &lt;strong&gt;performance&lt;/strong&gt;, &lt;strong&gt;ergonomics&lt;/strong&gt;, etc that
Programming Languages need to navigate.&lt;/p&gt;
&lt;p&gt;In particular, programming languages will be better at some
of these dimensions and worse at others,
right now there isn’t a perfect language that maximises
all dimensions although there has been an explosion of programming
languages in the past 10 years with things such as
&lt;a href=&quot;https://golang.org/&quot;&gt;Go&lt;/a&gt;, &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt;, &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/csharp/&quot;&gt;C#&lt;/a&gt;, &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;Typescript&lt;/a&gt;,
among others that take a lot of the lessons of the past and
overall they achieve more than previous languages,
only because of the iterative effect of technology.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Rust maximises correctness, memory safety and performance,
but that makes it more difficult to understand for newcomers in general.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Take Rust for example, which I really like and that has taught me a lot,
it is a language that tries to &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;maximise correctness, memory safety and performance&lt;/a&gt;
and the Rust team understands perfectly that these
things hurt expressiveness and development speed and
although they actively try to improve the developer experience
they always maximise correctness, memory safety and performance first,
and never they hurt those core values because of developer experience,
and so Rust is widely known as a language
on the hard to learn side, verbose and that for certain highly
dynamic cases you will end up both struggling and resorting to a variety
of escape hatches.&lt;/p&gt;
&lt;p&gt;But in a lot of ways Rust is better than its peers (C / C++ mostly),
it has better memory safety, a much more expressive
Type system, it provides higher level abstractions
that compile down to very efficient code,
it does have a &lt;a href=&quot;https://doc.rust-lang.org/rust-by-example/mod.html&quot;&gt;modern module system&lt;/a&gt;
instead of the header file system that I do believe is outdated and verbose,
it replaces C/C++ build config files such as &lt;a href=&quot;https://github.com/torvalds/linux/blob/master/Makefile&quot;&gt;Makefiles&lt;/a&gt; (and others)
with a standard abstraction: &lt;a href=&quot;https://doc.rust-lang.org/cargo/&quot;&gt;cargo&lt;/a&gt;,
it provides a single standard mechanism for
library publishing, distribution and consumption: &lt;code class=&quot;language-text&quot;&gt;cargo&lt;/code&gt; and &lt;a href=&quot;https://crates.io/&quot;&gt;crates.io&lt;/a&gt;
instead of the multiple non standard ways C/C++ deal with these sort of things.&lt;/p&gt;
&lt;p&gt;But this is also not about bashing C/C++ which,
although they have drawbacks as every tool out there,
are super mature tools with mature ecosystems,
libraries, documentation, etc, that are hard to beat
in a lot of senses, in fact a lot of the major mission critical
software we use currently relies heavily on them like
&lt;a href=&quot;https://github.com/openssl/openssl&quot;&gt;openssl&lt;/a&gt;, &lt;a href=&quot;https://github.com/torvalds/linux&quot;&gt;Linux&lt;/a&gt; which is the base for &lt;a href=&quot;https://github.com/aosp-mirror/kernel_common&quot;&gt;android&lt;/a&gt;, to name a few.
C++ in particular has made a lot of strives towards
correctness, ergonomics and more and if you really need
the performance, C/C++ are conservative choices that will most likely work.&lt;/p&gt;
&lt;p&gt;And what about PHP? Have you seen it recently? It is far from
a perfect language and I personally do not resonate with it but
it has come a long way from its very humble and chaotic beginnings.
Recently it has added &lt;a href=&quot;https://wiki.php.net/rfc/return_types&quot;&gt;type hints&lt;/a&gt;, &lt;a href=&quot;https://softwareengineering.stackexchange.com/questions/306749/is-php7-a-static-or-dynamic-typed-language/306755&quot;&gt;partial static type checking&lt;/a&gt;,
it has added &lt;a href=&quot;https://www.php.net/manual/en/language.oop5.traits.php&quot;&gt;traits&lt;/a&gt;, has &lt;a href=&quot;https://www.zend.com/blog/php-7&quot;&gt;increased its performance&lt;/a&gt;,
and with modern frameworks such as &lt;a href=&quot;https://laravel.com/&quot;&gt;Laravel&lt;/a&gt; developers can actually write
very decent programs with it. And let’s not mention the amount of community
support, pervasive cheap hosting and more that it has.&lt;/p&gt;
&lt;h2 id=&quot;problem-space-framework&quot;&gt;&lt;a href=&quot;#problem-space-framework&quot; aria-label=&quot;problem space framework permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Problem space framework&lt;/h2&gt;
&lt;p&gt;Let me try to list some of the important aspects I consider when trying to evaluate
programming tools objectively. Again, you and your team will most likely
use your subjective biases to select them but I do believe it is nice to have at least
a semi structured, objective, way of evaluating tools like Programming languages&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ergonomics / dev speed / dev experience / expressiveness&lt;/li&gt;
&lt;li&gt;documentation / resources available / popularity&lt;/li&gt;
&lt;li&gt;maturity&lt;/li&gt;
&lt;li&gt;ecosystem / available libraries and their quality&lt;/li&gt;
&lt;li&gt;ecosystem / tooling such as IDEs&lt;/li&gt;
&lt;li&gt;is it actively maintained?&lt;/li&gt;
&lt;li&gt;how good is the community around it?&lt;/li&gt;
&lt;li&gt;long term status of the project&lt;/li&gt;
&lt;li&gt;performance&lt;/li&gt;
&lt;li&gt;type safety / correctness verification&lt;/li&gt;
&lt;li&gt;memory safety / memory management strategies (only for programming languages)&lt;/li&gt;
&lt;li&gt;fits my use case?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So for example, you might like Rust because of its
performance, memory safety and correctness but you want
to do &lt;a href=&quot;https://amzn.to/3onjpuR&quot;&gt;Machine Learning&lt;/a&gt; then you most likely
will need to use Python because of its &lt;a href=&quot;https://amzn.to/3onjpuR&quot;&gt;blooming ecosystem&lt;/a&gt;,
and although you can statically check modern Python you will
most likely work with untyped codebases or examples
and if you give it a chance you will end up understanding where it’s coming from.&lt;/p&gt;
&lt;p&gt;Another nice example is the infamous Javascript’s &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#event_loop&quot;&gt;event-loop&lt;/a&gt;.
I’ve heard so many people bashing it, complaining about
Js not having threads, complaining about this weird
thing that an event loop is, but with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function&quot;&gt;async / await&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise&quot;&gt;promises&lt;/a&gt;
you get a very ergonomic way of expressing &lt;a href=&quot;https://en.wikipedia.org/wiki/Concurrency_(computer_science)&quot;&gt;concurrent&lt;/a&gt; “tasks”
without resorting to manual thread managing which
is a well known &lt;a href=&quot;https://softwareengineering.stackexchange.com/questions/81003/how-to-explain-why-multi-threading-is-difficult&quot;&gt;hard&lt;/a&gt; &lt;a href=&quot;https://www.researchgate.net/publication/2956540_The_Problem_with_Threads&quot;&gt;thing&lt;/a&gt; to do 100% correct.
In fact there are user level implementations of
event loops in &lt;a href=&quot;https://www.systutorials.com/docs/linux/man/3-ev/&quot;&gt;C&lt;/a&gt; and &lt;a href=&quot;https://github.com/tokio-rs/tokio&quot;&gt;Rust&lt;/a&gt; (and probably
in a lot more places) where although these
languages support threads they recognise that for
certain applications having
an event loop is a pretty good way of managing concurrent tasks.
Another modern way of managing concurrent task is Go’s &lt;a href=&quot;https://tour.golang.org/concurrency/1&quot;&gt;goroutines&lt;/a&gt;,
that have a higher level api that hides the manual managing of threads.&lt;/p&gt;
&lt;h2 id=&quot;is-javascript-the-best-programming-language-in-the-world&quot;&gt;&lt;a href=&quot;#is-javascript-the-best-programming-language-in-the-world&quot; aria-label=&quot;is javascript the best programming language in the world permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Is Javascript the best programming language in the world?&lt;/h2&gt;
&lt;p&gt;I would say no, by a long shot, but does that mean
that it is 100% trash? Also no, by a long shot.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Javascript’s closures and functions
as a first class citizens make up
very expressive and powerful primitives to build complex abstractions&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For example, in my opinion, closures and functions as a first class
citizens make up very expressive and powerful primitives to build
complex abstractions on top of, in fact
these things are inherited from the &lt;a href=&quot;https://docs.racket-lang.org/reference/let.html&quot;&gt;lisp family&lt;/a&gt; and are well understood tools,
from the &lt;a href=&quot;https://amzn.to/38iYm6W&quot;&gt;blooming origins&lt;/a&gt; of Computer Science and programming languages.
We cannot also deny that, although
extremely chaotic, the NPM ecosystem is a boilerplate
of very good ideas that have shaped the way we develop
Javascript applications.&lt;/p&gt;
&lt;p&gt;Does Javascript has bad parts? Lots!
In fact there’s a now mostly outdated but very
&lt;a href=&quot;https://amzn.to/38lEMqF&quot;&gt;popular book&lt;/a&gt; about that.
But Javascript is starting to pick up the pace and
has made huge improvements in the past couple
of years with native module syntax which is very good
in my opinion (although native support is still far behind),
native class support that mostly works as you’d expect it,
user land hygienic macro system: &lt;a href=&quot;https://babeljs.io/&quot;&gt;babel&lt;/a&gt;,
blooming statically typed variants such as Typescript and Flow
and so much more make Javascript a very solid choice
for a lot of projects.&lt;/p&gt;
&lt;p&gt;Is it the best for all projects?
Most likely not, but understanding its trade off
will give you solid fundamentals to make up a better
educated choice of your tool.&lt;/p&gt;
&lt;h2 id=&quot;why-do-we-love-or-hate-inanimate-things&quot;&gt;&lt;a href=&quot;#why-do-we-love-or-hate-inanimate-things&quot; aria-label=&quot;why do we love or hate inanimate things permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why do we love or hate inanimate things?&lt;/h2&gt;
&lt;p&gt;I believe that in the bottom of this discussion lies
the emotions and feelings we get towards tools, it happens
in programming, it happens in woodworking, it happens generally
in arts and craftsmanship.&lt;/p&gt;
&lt;p&gt;I think that the toxic hate you sometimes see in programming boils down
to 1) we tend to fall in love with certain tools because of all the amazing
things we can accomplish with them and this love also generates hate
towards obvious competitors (i.e. Dynamically vs Statically typed languages);
and 2) because of the meme quality of these tropes we as a developers maintain over time;
these rules of thumb that lead as to say things such as
&lt;em&gt;“Statically typing is bad because Java is verbose, you better use Node.js”&lt;/em&gt;.
This is sometimes referred to as &lt;a href=&quot;https://en.wikipedia.org/wiki/Cargo_cult&quot;&gt;Cargo Cult&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So we build these sort of &lt;em&gt;prejudice&lt;/em&gt; and ill informed conceptions of tools
that we might only understand superficially instead of objectively and holistically,
and this is something that seems to be part of the human nature since we build
&lt;em&gt;prejudice&lt;/em&gt; for people, animals, tools, places, etc. Humans are emotional beings
and we require a conscious effort to avoid having raw emotional subjective responses
to everything around us, but that’s just the Engineer mind set that ends up being
more constructive and positive for our careers.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Programming is such a new and exciting but very complex discipline that the variety of solutions
for a given problem might be very large and it is important that we as developers develop (pun intended)
an objective way of understanding these solutions, their trade offs and how to chose
among them; and perhaps how to combine them and add up their strengths.
In end there will be always tools we enjoy using more than others
but that doesn’t necessarily mean that those tools are objectively
universally better and the others are trash, it just that we like them,
they resonate with our minds or perhaps we simply
got more experience with them.&lt;/p&gt;
&lt;p&gt;And perhaps some day we will find out the &lt;em&gt;perfect programming language&lt;/em&gt; but
we would still need to consider its ecosystem, support, community experience,
developers available and so many other things before adopting it to our projects.&lt;/p&gt;
&lt;p&gt;In the end, this post is just me giving a message of &lt;strong&gt;understanding,
empathy and compassion for our fellow developers&lt;/strong&gt;
that try to make a living in this very complex world of programming.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Like the content? Consider subscribing, buying me a coffee or even becoming a Patreon below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NoSleep Javascript 2020 in review and plans for 2021]]></title><description><![CDATA[TLDR 🎉 2020 was a great year, thank your sticking with me! On 2021 I want to cover even more topics in the blog: Rust and Wasm: love the…]]></description><link>https://nosleepjavascript.com/retrospective-2020/</link><guid isPermaLink="false">https://nosleepjavascript.com/retrospective-2020/</guid><pubDate>Sat, 02 Jan 2021 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;tldr&quot;&gt;&lt;a href=&quot;#tldr&quot; aria-label=&quot;tldr permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;🎉 2020 was a great year, thank your sticking with me!&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;On 2021 I want to cover even more topics in the blog:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt; and &lt;a href=&quot;https://webassembly.org/&quot;&gt;Wasm&lt;/a&gt;: love the language and the intersection with the Javascript ecosystem.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Machine_learning&quot;&gt;ML&lt;/a&gt;/&lt;a href=&quot;https://en.wikipedia.org/wiki/Artificial_intelligence&quot;&gt;AI&lt;/a&gt;: there is so much stuff to do and to learn in this area.&lt;/li&gt;
&lt;li&gt;Web Technologies: I want to keep covering the tools I use daily in production.&lt;/li&gt;
&lt;li&gt;Soft Skills and Mental Health for developers: let’s be healthy together.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Let me know what topics are you interested in by &lt;a href=&quot;https://forms.gle/8ikNVUFXEb2mT7bS7&quot;&gt;filling the survey&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;table-of-contents&quot;&gt;&lt;a href=&quot;#table-of-contents&quot; aria-label=&quot;table of contents permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table of Contents&lt;/h2&gt;
&lt;div class=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#tldr&quot;&gt;TLDR&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#a-look-back-at-2020&quot;&gt;A look back at 2020&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#a-look-forward-to-2021&quot;&gt;A look forward to 2021&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#rust&quot;&gt;Rust&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#web-assembly-and-rust&quot;&gt;Web Assembly and Rust&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#machine-learning-and-artificial-intelligence&quot;&gt;Machine Learning and Artificial Intelligence&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#soft-skills-and-mental-health-for-developers&quot;&gt;Soft skills and Mental health (for developers)&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#soft-skills&quot;&gt;Soft skills&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mental-health&quot;&gt;Mental health&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#javascript-and-web-technologies&quot;&gt;Javascript and web technologies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;Closing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;2020 was a &lt;em&gt;weird&lt;/em&gt; year to say the least. We were to stay in our houses
more than usual and that changed our lives.&lt;/p&gt;
&lt;p&gt;Besides the bug that most of you are already familiar with, 2020 was a special
year for me because 3 out of 4 members of my family moved abroad. This was
planned for 2020 but the stay-at-home situation delayed it and we had extra opportunities
to spend time together.
It is not the end of the world, we are going to see each other
and there a lot of way we are still connected but it is a massive change from having
a walking-distance between each other. They are happy and so there’s no point
in dwelling in much else, but it was definitively a big change.&lt;/p&gt;
&lt;p&gt;Besides this small glimpse into my personal life it was a real good year for
&lt;strong&gt;NoSleep Javascript&lt;/strong&gt;. The community around it increased substantially and people
have been real good to me, showing support and encouragement messages.
Considering this is a one-man operation it has had pretty good results.
I have also started to be more consistent with my writing
and I believe that I improved a lot in expressing my ideas in a clear and concise way although
I have a long way to go yet.
In fact this second year has ended with net positive income, nothing
life changing but it is still nice to see how this small operation
now is effectively having profits.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It has been a great journey so far and I hope you stay for the ride
with me. We have exiting plans for the future!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This post has two purposes:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A public statement of the plans for 2021.&lt;/li&gt;
&lt;li&gt;A personal commitment to do more and never falter.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This post might also interest you if you yourself are building an internet business
like this one.&lt;/p&gt;
&lt;h2 id=&quot;a-look-back-at-2020&quot;&gt;&lt;a href=&quot;#a-look-back-at-2020&quot; aria-label=&quot;a look back at 2020 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;A look back at 2020&lt;/h2&gt;
&lt;p&gt;The community has grown exponentially, we are still small but
at this pace we are going to become huge!.&lt;/p&gt;
&lt;p&gt;This is the list of the most successful posts this year:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://nosleepjavascript.com/docker-essentials-for-front-end-developers/&quot;&gt;Essential Docker for Javascript and Front End Developers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nosleepjavascript.com/react-performance/&quot;&gt;React is slow, what now?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nosleepjavascript.com/bitbucket-sucks/&quot;&gt;Bitbucket is developer hell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nosleepjavascript.com/programming-principles/&quot;&gt;Secrets of a Tech Lead: Programming Principles&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you haven’t checked them out be sure to do that, they have valuable content.&lt;/p&gt;
&lt;h2 id=&quot;a-look-forward-to-2021&quot;&gt;&lt;a href=&quot;#a-look-forward-to-2021&quot; aria-label=&quot;a look forward to 2021 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;A look forward to 2021&lt;/h2&gt;
&lt;p&gt;Although I work professionally as a &lt;strong&gt;Senior software developer&lt;/strong&gt;
specialised in the Javascript ecosystem &lt;em&gt;and&lt;/em&gt; as a &lt;strong&gt;Tech Lead&lt;/strong&gt;,
I’m always looking elsewhere, in fact, most of the bigger lessons
I have learnt and which you might find in my posts are from actually
looking outside the Javascript ecosystem and bringing back the
more general knowledge back and becoming an overall better developer.&lt;/p&gt;
&lt;p&gt;The plan is for next year to include some of those technologies
into the blog and hopefully we can &lt;strong&gt;extrapolate universal
programming truths&lt;/strong&gt; into our day to day work and whatever technology
we use in them.&lt;/p&gt;
&lt;p&gt;Let’s cover the topics I am planning on covering next year:&lt;/p&gt;
&lt;h2 id=&quot;rust&quot;&gt;&lt;a href=&quot;#rust&quot; aria-label=&quot;rust permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Rust&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;I want to talk more about &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt;, teaching Rust to front end developers, talking about
Wasm (Web Assembly) and simply writing more Rust just for fun.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I have been a long time fun of Rust and an early tinkerer of the language, even
before it reached v1 which was a very chaotic epoch.&lt;/p&gt;
&lt;p&gt;Since then Rust has consolidated as a real world programming language with revolutionary
guarantees in a niche that has been dominated for a long time
by arguably old and sometimes outdated languages: C and C++.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;WARNING!&lt;/strong&gt; I don’t have anything against C and C++, please don’t take it personally, there are a lot of things
those languages have brought to the table and they are super valuable and they will probably
be for a long long time, BUT, they have widely accepted flaws like exposing themselves easily
to memory attacks and being highly unsafe by default, and they also have some pretty old-fashioned
idioms such as header files instead of regular modules. The build system and package ecosystem
is far from ideal in my humble opinion, one can say a lot of bad stuff about &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;NPM&lt;/a&gt;
and &lt;a href=&quot;https://crates.io/&quot;&gt;crates.io&lt;/a&gt; but they
have provided a community standard to publish and share reusable packages across all environments, something
that up to this day is not trivial with C and C++. I know there are solutions, but none of them are standard like
NPM and crates.io are. Additionally, Rust’s build system: &lt;a href=&quot;https://doc.rust-lang.org/cargo/&quot;&gt;cargo&lt;/a&gt;,
is a standard tool that replaces all the configurations
you would otherwise need to, sometimes manually, dump into makefiles
and other configuration files of sort. Cargo is a modern solution
for this problem and makes the barrier of entry to Rust almost null in that respect.
Finally, Rust acknowledges
that in order to be productive programmers
need to high level constructs such as &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Option&lt;/code&gt;, mutability helpers, and so much more.&lt;/p&gt;
&lt;p&gt;Rust has a lot of virtues, briefly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it is a low level language with high level APIs.&lt;/li&gt;
&lt;li&gt;it does a lot of help you make programs that are &lt;em&gt;safe&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;the community is outstandingly good both with hard skills (technicals) and soft skills (management, communication, problem resolution).&lt;/li&gt;
&lt;li&gt;a holistic approach towards building a programming language: Rust understand that a programming language is so much more than the syntax and the compiler, it involves build systems, package repositories, installers, configuration management, good quality packages, etc.&lt;/li&gt;
&lt;li&gt;is statically typed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thanks to learning Rust early I have understood, probably the hard way, a lot about Statically Typed
languages, idioms, techniques, patterns, etc; which I extrapolated without much effort to Typescript
when I started using it professionally. Additionally I finally
understood the benefit of statically typed languages with Rust, the experience of getting
the compiler to help you find the problems with your program is a humbling and enlightening
that if you endure (sometimes it can be frustrating) it will teach you a lot.&lt;/p&gt;
&lt;p&gt;In fact, Rust is the reason I am all in on &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;Typescript&lt;/a&gt; and have been for the past couple of years even when
some of the Javascript community still has &lt;a href=&quot;https://www.java.com/en/&quot;&gt;Java&lt;/a&gt; PTSD
(and cargo cult to be honest) about what type systems look
and how they are used. To those still reluctant about Typescript I tell you:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There is &lt;em&gt;so&lt;/em&gt; much more to Statically Typed languages than what Java has to offer.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;IMPORTANT:&lt;/strong&gt; I do not hate Java, in fact I respect it a lot, I have felt foreign when looking at production grade
Java code, because of its natural verbosity and because of common idioms used but my experience might be biased, so I do
keep and open mind and I do acknowledge that Java in 2020 is a completely different beast than what Java was 2 or 3 years ago.&lt;/p&gt;
&lt;h3 id=&quot;web-assembly-and-rust&quot;&gt;&lt;a href=&quot;#web-assembly-and-rust&quot; aria-label=&quot;web assembly and rust permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Web Assembly and Rust&lt;/h3&gt;
&lt;p&gt;Rust has one of the best supports for Web Assembly and it has a whole team dedicated to it.
Wasm can have a massive impact in the Javascript ecosystem, just think of it, in both Node.js
and front end applications we are using Javascript to build compilers, macro systems, linkers (webpack),
linters and a lot of code that usually is built with Statically Typed Compiled languages and one of the
main reasons for that is performance. Javascript is really fast and has gotten really fast in the last few years
but still there are things that it will be naturally slower than Statically Typed Compiled and build-time optimized
languages such as Rust so it is natural to think about slowly migrating stuff like
&lt;a href=&quot;https://babeljs.io/&quot;&gt;Babel&lt;/a&gt;, Typescript,
&lt;a href=&quot;https://eslint.org/&quot;&gt;eslint&lt;/a&gt; and
&lt;a href=&quot;https://webpack.js.org/&quot;&gt;webpack&lt;/a&gt;
to Rust for example.&lt;/p&gt;
&lt;p&gt;Imagine reducing the times it takes to compile for your large scale production application when using webpack? Isn’t that
a big win?&lt;/p&gt;
&lt;p&gt;Well, in any case Rust has lot of tooling (although a little bit immature last time I checked) to seamlessly integrate
Wasm code into Node.js, webpack, and front end applications in general, so once this tooling is mature I expect
the integration to be quite easy and the only real barrier will be Rust it self. So we might as well be ahead of
the curve and start getting really good with Rust!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Rust has a great future ahead but learning it can be frustrating depending on your background,
and I would love to help the community with that learning path since I myself have already
been there and done that.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;machine-learning-and-artificial-intelligence&quot;&gt;&lt;a href=&quot;#machine-learning-and-artificial-intelligence&quot; aria-label=&quot;machine learning and artificial intelligence permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Machine Learning and Artificial Intelligence&lt;/h2&gt;
&lt;p&gt;ML and AI are becoming widely used techniques to solve a wide variety of problems,
an although right now we see them in a lot of big companies as part of their main products
I expect that while the technology advances we are going to see more and more day to day
applications in customer support bots or a smarter searches and with things we currently
don’t even imagine.&lt;/p&gt;
&lt;p&gt;I do expect ML/AI to have even more impact and be life-changing in the near future as technology
evolves and we learn more about what is possible with them.&lt;/p&gt;
&lt;p&gt;I have been reading two books this year and I am planning on finishing them and reading
more. A lot of the ML/AI ecosystem is based around &lt;a href=&quot;https://www.python.org/&quot;&gt;Python&lt;/a&gt;
and I really enjoy working with one of the most loved and used languages in the world,
so there’s a bonus point there too. These are the books I am currently going through:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://amzn.to/3lS4A1i&quot;&gt;Hands-On Machine Learning with Scikit-Learn, Keras, and TensorFlow: Concepts, Tools, and Techniques to Build Intelligent Systems&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://amzn.to/2K4nAMK&quot;&gt;Deep Learning with Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I would love to cover topics related to ML/AI in this blog and also to have an excuse
to learn more about them in the way.&lt;/p&gt;
&lt;h2 id=&quot;soft-skills-and-mental-health-for-developers&quot;&gt;&lt;a href=&quot;#soft-skills-and-mental-health-for-developers&quot; aria-label=&quot;soft skills and mental health for developers permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Soft skills and Mental health (for developers)&lt;/h2&gt;
&lt;p&gt;The idea of software developers being black boxed hermits that accept
coffee, pizza and requirements as inputs and they output working software
is an outdated one that I believe is detrimental to us developers.&lt;/p&gt;
&lt;p&gt;On 2021 I want to break the spell and talk about Soft Skills and Mental Health for developers.&lt;/p&gt;
&lt;h3 id=&quot;soft-skills&quot;&gt;&lt;a href=&quot;#soft-skills&quot; aria-label=&quot;soft skills permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Soft skills&lt;/h3&gt;
&lt;p&gt;Developers are far from hermits, although they do need to have a good chunk of their time
available for coding with deep concentration and focus they also need to communicate well
with others, not only other developers but superiors, underlings, people from other areas
such as HR, management, stakeholders, QA, graphics designers, etc.&lt;/p&gt;
&lt;p&gt;This type of communication
requires a lot of soft skills to be efficient, effective and productive, so we, as developers
need to be socially capable, we need to be able to express ideas concisely to non technical people,
we need to understand how technical decisions impact the business goals and vice versa, we need to
be emotionally intelligent to understand other people and their swinging moods, we need to be empathetical
to other’s emotions and stages in their lives.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Developers can no longer be awkward geeky people, we need to be regular people with technical skills,
we need to understand ourselves (see next section) and others, understand how social interactions flow
and we can navigate this complicated space. Nothing too fancy, it is just another problem space we need
to figure out which is something we do on a daily basis.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The main idea is to write about effective communication, &lt;a href=&quot;https://amzn.to/37OaEmm&quot;&gt;emotional intelligence&lt;/a&gt;,
empathy and any other soft skills
required for developers while understanding that there are different people with different backgrounds that have
different experiences being socially able in the workplace.&lt;/p&gt;
&lt;p&gt;I believe that in the end this will not only impact your work life but it will also impact your personal life like
it did to me.&lt;/p&gt;
&lt;h3 id=&quot;mental-health&quot;&gt;&lt;a href=&quot;#mental-health&quot; aria-label=&quot;mental health permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mental health&lt;/h3&gt;
&lt;p&gt;If &lt;em&gt;soft skills&lt;/em&gt; refer to &lt;strong&gt;how we handle ourselves with other people and their emotions&lt;/strong&gt;, Mental health
is all about &lt;strong&gt;us and how we handle ourselves with and within ourselves&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Developers sit down right in the junction of &lt;a href=&quot;https://en.wikipedia.org/wiki/Neurosis&quot;&gt;neurosis&lt;/a&gt;
(we are over thinkers),
&lt;a href=&quot;https://www.mayoclinic.org/diseases-conditions/anxiety/symptoms-causes/syc-20350961&quot;&gt;anxiety&lt;/a&gt;
(am I going to be able to pull this off?) and
stress (we need this work finished by tomorrow) and this situation is a severe attack
to our mental health. Anxiety is a pervasive sickness in the modern world but combined with stress and
the dangerous neurosis can mutate into much worse symptoms like panic attacks and
elevated anxiety periods.&lt;/p&gt;
&lt;p&gt;This is why before understanding other people
we need to understand ourselves and our emotions (&lt;a href=&quot;https://amzn.to/37OaEmm&quot;&gt;emotional intelligence&lt;/a&gt;),
we need to be &lt;strong&gt;observers&lt;/strong&gt; of our own mind and have the clarity to auto regulate our selves,
we need to be able to say &lt;em&gt;“that’s enough overthinking for today, tomorrow I will be able to solve it”&lt;/em&gt;
and sleep with a quiet mind.&lt;/p&gt;
&lt;p&gt;These things are not only problems of developers but I believe that since our primarily
task is to &lt;em&gt;think&lt;/em&gt; that we are particularly susceptible to these problems.&lt;/p&gt;
&lt;p&gt;Fortunately there are a lot of both old and new tools to deal with these situations
and the society as a whole is much more comprehensive and understanding and open
about them than it used to be.&lt;/p&gt;
&lt;p&gt;The core idea is to be able to help others with my own experiences with this subject,
with feeling sad, anxious, depressed, etc. and what tools I have used to deal with them,
and in the way acknowledging that you on the other side are not the only one with these problems.&lt;/p&gt;
&lt;p&gt;One particular subject I am super excited to talk
about is &lt;a href=&quot;https://en.wikipedia.org/wiki/Stoicism&quot;&gt;stoicism&lt;/a&gt;,
it is philosophy and has helped me a lot to cope with these
problems and I believe they can help other people too.&lt;/p&gt;
&lt;h2 id=&quot;javascript-and-web-technologies&quot;&gt;&lt;a href=&quot;#javascript-and-web-technologies&quot; aria-label=&quot;javascript and web technologies permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Javascript and web technologies&lt;/h2&gt;
&lt;p&gt;On 2020 I have cover a lot of topics related to Javascript and web technologies,
mainly because that’s what I do on a day to day basis and there are a lot of things
I need to fix and learn so there’s a constant flow of information I can share
in the blog that comes out from my experiences in production grade applications.
On 2021 I want to keep my commitment with web technologies and provide free useful
tools to the community.
I’m also planning on launching paid courses, mentorship and consultancy products
to expand the reaches of this humble enterprise.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;🎉 THANK YOU! 🎉&lt;/p&gt;
&lt;p&gt;Thank you so much for sticking with me and my project,
I couldn’t be more happier and excited for the future.&lt;/p&gt;
&lt;p&gt;Let me know in the reddit discussion what are you most excited about on 2021.&lt;/p&gt;
&lt;p&gt;Or even better, &lt;a href=&quot;https://forms.gle/8ikNVUFXEb2mT7bS7&quot;&gt;fill this survey&lt;/a&gt;
and let me know what are you interested in
for 2021.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Like the content? Consider subscribing, buying me a coffee or even becoming a Patreon below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Interview with React Query's creator: Tanner Linsley]]></title><description><![CDATA[Welcome to the interview with React-Query’s creator Tanner Linsley,
feel free to jump around the questions through the Table of Contents…]]></description><link>https://nosleepjavascript.com/interview-tanner-linsley/</link><guid isPermaLink="false">https://nosleepjavascript.com/interview-tanner-linsley/</guid><pubDate>Fri, 18 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Welcome to the interview with React-Query’s creator Tanner Linsley,
feel free to jump around the questions through the Table of Contents
below or grab a cup of coffee and read on.&lt;/p&gt;
&lt;h2 id=&quot;table-of-contents&quot;&gt;&lt;a href=&quot;#table-of-contents&quot; aria-label=&quot;table of contents permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table of Contents&lt;/h2&gt;
&lt;div class=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#for-those-who-might-not-know-you-tell-us-about-yourself&quot;&gt;For those who might not know you tell us about yourself&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#do-you-have-a-formal-education-in-computer-science-did-you-learn-about-algorithms-and-data-structures-how-important-for-developers-do-you-think-it-is-to-cover-the-basics-of-computer-science&quot;&gt;Do you have a formal education in computer science? Did you learn about algorithms and data structures? How important for developers do you think it is to cover the basics of computer science?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-did-you-come-up-with-the-idea-for-react-query&quot;&gt;How did you come up with the idea for react-query?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-tools-or-techniques-would-you-like-to-explore-next&quot;&gt;What tools or techniques would you like to explore next?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-do-you-think-about-react&quot;&gt;What do you think about React?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#who-influenced-the-most-your-way-of-programming-and-problem-solving-did-you-have-any-mentors-in-your-programming-career&quot;&gt;Who influenced the most your way of programming and problem solving? Did you have any mentors in your programming career?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-piece-of-code-has-influenced-the-most-&quot;&gt;What piece of code has influenced the most ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#i-have-covered-my-programming-principles-in-the-past-what-are-you-programming-principles&quot;&gt;I have covered my programming principles in the past, what are you programming principles?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#do-you-think-that-code-can-have-certain-art-like-traits&quot;&gt;Do you think that code can have certain art-like traits?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#do-you-find-any-parallels-between-programming-and-other-craft-like-activities-outside-software&quot;&gt;Do you find any parallels between programming and other craft-like activities outside software?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-does-your-day-look-like-how-is-your-life-work-balance&quot;&gt;How does your day look like? How is your life-work balance?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#i-saw-you-are-a-proud-member-of-the-church-of-jesus-christ-of-latter-day-saints-what-can-you-tell-us-about-that&quot;&gt;I saw you are a proud member of “The Church of Jesus Christ of Latter-day Saints”, what can you tell us about that?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-is-faith-to-you-what-does-being-religious-mean-to-you&quot;&gt;What is faith to you? What does being religious mean to you?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-do-your-religious-values-and-practices-change-the-way-you-code-do-open-source-and-build-software-in-general&quot;&gt;How do your religious values and practices change the way you code, do open source and build software in general?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-do-you-handle-your-mental-health-how-do-you-handle-anxiety-overthinking-dreaming-about-code&quot;&gt;How do you handle your mental health? How do you handle anxiety, overthinking, dreaming about code?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#do-you-exercise&quot;&gt;Do you exercise?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-are-the-most-important-soft-skills-developers-should-have-ie-good-oral--written-communication-emotional-intelligence-such-as-empathy-team-working-mentoring-learning-teaching-upwards-high-level-communication-handling-anxiety-meditation-etc&quot;&gt;What are the most important soft skills developers should have? (i.e. good oral / written communication, emotional intelligence such as empathy, team working, mentoring, learning, teaching, upwards high level communication, handling anxiety, meditation, etc)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-is-like-to-be-a-parent-how-does-that-affect-your-programming&quot;&gt;What is like to be a parent? How does that affect your programming?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-do-you-feel-about-the-massive-impact-your-libraries-have-in-so-many-companies-that-use-them&quot;&gt;How do you feel about the massive impact your libraries have in so many companies that use them?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-do-you-like-about-the-open-source-community-how-do-you-handle-toxic-members-in-our-community&quot;&gt;What do you like about the open source community? How do you handle toxic members in our community?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-do-you-balance-unpaid-work-and-paid-work&quot;&gt;How do you balance unpaid work and paid work?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#free-space-for-tanner-what-would-you-like-to-say&quot;&gt;Free space for Tanner, what would you like to say?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;Closing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;A while back ago I was seeking for something to solve
data fetching pains that me and my team were facing
while building and maintaining about a million lines
of mostly React code.&lt;/p&gt;
&lt;p&gt;The way we were managing data fetching was (and partially still is)
by using Redux and manually writing actions, reducers,
selectors, normalization, bookkeeping such as loading and error states
and when/how to trigger those requests, which up to this day is pretty
common way of doing data fetching with React.&lt;/p&gt;
&lt;p&gt;The verbosity and lack of guarantees and abstractions
made the process painful, developers dreaded fetching
new data and the PR reviews dragged because everybody
has their own opinion of what an action and a reducer
should look like in theory.&lt;/p&gt;
&lt;p&gt;We tried some other &lt;a href=&quot;https://github.com/amplitude/redux-query&quot;&gt;Redux&lt;/a&gt;
based solutions without
much success because the fundamental problem is that
Redux was not built to do data fetching, you can of
course use it successfully but you there’s a lot of unfolded
complexity you need to manage mostly manually.
Granted, with &lt;a href=&quot;https://redux-toolkit.js.org/&quot;&gt;Redux-Toolkit&lt;/a&gt;
and &lt;a href=&quot;https://reactjs.org/docs/hooks-intro.html&quot;&gt;React hooks&lt;/a&gt;
things look better but many of
the mentioned problems still stand.&lt;/p&gt;
&lt;p&gt;I have explored this in more details in a previous post:
&lt;a href=&quot;https://nosleepjavascript.com/redux-data-fetching-antipattern&quot;&gt;Stop using Redux for Data Fetching, use this instead&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Since I didn’t find any existing solutions,
I started designing my own and these were
some of the core characteristics it had:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No concept of the Redux state, actions and reducers, it is just a glorified smart structured Cache&lt;/li&gt;
&lt;li&gt;Data is stored by a user defined cache key&lt;/li&gt;
&lt;li&gt;Users can mutate the cache when performing HTTP mutations (i.e. PUT)&lt;/li&gt;
&lt;li&gt;No duplicated HTTP calls: components should be able to define their data dependencies and the abstraction should take care of de-duping them.&lt;/li&gt;
&lt;li&gt;Fetching new data should require minimal boilerplate&lt;/li&gt;
&lt;li&gt;Automatic bookkeeping: loading, errors, freshness of the data should all be handled automatically&lt;/li&gt;
&lt;li&gt;The interface should be similar to &lt;a href=&quot;https://www.apollographql.com/docs/react/&quot;&gt;Apollo Client&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And what I have designed and was about to start coding
ended up already existing and being Tanner’s
&lt;a href=&quot;https://react-query.tanstack.com/&quot;&gt;react-query&lt;/a&gt;,
a smart, small, simple, battle tested, typescript based (currently)
library of my dreams that was far beyond my original
design and far beyond what I’ve probably could have made by myself.&lt;/p&gt;
&lt;p&gt;And that’s how I feel connected to Tanner,
I like the way he writes code and I share
a lot of the same values,
I like how he approaches open source and
how he always appears as a positive proactive
individual which is super fun to work with.&lt;/p&gt;
&lt;p&gt;And here I bring you the interview with
&lt;a href=&quot;https://github.com/tannerlinsley&quot;&gt;Tanner Linsley&lt;/a&gt;,
&lt;em&gt;react-query&lt;/em&gt; creator, open source maintainer,
dad, family man, religious man and so much more,
let’s get to know him:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://avatars1.githubusercontent.com/u/5580297?s=500&quot; alt=&quot;Tanner Linsley&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;for-those-who-might-not-know-you-tell-us-about-yourself&quot;&gt;&lt;a href=&quot;#for-those-who-might-not-know-you-tell-us-about-yourself&quot; aria-label=&quot;for those who might not know you tell us about yourself permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;For those who might not know you tell us about yourself&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;How long have you been programming?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;12 years&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Where are you from?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Utah&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What languages and tools have you been working with?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;JS, React, HTML, CSS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How did you learn to program?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I learned all on my own. Trial and error and lots of Google searches.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Did you get a technical degree?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I partially completed degrees in Audio Engineering
and Web Design / Development from UVU in Utah,
but did not complete them before entering the workforce.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What companies have you worked on?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I am one of three co-founders at &lt;a href=&quot;https://nozzle.io/&quot;&gt;Nozzle.io&lt;/a&gt;,
which I have worked on for the last 7 years&lt;/p&gt;
&lt;h3 id=&quot;do-you-have-a-formal-education-in-computer-science-did-you-learn-about-algorithms-and-data-structures-how-important-for-developers-do-you-think-it-is-to-cover-the-basics-of-computer-science&quot;&gt;&lt;a href=&quot;#do-you-have-a-formal-education-in-computer-science-did-you-learn-about-algorithms-and-data-structures-how-important-for-developers-do-you-think-it-is-to-cover-the-basics-of-computer-science&quot; aria-label=&quot;do you have a formal education in computer science did you learn about algorithms and data structures how important for developers do you think it is to cover the basics of computer science permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Do you have a formal education in computer science? Did you learn about algorithms and data structures? How important for developers do you think it is to cover the basics of computer science?&lt;/h3&gt;
&lt;p&gt;I do not, but I have invested the necessary
amount of effort over the years to understand
these very important concepts as I go.
I think what’s important is simply learning what
is necessary in the moment to accomplish the
task you have been given.
If that includes learning about several &lt;strong&gt;algorithms
and data structures&lt;/strong&gt;, then great!
If that only means learning about one of them,
then that’s also fine. Just keep moving forward.&lt;/p&gt;
&lt;h3 id=&quot;how-did-you-come-up-with-the-idea-for-react-query&quot;&gt;&lt;a href=&quot;#how-did-you-come-up-with-the-idea-for-react-query&quot; aria-label=&quot;how did you come up with the idea for react query permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How did you come up with the idea for react-query?&lt;/h3&gt;
&lt;p&gt;The pains that inspired &lt;a href=&quot;https://react-query.tanstack.com/&quot;&gt;React Query&lt;/a&gt;
were years in the making, even before hooks.
I was a heavy Redux user for a long time,
but when hooks came out, I knew they would
serve as a great API to finally ditch Redux
in favor of something less manual.
I came up with the initial inspiration for
React Query when I saw a library called
&lt;a href=&quot;https://github.com/vadimdemedes/draqula&quot;&gt;Draqula&lt;/a&gt; was released.
It was almost like a lightweight Apollo
and something clicked about its patterns and style.
I decided to draw from its patterns a bit and React Query was born.&lt;/p&gt;
&lt;h3 id=&quot;what-tools-or-techniques-would-you-like-to-explore-next&quot;&gt;&lt;a href=&quot;#what-tools-or-techniques-would-you-like-to-explore-next&quot; aria-label=&quot;what tools or techniques would you like to explore next permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What tools or techniques would you like to explore next?&lt;/h3&gt;
&lt;p&gt;I would like to explore serverless technology, 3d rendering, and general framework design.&lt;/p&gt;
&lt;h3 id=&quot;what-do-you-think-about-react&quot;&gt;&lt;a href=&quot;#what-do-you-think-about-react&quot; aria-label=&quot;what do you think about react permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What do you think about React?&lt;/h3&gt;
&lt;p&gt;React is fantastic. The only problem
I see around it right now is the unknown / uncertain
direction the core React team may be taking.
I really hope that the entire ecosystem will
be able to follow, but as of late,
&lt;a href=&quot;https://reactjs.org/docs/concurrent-mode-intro.html&quot;&gt;concurrent mode&lt;/a&gt;
has been proving to be a difficult constraint
for much of the ecosystem to understand and prepare for,
sometimes even resulting in rewrites of entire tools
to satisfy those constraints.
We’ll see what happens. At the time of writing,
&lt;a href=&quot;https://reactjs.org/docs/concurrent-mode-suspense.html&quot;&gt;Suspense&lt;/a&gt;
for data fetching is still not finalized, but I wish it would be.
The current APIs are just fine. I personally don’t want
to work on React, but with the current component API,
hooks, and suspense, I am pretty happy with where we’ve ended up.&lt;/p&gt;
&lt;h3 id=&quot;who-influenced-the-most-your-way-of-programming-and-problem-solving-did-you-have-any-mentors-in-your-programming-career&quot;&gt;&lt;a href=&quot;#who-influenced-the-most-your-way-of-programming-and-problem-solving-did-you-have-any-mentors-in-your-programming-career&quot; aria-label=&quot;who influenced the most your way of programming and problem solving did you have any mentors in your programming career permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Who influenced the most your way of programming and problem solving? Did you have any mentors in your programming career?&lt;/h3&gt;
&lt;p&gt;My co founders, &lt;em&gt;Derek Perkins&lt;/em&gt; and &lt;em&gt;Joe Bergevin&lt;/em&gt;
have had a profound impact on how I think,
design and reason about software engineering
and I dare say I’ve also returned the favor
as we’ve grown together.&lt;/p&gt;
&lt;p&gt;The only other prominent mentor I had
early on in my career was the, now niche-famous,
&lt;a href=&quot;https://kentcdodds.com/&quot;&gt;Kent C Dodds&lt;/a&gt;.
He helped me set up my first testing suite
in Angular (believe it or not) and I
watched him give his first lightning
talk at our local meetup (which is also
the very night I met my co founders).&lt;/p&gt;
&lt;h3 id=&quot;what-piece-of-code-has-influenced-the-most-&quot;&gt;&lt;a href=&quot;#what-piece-of-code-has-influenced-the-most-&quot; aria-label=&quot;what piece of code has influenced the most  permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What piece of code has influenced the most ?&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://preactjs.com/&quot;&gt;Preact&lt;/a&gt; and
&lt;a href=&quot;https://svelte.dev/&quot;&gt;Svelte&lt;/a&gt; are quite impressive,
&lt;a href=&quot;https://cloud.google.com/bigquery&quot;&gt;Big Query&lt;/a&gt; by Google is truly unbelievable,
&lt;a href=&quot;https://square.github.io/crossfilter/&quot;&gt;CrossFilter&lt;/a&gt; is still mind-blowing
even though no one really uses it any longer,
&lt;a href=&quot;https://kubernetes.io/&quot;&gt;Kubernetes&lt;/a&gt; is…. insane.&lt;/p&gt;
&lt;h3 id=&quot;i-have-covered-my-programming-principles-in-the-past-what-are-you-programming-principles&quot;&gt;&lt;a href=&quot;#i-have-covered-my-programming-principles-in-the-past-what-are-you-programming-principles&quot; aria-label=&quot;i have covered my programming principles in the past what are you programming principles permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;I have covered my &lt;a href=&quot;https://nosleepjavascript.com/programming-principles/&quot;&gt;programming principles&lt;/a&gt; in the past, what are you programming principles?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ergonomic&lt;/li&gt;
&lt;li&gt;Simple&lt;/li&gt;
&lt;li&gt;Forgiving&lt;/li&gt;
&lt;li&gt;Customizable&lt;/li&gt;
&lt;li&gt;Flexible&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;do-you-think-that-code-can-have-certain-art-like-traits&quot;&gt;&lt;a href=&quot;#do-you-think-that-code-can-have-certain-art-like-traits&quot; aria-label=&quot;do you think that code can have certain art like traits permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Do you think that code can have certain art-like traits?&lt;/h3&gt;
&lt;p&gt;It’s definitely an expression of creativity, but it’s more
like designing a custom tool. So in the same way
I admire the design of say the &lt;a href=&quot;https://www.kregtool.com&quot;&gt;Kreg Jig&lt;/a&gt;
(a woodworking tool), I can also admire the design
of a tool. Not because it is beautiful or clean,
but because of the new abilities it gives me.&lt;/p&gt;
&lt;h3 id=&quot;do-you-find-any-parallels-between-programming-and-other-craft-like-activities-outside-software&quot;&gt;&lt;a href=&quot;#do-you-find-any-parallels-between-programming-and-other-craft-like-activities-outside-software&quot; aria-label=&quot;do you find any parallels between programming and other craft like activities outside software permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Do you find any parallels between programming and other craft-like activities outside software?&lt;/h3&gt;
&lt;p&gt;Wood working. I think both involve creative problem solving.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;franleplant’s note: I have been planing on writing about the many
parallels I see between woodworking and programming but
I’ve never finished finding the right way to put it,
in fact I have like 5 or 6 written and audio drafts of it,
let me know if you are interested in my exploring this parallel
in future posts.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;how-does-your-day-look-like-how-is-your-life-work-balance&quot;&gt;&lt;a href=&quot;#how-does-your-day-look-like-how-is-your-life-work-balance&quot; aria-label=&quot;how does your day look like how is your life work balance permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How does your day look like? How is your life-work balance?&lt;/h3&gt;
&lt;p&gt;Pre pandemic:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Up at 5&lt;/li&gt;
&lt;li&gt;Train at 5:30&lt;/li&gt;
&lt;li&gt;Study and day prep&lt;/li&gt;
&lt;li&gt;At work at 6:30&lt;/li&gt;
&lt;li&gt;Startup (Nozzle) and interleaved OSS&lt;/li&gt;
&lt;li&gt;On the train at 4:30&lt;/li&gt;
&lt;li&gt;Home at 5:45&lt;/li&gt;
&lt;li&gt;Family Time&lt;/li&gt;
&lt;li&gt;Family asleep at 10&lt;/li&gt;
&lt;li&gt;Passion work until 11&lt;/li&gt;
&lt;li&gt;Sleep&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Post Pandemic:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Up at 7&lt;/li&gt;
&lt;li&gt;Breakfast, study and day prep&lt;/li&gt;
&lt;li&gt;Desk at 8&lt;/li&gt;
&lt;li&gt;Startup (Nozzle) and interleaved OSS&lt;/li&gt;
&lt;li&gt;Lunch around 12 with the family&lt;/li&gt;
&lt;li&gt;Stop work at 5&lt;/li&gt;
&lt;li&gt;Family Time&lt;/li&gt;
&lt;li&gt;Family asleep at 10&lt;/li&gt;
&lt;li&gt;Passion work until 12/1&lt;/li&gt;
&lt;li&gt;Sleep&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I feel like I have a pretty awesome balance
because my family is happy, my work is doing well, and I feel fulfilled.&lt;/p&gt;
&lt;h3 id=&quot;i-saw-you-are-a-proud-member-of-the-church-of-jesus-christ-of-latter-day-saints-what-can-you-tell-us-about-that&quot;&gt;&lt;a href=&quot;#i-saw-you-are-a-proud-member-of-the-church-of-jesus-christ-of-latter-day-saints-what-can-you-tell-us-about-that&quot; aria-label=&quot;i saw you are a proud member of the church of jesus christ of latter day saints what can you tell us about that permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;I saw you are a proud member of “The Church of Jesus Christ of Latter-day Saints”, what can you tell us about that?&lt;/h3&gt;
&lt;p&gt;I was raised in a religious family and I am very
grateful for it. I was faced with my own decision
in my youth to either follow or reject what I had
grown up learning about and after losing my father
early on in life and finding peace through Christ
and the teachings of his gospel through the
&lt;a href=&quot;https://www.churchofjesuschrist.org/&quot;&gt;Church of Jesus Christ of Latter Day Saints&lt;/a&gt;,
I decided I wanted to serve a full-time mission for
2 years and share that same gospel with others.
I served as official missionary and representative
of Christ, spending anywhere between 6 weeks and 6
months in various cities and towns across the
state of Santa Catarina in Brazil. It was life
changing and I was super grateful to be able to serve
the people there. I learned to love thousands of people
there as I would my family and aided them in coming to
know the gospel of Christ, developing faith in him,
repenting and witnessing a true change in their hearts
and countenance, being baptized and receiving the gift
of the Holy Ghost. I was even blessed to see many of
those individuals grow closer as families and eventually
be sealed for eternity as a heavenly family unit in one
of Christ’s holy temples. All of this strengthened my
personal testimony as well that the Bible and Book of Mormon
are inspired works of truth, that Christ lived,
was resurrected, and still guides his church today
through Prophets and Apostles, preparing the world for his second coming.&lt;/p&gt;
&lt;h3 id=&quot;what-is-faith-to-you-what-does-being-religious-mean-to-you&quot;&gt;&lt;a href=&quot;#what-is-faith-to-you-what-does-being-religious-mean-to-you&quot; aria-label=&quot;what is faith to you what does being religious mean to you permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is faith to you? What does being religious mean to you?&lt;/h3&gt;
&lt;p&gt;Faith is the hope and belief of things that we cannot
or will not see, but feel are true. Faith is what
keeps me positive and helps me maintain my relationship
with Christ, in whom my faith is based. Being religious
to me simply means allowing God to prevail in your life.
If you have a desire to do the things he would have you do,
you are definitely being “religious”. It means continuously
repenting and trying to be better to ourselves,
our family, Christ and our Heavenly Father.&lt;/p&gt;
&lt;h3 id=&quot;how-do-your-religious-values-and-practices-change-the-way-you-code-do-open-source-and-build-software-in-general&quot;&gt;&lt;a href=&quot;#how-do-your-religious-values-and-practices-change-the-way-you-code-do-open-source-and-build-software-in-general&quot; aria-label=&quot;how do your religious values and practices change the way you code do open source and build software in general permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How do your religious values and practices change the way you code, do open source and build software in general?&lt;/h3&gt;
&lt;p&gt;I believe in charity, the true love of Christ
and this helps me every day to give more
freely of my time to help others, to be
understanding and patient, even when others are not.&lt;/p&gt;
&lt;h3 id=&quot;how-do-you-handle-your-mental-health-how-do-you-handle-anxiety-overthinking-dreaming-about-code&quot;&gt;&lt;a href=&quot;#how-do-you-handle-your-mental-health-how-do-you-handle-anxiety-overthinking-dreaming-about-code&quot; aria-label=&quot;how do you handle your mental health how do you handle anxiety overthinking dreaming about code permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How do you handle your mental health? How do you handle anxiety, overthinking, dreaming about code?&lt;/h3&gt;
&lt;p&gt;I recognize that it’s okay to burnout every now and then.
If you see it coming, you can prepare and recover more quickly.
I don’t tend to overthink, but I do stress about non-programming
things, mostly around my family’s general well-being and relationships.&lt;/p&gt;
&lt;h3 id=&quot;do-you-exercise&quot;&gt;&lt;a href=&quot;#do-you-exercise&quot; aria-label=&quot;do you exercise permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Do you exercise?&lt;/h3&gt;
&lt;p&gt;Nope. I’ll pay for that later, I’m 100% sure.&lt;/p&gt;
&lt;h3 id=&quot;what-are-the-most-important-soft-skills-developers-should-have-ie-good-oral--written-communication-emotional-intelligence-such-as-empathy-team-working-mentoring-learning-teaching-upwards-high-level-communication-handling-anxiety-meditation-etc&quot;&gt;&lt;a href=&quot;#what-are-the-most-important-soft-skills-developers-should-have-ie-good-oral--written-communication-emotional-intelligence-such-as-empathy-team-working-mentoring-learning-teaching-upwards-high-level-communication-handling-anxiety-meditation-etc&quot; aria-label=&quot;what are the most important soft skills developers should have ie good oral  written communication emotional intelligence such as empathy team working mentoring learning teaching upwards high level communication handling anxiety meditation etc permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What are the most important soft skills developers should have? (i.e. good oral / written communication, emotional intelligence such as empathy, team working, mentoring, learning, teaching, upwards high level communication, handling anxiety, meditation, etc)&lt;/h3&gt;
&lt;p&gt;Yes. 😂&lt;/p&gt;
&lt;h3 id=&quot;what-is-like-to-be-a-parent-how-does-that-affect-your-programming&quot;&gt;&lt;a href=&quot;#what-is-like-to-be-a-parent-how-does-that-affect-your-programming&quot; aria-label=&quot;what is like to be a parent how does that affect your programming permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is like to be a parent? How does that affect your programming?&lt;/h3&gt;
&lt;p&gt;It’s harder to find as much time as I used to, but it
forces me to prioritize more, learn faster, and ultimately
get the same amount or more done as I did before.
y children also serve as a wonderful inspiration
and motivation for doing my best.&lt;/p&gt;
&lt;h3 id=&quot;how-do-you-feel-about-the-massive-impact-your-libraries-have-in-so-many-companies-that-use-them&quot;&gt;&lt;a href=&quot;#how-do-you-feel-about-the-massive-impact-your-libraries-have-in-so-many-companies-that-use-them&quot; aria-label=&quot;how do you feel about the massive impact your libraries have in so many companies that use them permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How do you feel about the massive impact your libraries have in so many companies that use them?&lt;/h3&gt;
&lt;p&gt;I’m happy that they are able to use them.
I wish I had something to show for it though.
I do have a few sponsors who have graciously
decided to do just that. Thank you
&lt;a href=&quot;https://github.com/sponsors/tannerlinsley#sponsors&quot;&gt;sponsors&lt;/a&gt;!
But it’s hard to see so many fortune 500
companies use your stuff and never even
really say thanks. I realize that’s the risk
you run with open source software, so I don’t beat myself up about it.&lt;/p&gt;
&lt;h3 id=&quot;what-do-you-like-about-the-open-source-community-how-do-you-handle-toxic-members-in-our-community&quot;&gt;&lt;a href=&quot;#what-do-you-like-about-the-open-source-community-how-do-you-handle-toxic-members-in-our-community&quot; aria-label=&quot;what do you like about the open source community how do you handle toxic members in our community permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What do you like about the open source community? How do you handle toxic members in our community?&lt;/h3&gt;
&lt;p&gt;The open source community is fun! I mostly enjoy talking
and interacting with other maintainers or people who are
equally as stressed or invested as I am. The other people
I love talking with are the genuine fans and helpers
who aren’t necessarily massive impact generators by themselves,
but through their comments and small contributions,
they collectively help so much. Toxic members are not
welcome in my projects or communities. I have no trouble
enforcing a code of conduct and bringing down the
hammer when action needs to be taken. It can be hard,
but I feel it’s important to do this with a loving
attitude as well and welcome those individuals
back when they have had a change of heart.&lt;/p&gt;
&lt;h3 id=&quot;how-do-you-balance-unpaid-work-and-paid-work&quot;&gt;&lt;a href=&quot;#how-do-you-balance-unpaid-work-and-paid-work&quot; aria-label=&quot;how do you balance unpaid work and paid work permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How do you balance unpaid work and paid work?&lt;/h3&gt;
&lt;p&gt;I have a startup that sustains most of my
living expenses. It was hard to get there through.
We had zero-to-little money for a very long time,
but are now doing well. As long as it’s mutually
beneficial to my work, I spend a bit of time on
open source. It then powers our own software,
makes it better, markets our company (usually as a sponsor)
and also gives me more visibility, which I will ultimately
use to further my startups reach (or other projects in the future).&lt;/p&gt;
&lt;h3 id=&quot;free-space-for-tanner-what-would-you-like-to-say&quot;&gt;&lt;a href=&quot;#free-space-for-tanner-what-would-you-like-to-say&quot; aria-label=&quot;free space for tanner what would you like to say permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Free space for Tanner, what would you like to say?&lt;/h3&gt;
&lt;p&gt;Become a &lt;a href=&quot;https://github.com/sponsors/tannerlinsley#sponsors&quot;&gt;sponsor on Github&lt;/a&gt;
or better yet &lt;strong&gt;convince your boss/company to become a sponsor!&lt;/strong&gt;
If every user of my library donated $1 a month,
I could build so much more and it would ensure
that my libraries stay free and up to date forever.&lt;/p&gt;
&lt;p&gt;Buy my &lt;a href=&quot;https://learn.tanstack.com/&quot;&gt;React Query Essentials&lt;/a&gt; course!&lt;/p&gt;
&lt;p&gt;Tell your marketing/SEO team to use &lt;a href=&quot;https://nozzle.io/&quot;&gt;Nozzle.io&lt;/a&gt;.
I’ll give them a personal trial and make it worth their while!&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Wow! What a treat! Thank you so much Tanner for spending time talking with
me, it is awesome to get to know someone that you have so much things in common
on the other side of the continent.&lt;/p&gt;
&lt;p&gt;Make sure you support Tanner’s work as well as this blog for more content like this,
and let me know if you’d like more interviews like this in future posts.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Breaking the iframe frontier: ibridge]]></title><description><![CDATA[TLDR I forked postmate and called it . It uses Typescript and has cool features regarding type safety. I improved the semantics of . I made…]]></description><link>https://nosleepjavascript.com/ibridge/</link><guid isPermaLink="false">https://nosleepjavascript.com/ibridge/</guid><pubDate>Fri, 11 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;tldr&quot;&gt;&lt;a href=&quot;#tldr&quot; aria-label=&quot;tldr permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I forked &lt;a href=&quot;https://github.com/dollarshaveclub/postmate&quot;&gt;postmate&lt;/a&gt; and called it &lt;code class=&quot;language-text&quot;&gt;ibridge&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;It uses &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;Typescript&lt;/a&gt; and has cool features regarding type safety.&lt;/li&gt;
&lt;li&gt;I improved the semantics of &lt;code class=&quot;language-text&quot;&gt;iparent.get&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;I made the code simpler.&lt;/li&gt;
&lt;li&gt;I made both &lt;code class=&quot;language-text&quot;&gt;ibridge.Parent&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;ibridge.Child&lt;/code&gt; be Event Emitters for better composition.&lt;/li&gt;
&lt;li&gt;It has worked super fine!&lt;/li&gt;
&lt;/ul&gt;
&lt;div style=&quot;text-align: center; margin-top: 60px;&quot;&gt;
  &lt;img src=&quot;https://raw.githubusercontent.com/twitter/twemoji/master/assets/svg/1f309.svg&quot; width=&quot;200&quot; alt=&quot;ibridge logo&quot;&gt;
  &lt;h3 style=&quot;text-align: center;&quot;&gt;ibridge&lt;/h3&gt;
  &lt;p style=&quot;text-align: center; margin-top: -15px;&quot;&gt;
    &lt;small&gt;logo by &lt;a href=&quot;https://twemoji.twitter.com&quot;&gt;twemoji&lt;/a&gt;&lt;/small&gt;
  &lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I have recently published &lt;a href=&quot;https://www.npmjs.com/package/ibridge&quot;&gt;ibridge&lt;/a&gt;, a tiny, typesafe, promise-based library
for bidirectional and secure &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe&quot;&gt;iframe&lt;/a&gt; communication.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.npmjs.com/package/ibridge&quot;&gt;npm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/franleplant/ibridge&quot;&gt;repo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;what-is-ibridge&quot;&gt;&lt;a href=&quot;#what-is-ibridge&quot; aria-label=&quot;what is ibridge permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is ibridge&lt;/h2&gt;
&lt;p&gt;ibridge let’s you&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Retrieve data from the child to the parent.&lt;/li&gt;
&lt;li&gt;Implement complex communication flows between parent and child iframes.&lt;/li&gt;
&lt;li&gt;Pre establish a communication flow via a simple &lt;strong&gt;handshake&lt;/strong&gt; &lt;em&gt;protocol&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;how-it-works&quot;&gt;&lt;a href=&quot;#how-it-works&quot; aria-label=&quot;how it works permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How it works&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/f146223321c4c8bcd11065864ede9b00/ibridge.svg&quot; alt=&quot;ibridge high level flow diagram&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ibridge is an abstraction on top of &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage&quot;&gt;postMessage&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Exposes &lt;code class=&quot;language-text&quot;&gt;ibridge.Parent&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;ibridge.Child&lt;/code&gt;, used by the parent and child document respectively.&lt;/li&gt;
&lt;li&gt;In here we call their instances &lt;code class=&quot;language-text&quot;&gt;iparent&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;ichild&lt;/code&gt; respectively.&lt;/li&gt;
&lt;li&gt;Both &lt;code class=&quot;language-text&quot;&gt;Parent&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Child&lt;/code&gt; are &lt;strong&gt;event emitters&lt;/strong&gt; implemented via &lt;a href=&quot;https://www.npmjs.com/package/emittery&quot;&gt;Emittery&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Security is handled entirely by native &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors&quot;&gt;CSP headers&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;At the initial phase it performs a &lt;strong&gt;handshake&lt;/strong&gt; in which the Parent sends a special message to the child and waits for a special response.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;remote-function-calls-from-parent-to-child-the-most-common-flow&quot;&gt;&lt;a href=&quot;#remote-function-calls-from-parent-to-child-the-most-common-flow&quot; aria-label=&quot;remote function calls from parent to child the most common flow permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Remote function calls from Parent to Child (the most common flow)&lt;/h3&gt;
&lt;p&gt;The Child is able to define a &lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; which is made off all the functions that
&lt;strong&gt;live in the Child&lt;/strong&gt; that can be called remotely by the Parent.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; can be a trivially deeply nested object, and each Model function
can by sync or async, returning a resolved or rejected &lt;code class=&quot;language-text&quot;&gt;Promise&lt;/code&gt; that will be
automatically sent back to the Parent without any surprises. Return
values and arguments can be anything that can serializable, plus, return
values can be any &lt;code class=&quot;language-text&quot;&gt;Promise&lt;/code&gt; to a serializable value. Let’s see an example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; resolvedValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; iparent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;blog.analytics.getPageViews&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;page1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;page2&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rejectedValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// handle errors&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Internally this means an event flow like the following:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1)&lt;/strong&gt; parent to child&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sendToChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;GET&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  modelPath&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;blog.analytics.getPageViews&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  arguments&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;page1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;page2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;2)&lt;/strong&gt; child to parent&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;analytics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPageViews&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;page1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;page2&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;sendToParent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;GET-RESOLVE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;sendToParent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;GET-REJECT&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This makes for a pretty standard and easy to understand model,
this thing that seems so intuitive was one of the main reasons
I departed from the original implementation in &lt;a href=&quot;https://github.com/dollarshaveclub/postmate&quot;&gt;postmate&lt;/a&gt;, more on this later.&lt;/p&gt;
&lt;p&gt;If it feels natural or even dumb then I have succeeded.&lt;/p&gt;
&lt;h3 id=&quot;free-form-communication&quot;&gt;&lt;a href=&quot;#free-form-communication&quot; aria-label=&quot;free form communication permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Free form communication&lt;/h3&gt;
&lt;p&gt;ibrigde also lets you build more complex bidirectional flows via high level events&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Send events to the child&lt;/span&gt;
iparent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;emitToChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ping&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;i am father&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// listen to events from the child&lt;/span&gt;
iparent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pong&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// listen to events from the parent&lt;/span&gt;
ichild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ping&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// send message to the parent&lt;/span&gt;
  ichild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;emitToParent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pong&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;i am child&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Internally ibridge has a single event listener for &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage&quot;&gt;postMessage&lt;/a&gt; (the Dispatcher) in both
the Parent and the Child that will listen to valid ibridge messages
and dispatch them as &lt;a href=&quot;https://www.npmjs.com/package/emittery&quot;&gt;Emittery&lt;/a&gt; events. This allows you to use higher level
event emitters abstractions such as &lt;code class=&quot;language-text&quot;&gt;once&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;off&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;onAny&lt;/code&gt;, etc.&lt;/p&gt;
&lt;p&gt;Fun fact, ibridge uses also &lt;code class=&quot;language-text&quot;&gt;Emittery&lt;/code&gt; for the handshake mechanism.&lt;/p&gt;
&lt;h2 id=&quot;why-ibridge-was-created&quot;&gt;&lt;a href=&quot;#why-ibridge-was-created&quot; aria-label=&quot;why ibridge was created permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why ibridge was created&lt;/h2&gt;
&lt;p&gt;I have been designing and implementing an &lt;code class=&quot;language-text&quot;&gt;sdk&lt;/code&gt; to provide
consumers (other companies and services) to use our platform
(let’s call it &lt;strong&gt;Platform A&lt;/strong&gt;) from outside our own controlled domains.&lt;/p&gt;
&lt;p&gt;For different circumstances and limitations I can’t really state publicly
we ended up choosing an iframe based solution so that consumers (parent document)
could interact through high level abstract APIs with our platform (child document).&lt;/p&gt;
&lt;p&gt;This is similar to what other providers already do like Patreon (see link at the bottom),
Twitter embedded tweets (see tweet below), etc.
This bypasses certain cross domain limitations by using an embedded document.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;React is slow, what now? &lt;a href=&quot;https://t.co/y8cfBxFrEY&quot;&gt;https://t.co/y8cfBxFrEY&lt;/a&gt;&lt;/p&gt;&amp;mdash; franleplant (@franleplant) &lt;a href=&quot;https://twitter.com/franleplant/status/1334960068392005638?ref_src=twsrc%5Etfw&quot;&gt;December 4, 2020&lt;/a&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;DANGER ALERT&lt;/strong&gt; iframes are a delicate topic since there are a lot of security
concerns present. Make sure you allow your page to be rendered inside an iframe
by controlling the &lt;code class=&quot;language-text&quot;&gt;Content-Security-Policy&lt;/code&gt; HTTP header. Read &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors&quot;&gt;more in MDN&lt;/a&gt;,
and be sure to understand how the browser security model works related to iframes fully
before launching to production.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Since most of the work in building such &lt;code class=&quot;language-text&quot;&gt;sdk&lt;/code&gt; lies on building a good
higher level communication protocol between &lt;code class=&quot;language-text&quot;&gt;parent&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;child&lt;/code&gt; we started
by using an already existing solution called &lt;a href=&quot;https://github.com/dollarshaveclub/postmate&quot;&gt;postmate&lt;/a&gt;, and it worked
well until it didn’t anymore. We tried hacking around it
but in the end the implementation was far too noisy because of some
core problems in &lt;code class=&quot;language-text&quot;&gt;postmate&lt;/code&gt;, that’s why I decided to fork it.&lt;/p&gt;
&lt;h2 id=&quot;why-postmate-was-not-enough&quot;&gt;&lt;a href=&quot;#why-postmate-was-not-enough&quot; aria-label=&quot;why postmate was not enough permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why Postmate was not enough&lt;/h2&gt;
&lt;p&gt;I created &lt;a href=&quot;https://github.com/dollarshaveclub/postmate/issues/211&quot;&gt;an issue&lt;/a&gt; in Postmate’s repo to see if we can unify efforts eventually.&lt;/p&gt;
&lt;p&gt;These are the problems I found with Postmate that made me fork it:&lt;/p&gt;
&lt;h3 id=&quot;wrong-semantics-for-code-classlanguage-textiparentgetcode&quot;&gt;&lt;a href=&quot;#wrong-semantics-for-code-classlanguage-textiparentgetcode&quot; aria-label=&quot;wrong semantics for code classlanguage textiparentgetcode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Wrong semantics for &lt;code class=&quot;language-text&quot;&gt;iparent.get&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Postmate doesn’t have good semantics for &lt;code class=&quot;language-text&quot;&gt;.get&lt;/code&gt;, in fact, if you call a child model
through Postmate’s &lt;code class=&quot;language-text&quot;&gt;.get&lt;/code&gt; and that model throws then you won’t receive a failing promise in the
parent, in fact that’s one of the main things we had to hack around internally and other’s have opened
&lt;a href=&quot;https://github.com/dollarshaveclub/postmate/issues/94&quot;&gt;issues and hacked around too&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One of our main use cases, and when you think about it, it’s probably the main use case for a lot of
users; was and is to remotely call functions that live in the child and get the resolved or rejected values
with that same semantics in the Parent so we can report back to the parent’s consumer.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ibridge&lt;/strong&gt; gives better semantics to &lt;code class=&quot;language-text&quot;&gt;.get&lt;/code&gt; by making it a deconstructed remote function call that handles
return values and errors thrown in ways that feel natural, hiding the underlying mechanisms completely.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;wrong-semantics-and-name-for-code-classlanguage-textiparentcallcode&quot;&gt;&lt;a href=&quot;#wrong-semantics-and-name-for-code-classlanguage-textiparentcallcode&quot; aria-label=&quot;wrong semantics and name for code classlanguage textiparentcallcode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Wrong semantics and name for &lt;code class=&quot;language-text&quot;&gt;iparent.call&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;On first read one might think that &lt;code class=&quot;language-text&quot;&gt;iparent.call&lt;/code&gt; is the main way of remote calling model functions
in the child from the parent but is actually not, it just a way of &lt;strong&gt;calling model functions
just for the side effects&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This makes no sense, we already can cover that with &lt;code class=&quot;language-text&quot;&gt;.get&lt;/code&gt;, if the consumer doesn’t care
about the model’s return function then it simply can be omitted. This is exactly how
we handle function calls in regular programs. If we do not care about their return value
we just call them for their side effects with the same mechanism we call them when we do care
about their return values &lt;em&gt;or errors&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Another use case for &lt;code class=&quot;language-text&quot;&gt;.call&lt;/code&gt; can be simply &lt;strong&gt;emitting events&lt;/strong&gt; to the child, but it doesn’t have
a good name to reflect that and being strictly related to child model functions not always
fits the flow users have in mind.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ibridge&lt;/strong&gt; doesn’t have &lt;code class=&quot;language-text&quot;&gt;.call&lt;/code&gt; and instead you simply can &lt;code class=&quot;language-text&quot;&gt;iparent.emitToParent&lt;/code&gt; and we also provide
the opposite: &lt;code class=&quot;language-text&quot;&gt;ichild.emitToChild&lt;/code&gt; and everything is abstracted by relying on &lt;code class=&quot;language-text&quot;&gt;Emittery&lt;/code&gt; as much as possible.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;the-model-implementation-is-just-too-simplistic&quot;&gt;&lt;a href=&quot;#the-model-implementation-is-just-too-simplistic&quot; aria-label=&quot;the model implementation is just too simplistic permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The Model implementation is just too simplistic&lt;/h3&gt;
&lt;p&gt;We very early found ourselves hoping to be able to call deeply nested Model functions
but found that postmate only accepted model keys, this means that
you need to collapse all your model functions into a single shallow object.&lt;/p&gt;
&lt;p&gt;This is too simplistic and prevents users from building more complex
model structures.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;iparent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;blogPostsGetPageViews&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// child model&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;blogPostsGetPageViews&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/*...*/&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ibridge&lt;/strong&gt; allows &lt;code class=&quot;language-text&quot;&gt;.get&lt;/code&gt; to accept a lodash’s &lt;code class=&quot;language-text&quot;&gt;path&lt;/code&gt; to the model, by relying on &lt;a href=&quot;https://lodash.com/docs/4.17.15#get&quot;&gt;lodash.get&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;iparent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;blog.posts.getPageViews&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// child model&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  blog&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    posts&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function-variable function&quot;&gt;getPageViews&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;/*...*/&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;model-context&quot;&gt;&lt;a href=&quot;#model-context&quot; aria-label=&quot;model context permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Model context&lt;/h3&gt;
&lt;p&gt;Another thing we find ourselves wanting was the capability of providing a simple
Model context that could be accessible to all model functions should they need to.&lt;/p&gt;
&lt;p&gt;With Postmate you need to roll out your own implementation, but there’s a really easy
way of providing a simple context implementation without letting the user roll
out their own implementation.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ibridge&lt;/code&gt; provides an easy way of passing &lt;code class=&quot;language-text&quot;&gt;context&lt;/code&gt; to all Model functions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;myModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// accessible via this&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;debugging&quot;&gt;&lt;a href=&quot;#debugging&quot; aria-label=&quot;debugging permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Debugging&lt;/h3&gt;
&lt;p&gt;Postmate used a simplistic approach based on an &lt;code class=&quot;language-text&quot;&gt;env&lt;/code&gt; variable and a bunch of &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; statements.
This wasn’t ideal since it didn’t work always as expected, required bundler configuration, and the handling was way to manual.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ibridge&lt;/code&gt; uses &lt;a href=&quot;https://www.npmjs.com/package/debug&quot;&gt;debug&lt;/a&gt; for a more structured way of configuring and outputting debug / logs.
Check the docs for more information.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Example of enabling verbose output.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// you might need to do this in the child document too&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// check the `storage` dev tools tab.&lt;/span&gt;

localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;debug &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ibridge:*&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will output a &lt;em&gt;lot&lt;/em&gt; of information that should make it really easy to debug the workings
of any consumer of the lib and the lib it self.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 82.43243243243244%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAChUlEQVQ4y32UZ3LbQBSDdZLYYdleWJakClVt3/9ICHapZDIZRz+eqJHETwAelrsmalTngGaKMP0Vpluh+jOaLqGyElVVoa5qNE1TRrQt2hezU07BzRo6dbDpC3Z4wE6fcNMBzigYa6GtQSsFhBBo87wCtlTYnj3ETOD4BUOgm75wuD5wuX5iXT8QlgPVEtS8VleAkTbOP98wSgczfhbbOq7o0hXD/oFoRzg/YBgHpJSwLAuClBvgG7UFeKreMagM/Nhy5KjuDBtO8KaDsh1MSLBxRpSqWP/fFOD6nhVa2r0zwxvnDk2g8XsEYSB1gFIWir/NKl4CnWyRVI1gN8vWL/C6g4sj+mGi/R7CxgLUT5uizVa/X86u7g3e7xH1vn8uher6FTGdkZihmU9oXYBUHNtDuQGN5yLb5gXw0aE+PIHjDSqdePOExiSYOBGeCGUTpIFQeSz/wPGqqPgfoDYSrmffoucybtDhwOsFw3zBdLijj3van6Ei4dy2LkuiUkul7GcjnxE8N74LdYPj2xt6wYxyZcK+QH1/QpyuhB2plrCwYJyOzDcUpdpYBM97mu0U5Y7mU7QTPClisRBD2BTGE1Q4op8u2J/uLDmBYWR2iTMWZYrd1FTrfQ9D6957/qku9nd1Z/Dj3qHax60uBG5dvLA6KwILno4PyHGBMAOkn58ujsy142cEur+Ani+zqBD5hfkNZAdHZjgf7+g8q1MUJUQ+MKzmzdpBmgzLkOaP5ZKhy0BZb8B8UqgqlzpON0zHL7i0QsalZNjxvadtobhA6zHGAJszfFaoZFjx4fB2DajmnOG92MwZhnQpKm3aHmeKp0a6hdteNxd0kz9TdLBfeE0BNcX9Avzv5ab6o9F4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;example debug output&quot;
        title=&quot;example debug output&quot;
        src=&quot;/static/5536f32ca293c6e29f763d29acc360a1/fcda8/logs.png&quot;
        srcset=&quot;/static/5536f32ca293c6e29f763d29acc360a1/12f09/logs.png 148w,
/static/5536f32ca293c6e29f763d29acc360a1/e4a3f/logs.png 295w,
/static/5536f32ca293c6e29f763d29acc360a1/fcda8/logs.png 590w,
/static/5536f32ca293c6e29f763d29acc360a1/efc66/logs.png 885w,
/static/5536f32ca293c6e29f763d29acc360a1/c83ae/logs.png 1180w,
/static/5536f32ca293c6e29f763d29acc360a1/161ec/logs.png 1840w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;typescript&quot;&gt;&lt;a href=&quot;#typescript&quot; aria-label=&quot;typescript permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Typescript&lt;/h3&gt;
&lt;p&gt;Finally ibridge uses Typescript, this let us express certain things
such as that the Child is generic for &lt;code class=&quot;language-text&quot;&gt;TModel&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;TContext&lt;/code&gt; and so
you can have better validations in terms of type safety.&lt;/p&gt;
&lt;p&gt;Additionally I am a big fan of Typescript and the guarantees it provides so
I basically do nothing without Typescript.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Postmate is a great library that was in need for a little bit of love.
I am open to unifying efforts with the Postmate team so that we can
have a single version of this library with all the benefits that &lt;strong&gt;ibridge&lt;/strong&gt;
brings to the table.&lt;/p&gt;
&lt;p&gt;I will also try to give &lt;strong&gt;ibridge&lt;/strong&gt; more support, if you are interested
in helping me maintain it let me know!&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Like the content? Consider subscribing, buying me a coffee or even becoming a Patreon below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React is slow, what now?]]></title><description><![CDATA[TLDR: the gist Measure performance! If you don’t measure it’s the same as doing nothing. You can optimize your React performance by…]]></description><link>https://nosleepjavascript.com/react-performance/</link><guid isPermaLink="false">https://nosleepjavascript.com/react-performance/</guid><pubDate>Fri, 04 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;tldr-the-gist&quot;&gt;&lt;a href=&quot;#tldr-the-gist&quot; aria-label=&quot;tldr the gist permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR: the gist&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Measure performance! If you don’t measure it’s the same as doing nothing.&lt;/li&gt;
&lt;li&gt;You can optimize your React performance by improving &lt;strong&gt;what&lt;/strong&gt; (🤔) and &lt;strong&gt;which&lt;/strong&gt; (🧙) components render.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;🧙 To improve &lt;strong&gt;which&lt;/strong&gt; component renders you can use&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Make sure your props have stable references&lt;/li&gt;
&lt;li&gt;Virtualization&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;🤔 To improve &lt;strong&gt;what&lt;/strong&gt; components render you should&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;identify the slow components&lt;/li&gt;
&lt;li&gt;simplify, use more efficient abstractions, make smaller trees, etc&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If this got your attention read on:&lt;/p&gt;
&lt;h2 id=&quot;table-of-contents&quot;&gt;&lt;a href=&quot;#table-of-contents&quot; aria-label=&quot;table of contents permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table of Contents&lt;/h2&gt;
&lt;div class=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#tldr-the-gist&quot;&gt;TLDR: the gist&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#io-performance-problems-in-react&quot;&gt;io performance problems in React&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#potential-solutions&quot;&gt;Potential solutions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cpu-performance-problems-in-react&quot;&gt;CPU performance problems in React&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#react-render-and-commit-phase&quot;&gt;React render and commit phase&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#measuring&quot;&gt;Measuring&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#chrome-dev-tools-performance-tab&quot;&gt;Chrome dev tool’s Performance tab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#react-dev-tools-performance-tab&quot;&gt;React dev tool’s Performance tab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#measuring-1&quot;&gt;Measuring&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#general-solutions-to-cpu-bound-problems-in-react-applications&quot;&gt;General solutions to cpu-bound problems in React applications&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#-improving-what-components-render&quot;&gt;🤔 Improving &lt;em&gt;what&lt;/em&gt; components render&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#%F0%9F%A7%99-improving-which-components-render&quot;&gt;🧙 Improving &lt;em&gt;which&lt;/em&gt; components render&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#virtualization&quot;&gt;Virtualization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#props-optimization&quot;&gt;Props Optimization&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#reactmemo&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#fake-prop-changes-usecallback&quot;&gt;Fake prop changes: &lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#fake-prop-changes-usememo&quot;&gt;Fake prop changes: &lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#summary&quot;&gt;Summary&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#props-changed&quot;&gt;Props changed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#parent-rendered&quot;&gt;Parent rendered&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#hooks-changed-state-context&quot;&gt;Hooks changed (state, context)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;Closing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;In general computer programs can be:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;io-bound&lt;/strong&gt;: spend most of their time making inputs and outputs&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cpu-bound&lt;/strong&gt;: spend most of their time making calculations&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And how do these translate into Front End apps and in particular React apps?&lt;/p&gt;
&lt;h2 id=&quot;io-performance-problems-in-react&quot;&gt;&lt;a href=&quot;#io-performance-problems-in-react&quot; aria-label=&quot;io performance problems in react permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;io performance problems in React&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Browser apps can be &lt;strong&gt;io-bounded&lt;/strong&gt; mostly in terms of asynchronous http calls.&lt;/li&gt;
&lt;li&gt;a poor management of these network requests can slow down your app&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;potential-solutions&quot;&gt;&lt;a href=&quot;#potential-solutions&quot; aria-label=&quot;potential solutions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Potential solutions&lt;/h3&gt;
&lt;p&gt;Although this will not be the focus of this post let’s quickly cover some
important areas where solutions and improvements might be found for io-bound
problems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lazy load as much as you can.&lt;/li&gt;
&lt;li&gt;careful with the initial load of assets and also backend requests.&lt;/li&gt;
&lt;li&gt;reduce the amount of times you load highly static stuff (select options, configurations, etc)&lt;/li&gt;
&lt;li&gt;debounce the amount of times you make certain requests.&lt;/li&gt;
&lt;li&gt;parallelize request as much as possible via &lt;code class=&quot;language-text&quot;&gt;Promise.all&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;make your critical BE endpoints more efficient (i.e. by tweaking DB accesses and such).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;cpu-performance-problems-in-react&quot;&gt;&lt;a href=&quot;#cpu-performance-problems-in-react&quot; aria-label=&quot;cpu performance problems in react permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;CPU performance problems in React&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;This is going to be the main focus of this post.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Before talking about performance we need to define it in a more concrete way:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;browser apps are &lt;a href=&quot;https://stackoverflow.com/questions/30932870/why-doesnt-javascript-get-its-own-thread-in-common-browsers&quot;&gt;single thread&lt;/a&gt; programs for the most part.&lt;/li&gt;
&lt;li&gt;scripting, i.e. Javascript, DOM rendering, event handling, etc; all run in the same thread.&lt;/li&gt;
&lt;li&gt;if a Javascript module is slow it can block the main thread.&lt;/li&gt;
&lt;li&gt;if the main thread is blocked then the UI will seem unresponsive (&lt;strong&gt;fps&lt;/strong&gt; will drop).&lt;/li&gt;
&lt;li&gt;unresponsive UIs are one of the worst offenders in terms of &lt;strong&gt;User Experience&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This all boils down to the concept of &lt;code class=&quot;language-text&quot;&gt;fps&lt;/code&gt; or &lt;strong&gt;Frames Per Second&lt;/strong&gt;.
Responsive UIs will deliver a minimum of 30 fps or more ideally 60 fps, this means
that every frame of your app, even the more demanding code paths, should compute in &lt;strong&gt;30 ms or less&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If your Javascript is slow it might cause “frames to be dropped” which means
computing a frame in more than 30 ms.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To fully understand how this applies to React we need to understand how React works
and what React’s &lt;strong&gt;render and commit phase&lt;/strong&gt; are but in short we can say that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If a React component update is triggered then the &lt;strong&gt;entire sub tree needs to be
rendered in less than 30ms&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This becomes specially problematic when you have complex and long component structures
such as Tables, Trees and Lists and in which sometimes (for example the first time) you will
need to re render large parts of them.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Summary:&lt;/strong&gt; we should figure out which expensive interactions are dropping frames,
measure them to confirm and fix them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;react-render-and-commit-phase&quot;&gt;&lt;a href=&quot;#react-render-and-commit-phase&quot; aria-label=&quot;react render and commit phase permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;React render and commit phase&lt;/h2&gt;
&lt;p&gt;React works (at a high level) in two phases&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Render phase:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Happens when a component updates i.e. props or hooks changed.&lt;/li&gt;
&lt;li&gt;React traverses the component sub tree rendering each child and computing the virtual DOM (VDOM) sub tree.&lt;/li&gt;
&lt;li&gt;Only the “dirty” sub tree needs to be recomputed i.e. the updated component parents might not need to be re rendered.&lt;/li&gt;
&lt;li&gt;This phase is proportional to the size of the sub tree being rendered.&lt;/li&gt;
&lt;li&gt;This phase is also proportional to how expensive it is to compute each child component.&lt;/li&gt;
&lt;li&gt;We can give React hints to make this process more efficient i.e. &lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Commit phase:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The render phase outputs a new virtual DOM of the entire UI.&lt;/li&gt;
&lt;li&gt;In the commit phase Reacts compares the new tree with the previous one (VDOM diffing).&lt;/li&gt;
&lt;li&gt;React calculates the minimum DOM mutations needed to reflect the new VDOM tree.&lt;/li&gt;
&lt;li&gt;React mutates the DOM.&lt;/li&gt;
&lt;li&gt;Your UI is now updated.&lt;/li&gt;
&lt;li&gt;This phase is pretty efficient by default.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This whole process needs to happen in less than 30 or 16 ms (30 fps and 60 fps respectively) for your UI to be considered
responsive, as you can see there’s a lot of work and that work is proportional to the size of your app.&lt;/p&gt;
&lt;p&gt;We will explore ways to make mostly the &lt;strong&gt;Render phase&lt;/strong&gt; more efficient but first let’s discuss
how to measure and how to find out what are the slow parts of our app and how bad they are.&lt;/p&gt;
&lt;h2 id=&quot;measuring&quot;&gt;&lt;a href=&quot;#measuring&quot; aria-label=&quot;measuring permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Measuring&lt;/h2&gt;
&lt;p&gt;In 2020 we have pretty solid tools for measuring browser side performance, these
are the ones I use the most:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chrome dev tool’s Performance tab.&lt;/li&gt;
&lt;li&gt;React dev tool’s Performance tab.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;chrome-dev-tools-performance-tab&quot;&gt;&lt;a href=&quot;#chrome-dev-tools-performance-tab&quot; aria-label=&quot;chrome dev tools performance tab permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Chrome dev tool’s Performance tab&lt;/h3&gt;
&lt;p&gt;This is the most comprehensive tool, it is useful for any browser application,
it measures frames per second, records stack traces, identifies slow / hot parts of your code,
and much more. The main UI is the &lt;a href=&quot;http://www.brendangregg.com/flamegraphs.html&quot;&gt;flame chart&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here’s a &lt;a href=&quot;https://reactjs.org/docs/optimizing-performance.html#profiling-components-with-the-chrome-performance-tab&quot;&gt;good doc&lt;/a&gt;
of Chrome’s Performance Tab applied to React.&lt;/p&gt;
&lt;h3 id=&quot;react-dev-tools-performance-tab&quot;&gt;&lt;a href=&quot;#react-dev-tools-performance-tab&quot; aria-label=&quot;react dev tools performance tab permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;React dev tool’s Performance tab&lt;/h3&gt;
&lt;p&gt;You need to install the &lt;a href=&quot;https://reactjs.org/blog/2019/08/15/new-react-devtools.html&quot;&gt;React dev tool extension&lt;/a&gt; in your browser.&lt;/p&gt;
&lt;p&gt;It specializes the information in the Chrome dev tool’s Performance tab to
React. You can see the different &lt;strong&gt;commit phases&lt;/strong&gt; and the Javascript code that was run in its respective
&lt;strong&gt;render phase&lt;/strong&gt; through a &lt;strong&gt;flame chart&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Through this tool you can easily find out:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;when a component re renders&lt;/li&gt;
&lt;li&gt;what props changed&lt;/li&gt;
&lt;li&gt;what hooks changed i.e. state, context, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Check the &lt;a href=&quot;https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html&quot;&gt;introductory post&lt;/a&gt; for more information.&lt;/p&gt;
&lt;h3 id=&quot;measuring-1&quot;&gt;&lt;a href=&quot;#measuring-1&quot; aria-label=&quot;measuring 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Measuring&lt;/h3&gt;
&lt;p&gt;This is the &lt;strong&gt;methodology&lt;/strong&gt; I like to use when measuring front end applications:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;identify the problem&lt;/strong&gt;: identify page interactions that make the UI feel unresponsive.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;create a hypothesis&lt;/strong&gt;: optionally, we might have some ideas where the problem might be.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;measure&lt;/strong&gt;: verify the problem by measuring and looking at important metrics such as &lt;strong&gt;fps&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;measure&lt;/strong&gt;: identify problematic pieces of code, optionally: validate your hypothesis.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;create a solution&lt;/strong&gt;: apply a solution based off the previous steps&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;measure the solution&lt;/strong&gt;: validate that the problem has been resolved or alleviated by looking at the important metrics.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;If you optimize something without measuring then you are practically doing nothing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There might be cases where the problem is super obvious and I won’t tell you that going straight
to fixing it is naturally bad, but most of the problems are not obvious and measuring will be
cornerstone of the performance improvement process.&lt;/p&gt;
&lt;p&gt;Additionally, if you measure you can later tell your users, stakeholders and more importantly your &lt;strong&gt;boss
that you have improved the performance of a given area of your app by x%&lt;/strong&gt; which is always a good
way of communicating upwards what we accomplish inside the rabbit hole.&lt;/p&gt;
&lt;h2 id=&quot;general-solutions-to-cpu-bound-problems-in-react-applications&quot;&gt;&lt;a href=&quot;#general-solutions-to-cpu-bound-problems-in-react-applications&quot; aria-label=&quot;general solutions to cpu bound problems in react applications permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;General solutions to cpu-bound problems in React applications&lt;/h2&gt;
&lt;p&gt;Now that we have measured and identified the problematic areas let’s cover
potential solutions.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can optimize your React performance by
improving &lt;strong&gt;what&lt;/strong&gt; components render and
&lt;strong&gt;which&lt;/strong&gt; components render.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;-improving-what-components-render&quot;&gt;&lt;a href=&quot;#-improving-what-components-render&quot; aria-label=&quot; improving what components render permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;🤔 Improving &lt;em&gt;what&lt;/em&gt; components render&lt;/h3&gt;
&lt;p&gt;Identifying the slow parts of our React app will usually
point out to some particular components that are slow to render
(or that have too many instances in a single page, more on this in the &lt;strong&gt;which&lt;/strong&gt; section).&lt;/p&gt;
&lt;p&gt;There might be a number of reasons those components are slow, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;they do blocking calculations&lt;/li&gt;
&lt;li&gt;they render large trees&lt;/li&gt;
&lt;li&gt;they use expensive / non efficient libraries&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Most of these boil down to improving how fast your components render,
sometimes critical components cannot rely on too complicated libraries
and so you need to go back to basic and roll your own simpler implementation.&lt;/p&gt;
&lt;p&gt;I have experienced something like this when using &lt;a href=&quot;https://formik.org/&quot;&gt;Formik&lt;/a&gt; (which I love)
or should I say abusing Formik on several cells of every single row of a complex table.&lt;/p&gt;
&lt;p&gt;You can go a long way making your components more efficient but eventually you will need
to focus on &lt;strong&gt;which&lt;/strong&gt; components render:&lt;/p&gt;
&lt;h3 id=&quot;🧙-improving-which-components-render&quot;&gt;&lt;a href=&quot;#%F0%9F%A7%99-improving-which-components-render&quot; aria-label=&quot;🧙 improving which components render permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;🧙 Improving &lt;em&gt;which&lt;/em&gt; components render&lt;/h3&gt;
&lt;p&gt;There are two broad categories where we can improve this aspect:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Virtualization&lt;/li&gt;
&lt;li&gt;Prop optimization&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;virtualization&quot;&gt;&lt;a href=&quot;#virtualization&quot; aria-label=&quot;virtualization permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Virtualization&lt;/h4&gt;
&lt;p&gt;It means &lt;strong&gt;only render what is visible in the viewport&lt;/strong&gt;, i.e. only render the
table rows that the user can see or the list items the user can see.&lt;/p&gt;
&lt;p&gt;This is great because it can be applied to complex UIs without going through the &lt;strong&gt;what&lt;/strong&gt; step,
although I recommend it; and modern libraries tend to have decent support for virtualizing
your tables and lists. A good example of this is &lt;a href=&quot;https://github.com/bvaughn/react-virtualized&quot;&gt;react-virtualized&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Virtualizing means that we &lt;strong&gt;reduce the amount of components React needs to render in a given frame&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;props-optimization&quot;&gt;&lt;a href=&quot;#props-optimization&quot; aria-label=&quot;props optimization permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Props Optimization&lt;/h4&gt;
&lt;p&gt;React tries to make your components look like pure functions but still will try to render
more times than it should.&lt;/p&gt;
&lt;h5 id=&quot;code-classlanguage-textreactmemocode&quot;&gt;&lt;a href=&quot;#code-classlanguage-textreactmemocode&quot; aria-label=&quot;code classlanguage textreactmemocode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt;&lt;/h5&gt;
&lt;p&gt;Most components in React can be &lt;strong&gt;memoized&lt;/strong&gt;, which means that they do not have internal side effects
or depend on any external side effects so that we can guarantee than &lt;strong&gt;with the same props the component
will return the same tree&lt;/strong&gt; (hooks, state and context are still respected though).&lt;/p&gt;
&lt;p&gt;For that we can use &lt;a href=&quot;https://reactjs.org/docs/react-api.html#reactmemo&quot;&gt;React.memo&lt;/a&gt;.
This tells React to skip re rendering these memoized components if their
props didn’t change.&lt;/p&gt;
&lt;h5 id=&quot;fake-prop-changes-code-classlanguage-textusecallbackcode&quot;&gt;&lt;a href=&quot;#fake-prop-changes-code-classlanguage-textusecallbackcode&quot; aria-label=&quot;fake prop changes code classlanguage textusecallbackcode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Fake prop changes: &lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;&lt;/h5&gt;
&lt;p&gt;Additionally we have the problem of &lt;strong&gt;fake prop changes&lt;/strong&gt; which means that although
the content of a given prop didn’t change, the reference did. The most classic example
of this is the event handler one:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onChange&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input onChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;onChange&lt;/code&gt; callback, although semantically and content wise will be the same on every render, will be
be stored in a completely separate memory direction so React will detect it as different from the previous one.&lt;/p&gt;
&lt;p&gt;This is related to how &lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt; does shallow comparison by default (although there’s no good way of
deeply comparing functions in Javascript AFAIK).&lt;/p&gt;
&lt;p&gt;An easy fix for this is to use &lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt; which was designed exactly for this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; onChange &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input onChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5 id=&quot;fake-prop-changes-code-classlanguage-textusememocode&quot;&gt;&lt;a href=&quot;#fake-prop-changes-code-classlanguage-textusememocode&quot; aria-label=&quot;fake prop changes code classlanguage textusememocode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Fake prop changes: &lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt;&lt;/h5&gt;
&lt;p&gt;A similar problem can rise when building complex data structures and not memoizing them
correctly before passing them as props.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; rows &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bySearchCriteria&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bySortOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Table data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;rows&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This means that on every render we are re creating the &lt;code class=&quot;language-text&quot;&gt;rows&lt;/code&gt; array, and although
the content might not change, the shallow compare with the previous version will mark
it as different. To solve this React provides &lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; rows &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bySearchCriteria&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bySortOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;deps&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Table data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;rows&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will ensure rows are only recalculated when the dependencies change (most likely props or state).&lt;/p&gt;
&lt;p&gt;You can also customize the way &lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt; compares current vs previous props but be aware that this
calculation should be fast since it is effectively part of the &lt;strong&gt;Render phase&lt;/strong&gt; and you probably
don’t want to perform trivially nested deep comparisons on every render.&lt;/p&gt;
&lt;h3 id=&quot;summary&quot;&gt;&lt;a href=&quot;#summary&quot; aria-label=&quot;summary permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Summary&lt;/h3&gt;
&lt;p&gt;The React profile is really good at telling you why a given component rendered out of
the three main options. Let’s cover each option and potential paths of improvements&lt;/p&gt;
&lt;h4 id=&quot;props-changed&quot;&gt;&lt;a href=&quot;#props-changed&quot; aria-label=&quot;props changed permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Props changed&lt;/h4&gt;
&lt;p&gt;How it looks in the React dev tool:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 374px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/43f3e9b7af652229f54cc30dd90a81de/52dba/propsChanged.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 71.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADBklEQVQ4y6WSS28bVRiG55dUCMRFLSD1giohBO2CBRKrRqFAAyoLSsUfQAKxQSwqWtFwEYKoSKlKQqu4OKlJTB07IjF1DKnjGc/YsXDtXMZ2JolnPPY4sRNIHz5PqLgI2LB49Z7v/p5zPuXZwNd8qKf5OJeh39D4KKtxUVe5oKa4kL4t/N84LzkXtXneno1zdGgQ5c3YTVy3TqFYxKyUWVpZwdpYZ7PTpvPLDu2dbcHOv2JL4ru7v1KsOxy7NiQNk3EKK8tcCYzw/vkPfP5k4Avy5gre3V1saexsd3B2On/wn2CLz5PBulPj+HgQ5fVwCHdrk4KoM0RlwTTJlorcqVRYWltj0bKELZ//CcXVVaq1GrrkHBu6jHJmOkpdGpqOjdVsstpwWW95VBwH064JbJ8rcqVKvU7V3cOe7VCWvA2pM+wNjo+NoLwxM0VVCqK3fuBqMEhMeE7PMDkzQ1JVGb5+ncn4DKHJCIFQiO+Ts/4AV65a/x0tubIhvmdGpeE74yNstrewahuY1iq218CS4LrrUGvU5YPWaG55frzrc7wmTcnf5i71TQ+72fA/sLhW4ezAOZT+VIzSYolPP/+Mwa+uEJ9NEI5GGPjyEt/cGGP46jBjoSBz6RSj34YIjAa5LHnB0A3Gb37HcrXMtig0a1XeC/SjvHttkJooSmsqmaxBcu4nsvkF4olbGAs5MkYGTfby5zsFVHmKH2/P+bGUmmapbNIQlR1ZnWJ5mbPn3kJ56dRrePKoxVKJZDKJYRhkMhlM+W1d11HlHTWxs9ks8/Pz5PN5Go0GhUJB8nRyuRyLUqvrBgePPIXyyukz2KKwW9wtiEajRCIRNE3z7enpaWKxGOFwmImJCVKpFJasSyKRYGpqyhfRHZbLLXD46NMoJ18+jed5/tQuN0VtV3HXvudrtVr++R47sip+nsRc16XdbpNWNQ4+IQofP/QkJ3pP0fNCn88nevv2IPaer+8v8Z6/+bvoffFVnnu+h4cPHEZ5aP8h9j1wgH33/x/s574HH+ORR4/wG1UAgKJIvjsEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;props changed in react dev tool&quot;
        title=&quot;props changed in react dev tool&quot;
        src=&quot;/static/43f3e9b7af652229f54cc30dd90a81de/52dba/propsChanged.png&quot;
        srcset=&quot;/static/43f3e9b7af652229f54cc30dd90a81de/12f09/propsChanged.png 148w,
/static/43f3e9b7af652229f54cc30dd90a81de/e4a3f/propsChanged.png 295w,
/static/43f3e9b7af652229f54cc30dd90a81de/52dba/propsChanged.png 374w&quot;
        sizes=&quot;(max-width: 374px) 100vw, 374px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Did they really? Are they &lt;code class=&quot;language-text&quot;&gt;fake prop changes&lt;/code&gt;? Use &lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&quot;parent-rendered&quot;&gt;&lt;a href=&quot;#parent-rendered&quot; aria-label=&quot;parent rendered permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Parent rendered&lt;/h4&gt;
&lt;p&gt;How it looks in the React dev tool:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 468px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ebb58cb61db4a6c158db12d038b954d3/90372/parentRendered.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACTklEQVQoz1WRWW8SURTH+TgmmvggCT7Zz6CJvqDWxJr4KXzQ+GDiiwlWxbQaaGQpNVACEduCEgYYtgFkGYZl2IeyDKtGH8y/915Kl4df/uecuffM/5yreW19AyH3FfvRfezGfPDyLriibljDHnxLeuBPuBDP7OGA+wIn58BOYA9ubhcBzgwvZ4Pb/xly4BmaoReI7dyGxmAwIpPOQkgK4CNRpFNpgoBCLo+fP4I4+H6IfK6I0VDFYrbAfDrHjLFgOie1yewP/v77j3v6J6Th5gdEoxGYzGZsbW/D6XQyPB4P7HY7rFYry2VZhqIo6HQ66HS76BI6p7TbLUzGKh6sbywbLhYLKL0e1PEYw+GQxYrSw2ikMnrHx2g2W2g0mkual5HrdaiqivvrxOHbd0bU6zKCwSA4joMgCEgmk8hkMvD7/YjFeHZ4MpmcQfOLjEYjZkr/cGPZsNdTkEqlUC6Xkc/nUa1WIYoii2mt3W6j1WoRl02mdArKYDBg9Pt9zOfzZcP3xi0cHR3CZDLB5/OxvXm9XthsNrY76trhcLDcYrEgkUhgOp0yp1Qp4/EEv1cODZtGspcGstksSqUSo0jcVSoV1Go1FItFgsjqIoE6pg8kSRKbgNYKhQJzzHZo/PiJ2O4jEomQsZOIhMPs1X+RH+RyOfA8j1AoxHYZj8eIxtg6VnV6j05BGz56/BSa5y9fsZcrEBcUsSQRNxK5VDrLxdN8FS8dS2cUybeSVMadu3porl7XQXtzDTd0t6DVUV3GVM/zy2gvnDnXNVy5psUJ7O/HHnYYwcYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;parent rendered in react dev tool&quot;
        title=&quot;parent rendered in react dev tool&quot;
        src=&quot;/static/ebb58cb61db4a6c158db12d038b954d3/90372/parentRendered.png&quot;
        srcset=&quot;/static/ebb58cb61db4a6c158db12d038b954d3/12f09/parentRendered.png 148w,
/static/ebb58cb61db4a6c158db12d038b954d3/e4a3f/parentRendered.png 295w,
/static/ebb58cb61db4a6c158db12d038b954d3/90372/parentRendered.png 468w&quot;
        sizes=&quot;(max-width: 468px) 100vw, 468px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Use &lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt; to memoize your &lt;em&gt;pure&lt;/em&gt; components.&lt;/p&gt;
&lt;h4 id=&quot;hooks-changed-state-context&quot;&gt;&lt;a href=&quot;#hooks-changed-state-context&quot; aria-label=&quot;hooks changed state context permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hooks changed (state, context)&lt;/h4&gt;
&lt;p&gt;How it looks in the React dev tool:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 349px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/58291fd55b3efef9880d05555b493555/e9bf8/hooksChanged.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 71.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADP0lEQVQ4y0WSW1NaZxSG9y+KzU37C/or2pvMdNqrJL3tRS/aXjS96/SgVaEtYDlJVE4iCQqIqAkIkShkooIHjpszylHi07V3Og0z73zr8H0v613vVj6z/s6XK0a+Xv+Hh14zjwSPfZb3sZyPvB/iDzUzDz1mvffYv6S/1Tg0LuX+X/O4c0fUr7vURgNUQUni+nhI+aZHbdinMRlR7V/rtYqc6nBAazqhOrih0Kyjyn1P7hiNS7m35iTeUNmOxbCuPMUmCEYiBKMRXF4Podg2ga0twaZeC0bCRPf39d5eOk3ndsLt3R2xWoUZ9zLKx8ZZti8KvD07ZdZgwGgx64+WHA5W/X4sdjtmmw3PRoA/LRYcqys411b5ZW6OyO4utV6Xbr8vHHk+ES7lc/ssyaszWt0OqqAhF8qNOrV2S0ddas3r3v+x2mnr0GqlusrJxTlqo0GqWEDjUh6sGTgo5ekIUaleoyo7qXfbtGVXlaYq5CpXIqcsvVq7SUmt6mdT9taTfffGAybTW9LlAg/cBpRPF35mJ39CNpfD5XGz6vMSkl29yh4T2AwRe7GPwfS3Xg/vxHCKZPe6X+TG6QphXQYZTsbsnZ+icSn3XDbC5SJDWW5RpDQG4qq4WJWL9f6NjpImXyRqNa3flL6WX7+b0hay/nhMRDg0LmXGZiKuVnCICd89+ZElp5OdZJLfFhaYMxpwixmLJhMmm5WoTLvi98kdB1aXi1/n/2DZ62VXXI9VinxkN8uEi+KWLPaqXOJAZL7MHJKSMy3YT6d4e3lBNn9GIpPhzXmBo9MTDo6PSLzOENnbJf0mR0smjwrHjHAp991OXXJPpJxWypwUrzhXa2QLeV1isdUkK0R56Z3XqhQEOck16SOgI4aMRHpUJtS4lBmzkS35Di9LRV4evWZdjPA+C7IsBu0cJHlx+Ap/6Lmer4l8s8POUzFI+4PWf7vsj0eEL2VC4VK+mP+erFiu/SbTKe+4Y3qnne9z7ZOY3mlVGIxGDAVaPBYTx2LIcDzS32ZOs3y1+APKN9YnmKIu/AdhPIkQ8ZSXdMZDILGBO7mJL/GcSCpAIBnEI7k/GSKS3tBryYyPw6yfuOSOkJlvnT/xL7FKrm1W+fWGAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;hooks changed in react dev tool&quot;
        title=&quot;hooks changed in react dev tool&quot;
        src=&quot;/static/58291fd55b3efef9880d05555b493555/e9bf8/hooksChanged.png&quot;
        srcset=&quot;/static/58291fd55b3efef9880d05555b493555/12f09/hooksChanged.png 148w,
/static/58291fd55b3efef9880d05555b493555/e4a3f/hooksChanged.png 295w,
/static/58291fd55b3efef9880d05555b493555/e9bf8/hooksChanged.png 349w&quot;
        sizes=&quot;(max-width: 349px) 100vw, 349px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nothing too obvious to do here. Try to validate that the hook that
changed makes sense. Perhaps a bad context provider is faking out
changes the same way as &lt;code class=&quot;language-text&quot;&gt;fake prop changes&lt;/code&gt; might appear.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;By now you should feel pretty confident in your skills to identify and improve
Performance problems in React. Of course &lt;em&gt;theory&lt;/em&gt; and &lt;em&gt;practice&lt;/em&gt; are different beasts
but your problem wont be far away from the ones we’ve covered, perhaps you will have to
deal with library updates, or components out of your control but that’s life!&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Like the content? Consider subscribing, buying me a coffee or even becoming a Patreon below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Secrets of a Tech Lead: Programming Principles]]></title><description><![CDATA[Let’s talk about one of the core guiding principles I use as a
developer and as a Tech Lead
when designing solutions and architectures, when…]]></description><link>https://nosleepjavascript.com/programming-principles/</link><guid isPermaLink="false">https://nosleepjavascript.com/programming-principles/</guid><pubDate>Fri, 27 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Let’s talk about one of the core guiding principles I use as a
developer and as a Tech Lead
when designing solutions and architectures, when programming
and when reviewing others code, which I find
myself doing more and more as I move forward in my career.&lt;/p&gt;
&lt;p&gt;These sort of principles are of the family of &lt;a href=&quot;https://amzn.to/33fhxf6&quot;&gt;Ray Dalio’s principles&lt;/a&gt;
but applied to programming, I might write a book about it eventually, who knows.&lt;/p&gt;
&lt;p&gt;These have have a massive impact in my career as a programmer and have
enabled me to get a more holistic approach to designing software that
ultimately were one of the main reasons I was able to get a Tech Lead job.&lt;/p&gt;
&lt;p&gt;With these principles in mind I have a &lt;strong&gt;technical compass&lt;/strong&gt;
that helps me navigate all the decision making I need to do
all the time; ranging from the high level architectural to the low
level naming, function structures, etc.&lt;/p&gt;
&lt;p&gt;So I present to you one of the most important principles guiding my work:&lt;/p&gt;
&lt;h2 id=&quot;clarity-then-simplicity-then-consistency&quot;&gt;&lt;a href=&quot;#clarity-then-simplicity-then-consistency&quot; aria-label=&quot;clarity then simplicity then consistency permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Clarity then Simplicity then Consistency&lt;/h2&gt;
&lt;p&gt;Let’s unpack it a little bit, every word counts.&lt;/p&gt;
&lt;p&gt;Disclaimers:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The program first and foremost &lt;strong&gt;needs to work&lt;/strong&gt;, needs to do what it was intended to,
needs to serve its purpose, then and only then we can start worrying about these principles.&lt;/li&gt;
&lt;li&gt;There is a great deal of &lt;strong&gt;subjectivity&lt;/strong&gt; in these principles,
we really don’t want to forget about that, but, once you have worked in enough projects
you start realizing that programs have a community and a culture around it, be that
an &lt;strong&gt;open source community&lt;/strong&gt; or the &lt;strong&gt;tech culture of the company&lt;/strong&gt; inside which the software
is developed. In this context these principles, such as &lt;strong&gt;Clarity&lt;/strong&gt;, will
have its own concrete meanings. It also is important to reflect on what it means
to be clear for a given context and propose potential improvements if possible, which will
be also highly subjective. The important conclusion is, yes, these things are subjective, but
we do not develop software in a vacuum and so &lt;strong&gt;they will have more concrete meanings in the
context where we develop software.&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;clarity&quot;&gt;&lt;a href=&quot;#clarity&quot; aria-label=&quot;clarity permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Clarity&lt;/h2&gt;
&lt;p&gt;Programming can be thought of as a way of expressing ideas in a formal language,
in that sense we could even go as far as thinking &lt;strong&gt;programming as a weird form of art
or even poetry&lt;/strong&gt;, there are always those pieces of code that touch our hearts, and
so long as we have the main goal of software in mind: solving problems, I believe
is fine to take this idea of beauty in.&lt;/p&gt;
&lt;p&gt;Code is created with two main purposes:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;to tell machines what do,&lt;/li&gt;
&lt;li&gt;to communicate ideas with other people.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If we don’t express our &lt;strong&gt;ideas correctly&lt;/strong&gt; the machine will yield at us, and
if we don’t express the &lt;strong&gt;right ideas&lt;/strong&gt; then other forms of validations should yield at us i.e. unit tests.&lt;/p&gt;
&lt;p&gt;The second part is the one where &lt;strong&gt;Clarity&lt;/strong&gt; becomes important.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Code should be easy to understand by our team mates.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Code should be as easy to understand as possible for our team mates
and humans in general, that’s in fact the &lt;strong&gt;main purpose of programming languages&lt;/strong&gt;,
to go closer to humans and abstract away the machine language.&lt;/p&gt;
&lt;p&gt;How to improve &lt;strong&gt;Clarity&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;identify and use the main &lt;strong&gt;concepts&lt;/strong&gt; in your domain i.e. &lt;code class=&quot;language-text&quot;&gt;nodes&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;cars&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;contracts&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;unverifiedUser&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;naming is important, take your time finding the right names.&lt;/li&gt;
&lt;li&gt;are you sure about that one liner? Maybe break it into multiple lines?&lt;/li&gt;
&lt;li&gt;read your code entirely after “finishing it” i.e. &lt;strong&gt;review your own PRs&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;identify hard to understand sections&lt;/li&gt;
&lt;li&gt;ask: how can I make them better?&lt;/li&gt;
&lt;li&gt;if you can then do that&lt;/li&gt;
&lt;li&gt;if you cannot then comment the complexity away&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sometimes some piece of code might be reflecting something inherently
difficult to understand, so there’s no easy way out of that and so
you should add comments to those sections.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Concepts are a fundamental idea in programming&lt;/strong&gt;, we never deal with
some variable or some function, we deal with &lt;strong&gt;semantic concepts&lt;/strong&gt; and
operations that have strong meanings in the &lt;strong&gt;domain&lt;/strong&gt; we are working.
A good program will use strong concepts and thus will have good
naming across the board. &lt;strong&gt;Make sure you get the concepts right&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Modern software development might involve millions of lines of code, across
multiple programming languages, covering complex business rules, we really
don’t want to make this already complicated artifact anymore and so
&lt;strong&gt;Clarity becomes a tool for managing complexity&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;An example, I see a lot of newbie programmers abuse the indexing operation in a tight chain.&lt;/p&gt;
&lt;p&gt;Let’s say we have a contrived data structure as follows:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IUsersColors&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;userId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;hex&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In my experience, new programmers tend to do:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// access the &quot;i&quot; favourite color hex&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;usersColors&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;userId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But i found the following more clear albeit longer.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; selectedUserColors &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; usersColors&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;userId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; color &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; selectedUserColors&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; colorHex &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;colorHex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is my &lt;strong&gt;subjective&lt;/strong&gt; judging of the code, perhaps
in your context and for you and your team mates the
first case is clearer. Not one example
is wrong, but the point is that given our context,
we should go for the clearest solution.&lt;/p&gt;
&lt;h2 id=&quot;simplicity&quot;&gt;&lt;a href=&quot;#simplicity&quot; aria-label=&quot;simplicity permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Simplicity&lt;/h2&gt;
&lt;p&gt;Note how we say Clarity &lt;strong&gt;then&lt;/strong&gt; Simplicity.
This means that &lt;strong&gt;Clarity&lt;/strong&gt; is our first goal and our second
goal is &lt;strong&gt;Simplicity&lt;/strong&gt; but by maximising &lt;strong&gt;Simplicity&lt;/strong&gt; we should
never hurt &lt;strong&gt;Clarity&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Simplicity&lt;/strong&gt; is related to the &lt;a href=&quot;https://en.wikipedia.org/wiki/KISS_principle&quot;&gt;KISS&lt;/a&gt; principle (Keep it simple stupid).
We should avoid adding more complexity to our code without good reasons.
Always &lt;strong&gt;start with the simplest solution that solves the problem&lt;/strong&gt; and then add complexity
only and when needed.&lt;/p&gt;
&lt;p&gt;Feel free to use your subjective judgement to look in the future and find a balance
between the current iteration’s simplicity and what you will probably need in the future.&lt;/p&gt;
&lt;p&gt;We must account for subjectivity,
context and experience but always keeping in mind the question:
&lt;strong&gt;Can I make this solution simpler?&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;It is not going to hurt you, in fact,
if the answer is “no, because of reasons a, b and c” then you will feel more
comfortable and assertive about the code you are making.&lt;/p&gt;
&lt;p&gt;To achieve &lt;strong&gt;Simplicity&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Always start from a base case of the &lt;strong&gt;simplest solution&lt;/strong&gt;, you might want to implement it or not.&lt;/li&gt;
&lt;li&gt;write code with &lt;strong&gt;Simplicity&lt;/strong&gt; in mind, always choose the &lt;strong&gt;simplest solution&lt;/strong&gt; and complicate when needed.&lt;/li&gt;
&lt;li&gt;combine the &lt;strong&gt;Simplicity&lt;/strong&gt; mind set with your experience and find balance between the two.&lt;/li&gt;
&lt;li&gt;review the results: is this the simplest implementation?&lt;/li&gt;
&lt;li&gt;add fixes if necessary, document if the complexity cannot be controlled.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;consistency&quot;&gt;&lt;a href=&quot;#consistency&quot; aria-label=&quot;consistency permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Consistency&lt;/h2&gt;
&lt;p&gt;And finally we have &lt;strong&gt;Consistency&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;We should never for the sake of &lt;strong&gt;Consistency&lt;/strong&gt; sacrifice Clarity or Simplicity.
I have seen a lot of PRs where the reason for doing things in this
unclear or complicated way was simply because other parts of the codebase were
doing it like so. I completely disagree with this reasoning.&lt;/p&gt;
&lt;p&gt;Code and tools and our understanding of them evolve constantly, that thing
you are trying to be consistent against might using some older idioms or tools
that have been superseded by others and that can be expressed clearer and simpler.&lt;/p&gt;
&lt;p&gt;It is also unreasonable, even more with larger codebases, to expect an entire codebase
to move to these new idioms and tools at once, because that’s not how software evolves,
we write software piece by piece, little by little, so differences between newer and older
parts are fine, track the old parts, add &lt;code class=&quot;language-text&quot;&gt;TODO&lt;/code&gt; and do them eventually.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Consistency&lt;/strong&gt; is desired because &lt;strong&gt;humans are good with familiar patterns&lt;/strong&gt; so
this contributes in how easy to navigate and understand your codebase is, for newcomers
and old timers alike.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;There are no magical recipes for achieving these goals
and the result of maximising these qualities might look
different depending on the team, tech culture, language, etc;
nevertheless we should strive to achieve some sort of success
maximising them. Why?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Because clear, simple and consistent code is easy to understand&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And if your codebase is easier to understand then:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;we can spot errors and bugs more easy and fix them&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;we can change or add new features with more ease&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;more generally, &lt;strong&gt;we can maintain our codebase more easily&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;faster and easier developer on-boarding&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And this all translates into &lt;strong&gt;faster product delivery times&lt;/strong&gt; for your company
plus in the way we probably would’ve
create some pretty amazing and beautiful pieces of code. Everybody wins.&lt;/p&gt;
&lt;p&gt;What are your principles regarding programming? What compass do
you use in your everyday decision making? Let me know!.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Like the content? Consider subscribing, buying me a coffee or even becoming a Patreon below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Bitbucket is developer hell]]></title><description><![CDATA[I consider PR reviews as one of the fundamental and most important
tools developers have to collaborate. We use it daily to submit changes…]]></description><link>https://nosleepjavascript.com/bitbucket-sucks/</link><guid isPermaLink="false">https://nosleepjavascript.com/bitbucket-sucks/</guid><pubDate>Fri, 20 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I consider PR reviews as one of the fundamental and most important
tools developers have to collaborate. We use it daily to submit changes and
to get important feedback from peers and more experienced developers.&lt;/p&gt;
&lt;p&gt;And so, &lt;strong&gt;it should be targeted to software developers and not to managers&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Let’s cover some of the daily tortures of dealing with &lt;a href=&quot;https://bitbucket.org/&quot;&gt;Bitbucket&lt;/a&gt;, which
I unfortunately need to deal with.&lt;/p&gt;
&lt;h2 id=&quot;copying-code-from-the-pr-changes-into-a-comment&quot;&gt;&lt;a href=&quot;#copying-code-from-the-pr-changes-into-a-comment&quot; aria-label=&quot;copying code from the pr changes into a comment permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Copying code from the PR changes into a comment&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Hey friend, how about you implement this piece of functionality in this other way?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This common and healthy workflow is &lt;strong&gt;fundamentally broken&lt;/strong&gt; in BB because
you cannot copy code from the body of the PR into a comment without getting
a lot more than what you clearly selected.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/460408cff29803e91776376bae5605ad/copypastev3.gif&quot; alt=&quot;Copying and pasting code from PR changes is broken&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;are-you-sure-you-want-to-discard-actually-not-your-comments&quot;&gt;&lt;a href=&quot;#are-you-sure-you-want-to-discard-actually-not-your-comments&quot; aria-label=&quot;are you sure you want to discard actually not your comments permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Are you sure you want to discard (actually not) your comments?&lt;/h2&gt;
&lt;p&gt;Trying to click anywhere else when writing a comment like for example
expanding to see more code will result in an alert that states
that your comment changes will be removed which is already super annoying.
But if you even do not care about discarding your comment and you go ahead
and click on discard the comment isn’t really discarded! So it is completely misleading.&lt;/p&gt;
&lt;p&gt;This is BB not caring about the amount of time developers throw into detailed
code reviews.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/7a16dbe4130224ea56472f85903a24f7/commentclick.gif&quot; alt=&quot;Are you sure you want to discard (actually not) your comments?&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;what-you-see-may-be-what-you-get-horrible-markdown-support&quot;&gt;&lt;a href=&quot;#what-you-see-may-be-what-you-get-horrible-markdown-support&quot; aria-label=&quot;what you see may be what you get horrible markdown support permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What You See May Be What You Get: horrible markdown support&lt;/h2&gt;
&lt;p&gt;Markdown is a tool aimed for technical folks, it is minimal but gets
the job done without any distractions, it is &lt;em&gt;not&lt;/em&gt; &lt;a href=&quot;https://en.wikipedia.org/wiki/WYSIWYG&quot;&gt;WYSIWYG&lt;/a&gt; (what you see is what you get)
by design and partially for simplicity.&lt;/p&gt;
&lt;p&gt;BB takes the worse of all worlds: horrible “standard” markdown support
that varies across places and combine it with a &lt;a href=&quot;https://en.wikipedia.org/wiki/WYSIWYG&quot;&gt;WYSIWYG&lt;/a&gt; editor.
This creates really weird
use cases we will cover below.&lt;/p&gt;
&lt;p&gt;Other technical tools, such as &lt;a href=&quot;https://github.com/&quot;&gt;Github&lt;/a&gt;, understand how important decent markdown
support is and they use it to empower developers.
They do build visual tools on top of markdown but without combining them
into a monster broken implementation.&lt;/p&gt;
&lt;p&gt;Let’s see some specially frustrating cases&lt;/p&gt;
&lt;h3 id=&quot;selecting-a-code-block-language&quot;&gt;&lt;a href=&quot;#selecting-a-code-block-language&quot; aria-label=&quot;selecting a code block language permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Selecting a code block language&lt;/h3&gt;
&lt;p&gt;Instead of using the standard &lt;strong&gt;”```typescript”&lt;/strong&gt; they include a visual
Select. Guess what, professional developers don’t need this help at all, and
newbies can search the web once and forget about this.&lt;/p&gt;
&lt;p&gt;Think about ergonomics, with regular markdown you do everything with the keyboard,
with the BB inferno you first need to type the three backward ticks and then grab the
mouse and select your language and then click back on the code block.&lt;/p&gt;
&lt;p&gt;This is a really poor understanding of your user’s UX!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/e7b45f374d83485074abc0f93fc73afb/mdlang.gif&quot; alt=&quot;selecting code block language&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;smart-dumb-markdown-hybrid-support&quot;&gt;&lt;a href=&quot;#smart-dumb-markdown-hybrid-support&quot; aria-label=&quot;smart dumb markdown hybrid support permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Smart (dumb) markdown hybrid support&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&quot;https://en.wikipedia.org/wiki/WYSIWYG&quot;&gt;WYSIWYG&lt;/a&gt; &lt;a href=&quot;https://guides.github.com/features/mastering-markdown/&quot;&gt;markdown&lt;/a&gt; hybrid implementation produces stuff like this&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/e0371b316a1ee15020dc166396db9c4c/format.gif&quot; alt=&quot;format&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;list-items-without-an-empty-line&quot;&gt;&lt;a href=&quot;#list-items-without-an-empty-line&quot; aria-label=&quot;list items without an empty line permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;List items without an empty line&lt;/h3&gt;
&lt;p&gt;This cannot happen in the comment textbox unless you force it to, but
it can happen in the PR description textbox and it can also happen when you
write the markdown in a &lt;em&gt;regular&lt;/em&gt; text editor / IDE i.e. when committing code
via git, when writing the README, etc.&lt;/p&gt;
&lt;p&gt;If you don’t leave an empty line before a list then it won’t get transformed correctly:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/c8e58d30c452b643bf40ea77f00b21d0/lists.gif&quot; alt=&quot;markdown lists&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;performance-of-the-text-box&quot;&gt;&lt;a href=&quot;#performance-of-the-text-box&quot; aria-label=&quot;performance of the text box permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Performance of the text box&lt;/h2&gt;
&lt;p&gt;I have a pretty good and modern computer but most of the time
I experience heavy lags when writing a simple text only comment in &lt;a href=&quot;https://bitbucket.org/&quot;&gt;BB&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I suspect this is related to the horrible &lt;a href=&quot;https://en.wikipedia.org/wiki/WYSIWYG&quot;&gt;WYSIWYG&lt;/a&gt; implementation,
which we have just heavily broken down above.&lt;/p&gt;
&lt;h2 id=&quot;doesnt-work-on-large-prs&quot;&gt;&lt;a href=&quot;#doesnt-work-on-large-prs&quot; aria-label=&quot;doesnt work on large prs permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Doesn’t work on large PRs&lt;/h2&gt;
&lt;p&gt;When a PR is a large (I know, I know, large PRs should not happen, but unfortunately sometimes they do)
BB will choose either&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;consuming a lot of resources&lt;/li&gt;
&lt;li&gt;not displaying the entire PR&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In either case the UX ends up being bad.&lt;/p&gt;
&lt;p&gt;In case &lt;strong&gt;1.&lt;/strong&gt; you will get a lot of RAM being consumed and
most likely the scrolling and the interaction with the page
will be even more slow and awkward.&lt;/p&gt;
&lt;p&gt;In case &lt;strong&gt;2.&lt;/strong&gt; you need to click file by file to inspect a PR, which isn’t better IMO.&lt;/p&gt;
&lt;h2 id=&quot;bitbucket-is-jira-applied-to-git&quot;&gt;&lt;a href=&quot;#bitbucket-is-jira-applied-to-git&quot; aria-label=&quot;bitbucket is jira applied to git permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bitbucket is Jira applied to git&lt;/h2&gt;
&lt;p&gt;I’ve seen that the described behaviors tend to be cross
cutting problems across the &lt;a href=&quot;https://www.atlassian.com/&quot;&gt;Atlassian&lt;/a&gt; suite, &lt;a href=&quot;https://www.atlassian.com/software/jira&quot;&gt;Jira&lt;/a&gt; has similar
problems and &lt;a href=&quot;https://confluence.atlassian.com/alldoc/atlassian-documentation-32243719.html&quot;&gt;Confluence&lt;/a&gt; is horrible, they are generally
really slow and clunky and unresponsive and text editing tends to be a pain.&lt;/p&gt;
&lt;h2 id=&quot;understanding-your-product&quot;&gt;&lt;a href=&quot;#understanding-your-product&quot; aria-label=&quot;understanding your product permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Understanding your product&lt;/h2&gt;
&lt;p&gt;PRs are one of the core use cases of &lt;a href=&quot;https://bitbucket.org/&quot;&gt;BB&lt;/a&gt; as a product,
they are what have arguably made &lt;a href=&quot;https://github.com/&quot;&gt;Github&lt;/a&gt; the beacon that it is now.&lt;/p&gt;
&lt;p&gt;There are a few things your PR experience needs to provide at the base level&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PR title, description and inline comments.&lt;/li&gt;
&lt;li&gt;Every text box needs to support plain markdown and maybe mentioning other people (tagging).&lt;/li&gt;
&lt;li&gt;If you want to add markdown shortcuts make them &lt;em&gt;insert markdown&lt;/em&gt; and &lt;strong&gt;not&lt;/strong&gt; actually applying style.&lt;/li&gt;
&lt;li&gt;Good diffing visualization (which BB does well IMO).&lt;/li&gt;
&lt;li&gt;It is all about the code!&lt;/li&gt;
&lt;li&gt;Copying code from the diff needs to work as expected.&lt;/li&gt;
&lt;li&gt;Markdown code blocks (code snippets) are a fundamental feature of all your text boxes.&lt;/li&gt;
&lt;li&gt;Either provide a really good experience inside your code blocks or do nothing.&lt;/li&gt;
&lt;li&gt;Your app needs to be simple, small, fast and stable in time.&lt;/li&gt;
&lt;li&gt;Some PRs are open for long periods of time, make sure your app is stable!.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These are one the core features a good PR UI needs to provide, if anything,
these need to be the best of the best.&lt;/p&gt;
&lt;p&gt;BB seems to have prioritized being “cute” or “pretty” (is it?) instead of being functional.&lt;/p&gt;
&lt;h2 id=&quot;solutions&quot;&gt;&lt;a href=&quot;#solutions&quot; aria-label=&quot;solutions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Solutions&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://bitbucket.org/&quot;&gt;Bitbucket&lt;/a&gt; is a developer centric platform, use developer centric tools,
use plain old text inputs with good markdown support, add as little as possible
on top of that, make the experience of writing comments, PR descriptions,
code snippets as easy, simple and fast as possible.&lt;/p&gt;
&lt;p&gt;Don’t leak stuff from &lt;a href=&quot;https://www.atlassian.com/software/jira&quot;&gt;Jira&lt;/a&gt; and &lt;a href=&quot;https://confluence.atlassian.com/alldoc/atlassian-documentation-32243719.html&quot;&gt;Confluence&lt;/a&gt; to &lt;a href=&quot;https://bitbucket.org/&quot;&gt;Bitbucket&lt;/a&gt;, they have different
audience.&lt;/p&gt;
&lt;p&gt;And if you have time… make sure &lt;em&gt;every&lt;/em&gt; text input in your system has a plain text
mode, where either you interpret it as good old markdown or as unformatted text, either
is much better than what you have now.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Liked the content? Consider subscribing, buying me coffee or even becoming a Patreon below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Stop using Redux for Data Fetching, use this instead]]></title><description><![CDATA[For the longest time it has been an idiom in React applications to
perform data fetching through Redux, this approach has always
have…]]></description><link>https://nosleepjavascript.com/redux-data-fetching-antipattern/</link><guid isPermaLink="false">https://nosleepjavascript.com/redux-data-fetching-antipattern/</guid><pubDate>Tue, 10 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;For the longest time it has been an idiom in &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; applications to
perform data fetching through &lt;a href=&quot;https://redux.js.org/&quot;&gt;Redux&lt;/a&gt;, this approach has always
have problems in its efficiency and effectiveness but modern tools and techniques
have showed us better ways. Let’s together
explore what better alternatives the ecosystem has to offer, but
first let’s quickly cover what’s Redux and how it is typically used
to fetch data.&lt;/p&gt;
&lt;p&gt;Redux is a global state management system mostly associated with
React applications that is great for managing global app state and
the states transitions in a predictable way but when dealing with
application data fetching requirements it can become a problem:&lt;/p&gt;
&lt;h2 id=&quot;the-typical-data-fetching-in-redux&quot;&gt;&lt;a href=&quot;#the-typical-data-fetching-in-redux&quot; aria-label=&quot;the typical data fetching in redux permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The typical data fetching in Redux&lt;/h2&gt;
&lt;p&gt;This is a very simplistic way to data fetch to Redux,
it is probably not production ready and has unresolved problems.&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;post.action.ts&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;LOADING_START&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;LOADING_END&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;FETCH_ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;UPDATE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./post.reducer&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadingStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOADING_START&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadingEnd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOADING_END&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FETCH_ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; payload&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IPost&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FETCH_ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; payload&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; post &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// this requires redux-thunk&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadingStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; post &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadingEnd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;post.reducer.ts&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOADING_START&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts/LOADING_START&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOADING_END&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts/LOADING_END&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FETCH_ERROR&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts/FETCH_ERROR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts/UPDATE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; initialState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IState&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IPost &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;postReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  prevState&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IPostState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; initialState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  action&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IAction&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IPostState &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOADING_START&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;prevState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOADING_END&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;prevState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FETCH_ERROR&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; error &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payload&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;prevState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UPDATE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; post &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payload &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; IPost&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; postId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;prevState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; post &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; prevState&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;root.reducer.ts&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./post.reducer&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;combineReducers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; post &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And finally you can use it&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// fetch data when the component mounts&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;onComponentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;postId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// or&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;postId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getPost&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; post&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;getPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;appState&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IAppState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// reading the result of the data being fetched,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// but who asked for it? do I need to do it?&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// did someone already did it?&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; post&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; appState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; post&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mapDispatchToProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// this will be called and will trigger the http call,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// let&apos;s hope that `MyComponent` does it and does it correctly,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// i.e. in onComponentDidMount AND onComponentDidUpdate&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; getPost&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; actions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getPost &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  mapStateToProps&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  mapDispatchToProps
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MyComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;data-fetching-with-redux-is-too-complicated&quot;&gt;&lt;a href=&quot;#data-fetching-with-redux-is-too-complicated&quot; aria-label=&quot;data fetching with redux is too complicated permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Data fetching with Redux is too complicated&lt;/h2&gt;
&lt;p&gt;The current implementation has the following problems&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it is way too verbose (hooks and libraries might make it better)&lt;/li&gt;
&lt;li&gt;is that the right semantics for my actions?&lt;/li&gt;
&lt;li&gt;is that the right structure and naming for my actions?&lt;/li&gt;
&lt;li&gt;is that the right file structure? Official Redux docs once upon a time opposed to the “ducks” approach but now they seem to &lt;a href=&quot;https://redux.js.org/style-guide/style-guide#structure-files-as-feature-folders-or-ducks&quot;&gt;be strongly recommending it&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;should I use switch or some other way of casing?&lt;/li&gt;
&lt;li&gt;should I normalize?&lt;/li&gt;
&lt;li&gt;is the state shape correct?&lt;/li&gt;
&lt;li&gt;are my meta flags correct?&lt;/li&gt;
&lt;li&gt;how would I manage multiple posts being fetched at the same time? (hint: you need to change your state shape and do more stuff)&lt;/li&gt;
&lt;li&gt;should I use &lt;a href=&quot;https://github.com/immerjs/immer&quot;&gt;immer&lt;/a&gt; (which I love BTW) or similar?&lt;/li&gt;
&lt;li&gt;should I use &lt;a href=&quot;https://redux-toolkit.js.org&quot;&gt;redux-toolkit&lt;/a&gt;?&lt;/li&gt;
&lt;li&gt;should I use &lt;a href=&quot;https://redux-saga.js.org/&quot;&gt;sagas&lt;/a&gt;? (which is even more verbose and complex BTW).&lt;/li&gt;
&lt;li&gt;where are the selectors?&lt;/li&gt;
&lt;li&gt;how do I make my team code consistently across the multiple action/reducers that we will need to write?&lt;/li&gt;
&lt;li&gt;what happens if more than one component triggers the same data fetching action? Do I need to dedup http calls manually?&lt;/li&gt;
&lt;li&gt;do I need to make all my data fetching actions at the root of my app? (in big enough apps this causes a bad decoupling between the data requirements of your components and your components).&lt;/li&gt;
&lt;li&gt;what about if my app is too big and I want to more granularly define what data fetching requirements a medium level component needs to have?&lt;/li&gt;
&lt;li&gt;when does this fetched data expires? how do I clean it up?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All these are somewhat open problems that you and your team need to
fix in the life cycle of your app development. It is really hard
to structure this 100% correctly.&lt;/p&gt;
&lt;p&gt;And finally, these things illustrate &lt;strong&gt;the crazy amount of decisions, considerations and
code a developer needs to make in order to fetch a simple post&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Simple and common tasks should have simple solutions.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;the-usage-problem&quot;&gt;&lt;a href=&quot;#the-usage-problem&quot; aria-label=&quot;the usage problem permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The usage problem&lt;/h2&gt;
&lt;p&gt;Let’s say we already figured out how to do all the boilerplate,
we still have to deal with the usage problem: &lt;strong&gt;the decoupling of the triggering of http calls
(the action) and the reading of the result (the state)&lt;/strong&gt; as seen in above.&lt;/p&gt;
&lt;p&gt;What you really are trying to express is something like the following,
notice how in a single place we have the triggering of the http side effect
and the reading of the result and the meta data.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// UI&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div style=&quot;font-size: 25px; margin-top: 40px; margin-bottom: 40px;&quot;&gt;
&lt;p&gt;&lt;strong&gt;Decoupling things that are naturally tightly coupled is as bad as tightly coupling things that shouldn’t be.&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;By using &lt;code class=&quot;language-text&quot;&gt;redux&lt;/code&gt; hooks it can, partially, get better.&lt;/p&gt;
&lt;h2 id=&quot;redux-forces-both-data-fetching-and-mutations-to-be-imperative&quot;&gt;&lt;a href=&quot;#redux-forces-both-data-fetching-and-mutations-to-be-imperative&quot; aria-label=&quot;redux forces both data fetching and mutations to be imperative permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Redux forces both data fetching and mutations to be imperative&lt;/h2&gt;
&lt;p&gt;Data fetching (when you retrieve data) is usually reactive in a React applications,
meaning that a prop will change, a component will render and an associated side effect
of fetching new data should be triggered. Mutations, like saving a form are typically
imperative. &lt;strong&gt;Redux forces both data fetching and mutations to be imperative&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&quot;the-library-problem&quot;&gt;&lt;a href=&quot;#the-library-problem&quot; aria-label=&quot;the library problem permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The library problem&lt;/h2&gt;
&lt;p&gt;Any library that relies on Redux makes its integration surface bigger.
Lib consumers now need setup Redux and set it up the way the library expects it
to be with the appropriate reducers and middlewares it needs to work.&lt;/p&gt;
&lt;p&gt;The alternative that we will explore are much more straight forward to encapsulate
at the library level.&lt;/p&gt;
&lt;h2 id=&quot;what-is-data-fetching&quot;&gt;&lt;a href=&quot;#what-is-data-fetching&quot; aria-label=&quot;what is data fetching permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is data fetching?&lt;/h2&gt;
&lt;p&gt;Let’s take a step back and analyse what we really want
of our data fetching layer:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dedup http calls; any “smart” component that needs data to be fetched should be able to declare it without fearing it might cause duplicated http calls.&lt;/li&gt;
&lt;li&gt;meta flags: loading, error, last fetched, etc.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;updating or invalidating the &lt;em&gt;state&lt;/em&gt; when necessary, example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;when data is too old&lt;/li&gt;
&lt;li&gt;when you mutate the data in the server and you need to reflect that&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;reactivity (when a prop changes new data will be fetched if necessary).&lt;/li&gt;
&lt;li&gt;medium term response storing, reading &lt;em&gt;and&lt;/em&gt; writing or updating.&lt;/li&gt;
&lt;li&gt;heavy abstraction, simplicity and a really easy to use interface.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These things have been a staple of &lt;a href=&quot;https://graphql.org/&quot;&gt;GraphQL&lt;/a&gt; clients
such as &lt;a href=&quot;https://www.apollographql.com/&quot;&gt;Apollo&lt;/a&gt; for quite some time now.&lt;/p&gt;
&lt;h2 id=&quot;just-a-cache&quot;&gt;&lt;a href=&quot;#just-a-cache&quot; aria-label=&quot;just a cache permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Just a cache&lt;/h2&gt;
&lt;p&gt;When you think about it what you really want is a
&lt;strong&gt;cache layer&lt;/strong&gt; for your http requests that will simply maintain
a key value store for your data, where the &lt;strong&gt;key will identify
the &lt;em&gt;resource&lt;/em&gt; and the value will be the resource plus its metadata:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; cache &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;posts/124&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* the post */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    meta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lastFetched&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; keepAlive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; etc&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;posts/456&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* the post */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    meta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lastFetched&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; keepAlive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; etc&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;users/barry@white.com&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* the user */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    meta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lastFetched&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; keepAlive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; etc&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And this data structure will have the appropriate functionality on top of
it to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fetch the data and store it the right key&lt;/li&gt;
&lt;li&gt;update other cache keys after a successful data fetch (i.e. after fetching multiple posts we update the individual post cache)&lt;/li&gt;
&lt;li&gt;update cache after a mutation (i.e. saving a post form)&lt;/li&gt;
&lt;li&gt;cache time: how long I want to keep this data?&lt;/li&gt;
&lt;li&gt;stale time: how long I will consider this data &lt;em&gt;fresh&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;automatically managing meta flags.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;forget-about&quot;&gt;&lt;a href=&quot;#forget-about&quot; aria-label=&quot;forget about permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Forget about&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;state shape (it is just a key value store of responses)&lt;/li&gt;
&lt;li&gt;no normalization (it is just a cache)&lt;/li&gt;
&lt;li&gt;data fetching meta state like loading, error, etc&lt;/li&gt;
&lt;li&gt;actions&lt;/li&gt;
&lt;li&gt;reducers&lt;/li&gt;
&lt;li&gt;thunks&lt;/li&gt;
&lt;li&gt;imperative data fetching &lt;code class=&quot;language-text&quot;&gt;onComponentDidMount&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;do-this-instead&quot;&gt;&lt;a href=&quot;#do-this-instead&quot; aria-label=&quot;do this instead permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Do this instead!&lt;/h2&gt;
&lt;p&gt;Enter &lt;a href=&quot;https://react-query.tanstack.com/&quot;&gt;react-query&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There is one alternative built on top of Redux called &lt;a href=&quot;https://amplitude.github.io/redux-query/&quot;&gt;redux-query&lt;/a&gt;.
I’ve used it extensively and although it is an improvement over pure Redux,
some of the core problems that we covered remained.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;removing redux after switching to react-query like &lt;a href=&quot;https://t.co/JyDl8UMCHl&quot;&gt;pic.twitter.com/JyDl8UMCHl&lt;/a&gt;&lt;/p&gt;&amp;mdash; @brumm (@funkensturm) &lt;a href=&quot;https://twitter.com/funkensturm/status/1321760646803968002?ref_src=twsrc%5Etfw&quot;&gt;October 29, 2020&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;react-query&lt;/code&gt; is a really nice new library that builds on the things
we have previously discussed, solves all the problems, is
relatively simple and easy to understand
and will reduce the amount of code you need to write
for data fetching by an absurd amount, all the previous code gets replaced by this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useGetPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryResult&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;IPost&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;userQuery&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;IPost&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    queryKey&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;posts/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;postId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    queryFn&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getPost&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And its usage&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; postId &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; post&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useGetPost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    postId
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This covers what we did in Redux and more, as you can see it requires
a considerable less amount of code.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;this is production ready!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;redux-query&lt;/code&gt; deals with a cache of responses instead of the Redux state,
but can do most of the same things if necessary i.e. updating the state, it just
have a different semantic and a much less verbose interface.&lt;/p&gt;
&lt;p&gt;There are some new problems with react-query that mostly rise from its
reactive interface like dependent queries et al but if you know how to deal
with react you will know how to deal with that, and in my production experience
they tend to be the exception and not the rule.&lt;/p&gt;
&lt;h2 id=&quot;tldr-try-react-query&quot;&gt;&lt;a href=&quot;#tldr-try-react-query&quot; aria-label=&quot;tldr try react query permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR: try react-query&lt;/h2&gt;
&lt;p&gt;The programming world is an ever evolving technical landscape where
the community grows and learns new tips and tricks from experience,
Redux has a historical significance and it is still suitable for certain
scenarios but modern tools have provided better ways of doing some of the
things we typically used to do with Redux, data fetching is one of them.&lt;/p&gt;
&lt;p&gt;This new data fetching paradigm is mostly possible because of this
crazy idea the react team had: react-hooks. I agree they are
&lt;em&gt;weird&lt;/em&gt; but the new things we can build with them and the composition
models they enable is really great, and I expect more awesome
and unexpected tools like react-query to come in the near future
as we develop our understanding of hooks.&lt;/p&gt;
&lt;p&gt;Enjoyed the ride? Consider subscribing to our awesome newsletter
and become part of the family and consider donating and supporting my work.&lt;/p&gt;
&lt;p&gt;Cheers!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Jest makes unit testing fun again]]></title><description><![CDATA[Why I love Jest and why should consider it for your next project. Jest is a full-blown, batteries included, ready to rock, testing framework…]]></description><link>https://nosleepjavascript.com/why-i-love-jest/</link><guid isPermaLink="false">https://nosleepjavascript.com/why-i-love-jest/</guid><pubDate>Wed, 04 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAeVfO1SSRP8A/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQACAxExIf/aAAgBAQABBQJuyA3SGHriv//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAwEBPwFwn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAARARAhMf/aAAgBAQAGPwLjNhUzZr//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhEDFB/9oACAEBAAE/IWZ7MCUpdqWOAFBHy1i2f//aAAwDAQACAAMAAAAQJw//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QHuP/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QVH//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/EABBdD2B7kIUXvciqripfDVRAHmgxMW5k//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;jest&quot;
        title=&quot;jest&quot;
        src=&quot;/static/01d3ca0bdad871ffff120730c040bf17/1c72d/img.jpg&quot;
        srcset=&quot;/static/01d3ca0bdad871ffff120730c040bf17/a80bd/img.jpg 148w,
/static/01d3ca0bdad871ffff120730c040bf17/1c91a/img.jpg 295w,
/static/01d3ca0bdad871ffff120730c040bf17/1c72d/img.jpg 590w,
/static/01d3ca0bdad871ffff120730c040bf17/a8a14/img.jpg 885w,
/static/01d3ca0bdad871ffff120730c040bf17/fbd2c/img.jpg 1180w,
/static/01d3ca0bdad871ffff120730c040bf17/92903/img.jpg 3435w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div style=&quot;text-align: center; margin-bottom: 40px;&quot;&gt;
&lt;span&gt;Photo by &lt;a href=&quot;https://unsplash.com/@fernanddecanne&quot;&gt;Fernand De Canne&lt;/a&gt; on &lt;a href=&quot;https://unsplash.com/s/photos/clown&quot;&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;h2 id=&quot;why-i-love-jest-and-why-should-consider-it-for-your-next-project&quot;&gt;&lt;a href=&quot;#why-i-love-jest-and-why-should-consider-it-for-your-next-project&quot; aria-label=&quot;why i love jest and why should consider it for your next project permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why I love Jest and why should consider it for your next project.&lt;/h2&gt;
&lt;p&gt;Jest is a full-blown, batteries included, ready to rock, testing framework that
has similarities with mocha and other testing frameworks but with a much
more integrated experience, making it very easy to have a production
ready unit test setup out of the box with very little effort.&lt;/p&gt;
&lt;p&gt;Let’s cover some of the things I love about Jest,
if you are interested in my unit testing mindset and philosophy
and an illustrative story check it at the &lt;a href=&quot;#bonus-my-unit-test-mind-set&quot;&gt;end of this article&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;1-less-verbose-than-similar-frameworks&quot;&gt;&lt;a href=&quot;#1-less-verbose-than-similar-frameworks&quot; aria-label=&quot;1 less verbose than similar frameworks permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Less verbose than similar frameworks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Simple tests can be terse&lt;/li&gt;
&lt;li&gt;Assertion library is always available&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my function&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;myFunction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toBe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;You can omit a top level describe when using the BDD interface&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;beforeEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;should do something&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tests should be expressive but abstract, the less code
the better, Jest helps with this.&lt;/p&gt;
&lt;p&gt;In a lot of cases, if you structure your code a certain way,
using one or two &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; per unit will be more than enough.&lt;/p&gt;
&lt;h2 id=&quot;3-jest-replaces-sinon-for-the-most-part&quot;&gt;&lt;a href=&quot;#3-jest-replaces-sinon-for-the-most-part&quot; aria-label=&quot;3 jest replaces sinon for the most part permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3. Jest replaces sinon for the most part&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;need to mock / spy / stub pieces of code? use the global &lt;code class=&quot;language-text&quot;&gt;jest.fn()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;jest mocks&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; mockSpyStub &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;mockSpyStub&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;jest is love&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mockSpyStub&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toHaveBeenCalledWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;jest is love&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check the &lt;a href=&quot;https://jestjs.io/docs/en/mock-functions&quot;&gt;docs&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;3-jest-comes-with-an-assertion-library&quot;&gt;&lt;a href=&quot;#3-jest-comes-with-an-assertion-library&quot; aria-label=&quot;3 jest comes with an assertion library permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3: Jest comes with an assertion library&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Comes already installed, integrated and globally available in all tests&lt;/li&gt;
&lt;li&gt;Covers a wide range of assertions / matchers.&lt;/li&gt;
&lt;li&gt;Good typescript support&lt;/li&gt;
&lt;li&gt;Perfect integration with Jest mocks / stubs / spys &lt;code class=&quot;language-text&quot;&gt;jest.fn()&lt;/code&gt;j&lt;/li&gt;
&lt;li&gt;Nice diff reporting tool&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Check all the &lt;a href=&quot;https://jestjs.io/docs/en/expect&quot;&gt;included assertions here&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;4-jest-comes-with-code-coverage-integration&quot;&gt;&lt;a href=&quot;#4-jest-comes-with-code-coverage-integration&quot; aria-label=&quot;4 jest comes with code coverage integration permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4. Jest comes with code coverage integration&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Uses &lt;a href=&quot;https://istanbul.js.org/&quot;&gt;instanbul&lt;/a&gt; under the hood&lt;/li&gt;
&lt;li&gt;Flip a simple switch to enable it with little extra config&lt;/li&gt;
&lt;li&gt;Good &lt;a href=&quot;https://jestjs.io/docs/en/cli.html#--coverageboolean&quot;&gt;official documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Ready to rock&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Note&lt;/em&gt; Actually I just checked mocha’s official documentation and it
redirects to Wallaby.js which is great but it is a paid tool, instead
of linking to &lt;code class=&quot;language-text&quot;&gt;nyc&lt;/code&gt; (instanbul) and how to integrate with that.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;5-jest-has-out-of-the-box-module-mocking&quot;&gt;&lt;a href=&quot;#5-jest-has-out-of-the-box-module-mocking&quot; aria-label=&quot;5 jest has out of the box module mocking permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;5. Jest has out of the box module mocking&lt;/h2&gt;
&lt;p&gt;Jest has an awesome module mocking story:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Out of the box support with little config&lt;/li&gt;
&lt;li&gt;Works with CommonJS and native ES6 modules&lt;/li&gt;
&lt;li&gt;Works well with local modules and &lt;code class=&quot;language-text&quot;&gt;node_modules&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Simple and terse interface&lt;/li&gt;
&lt;li&gt;Enables well known practices of unit testing and mocking thoroughly.&lt;/li&gt;
&lt;li&gt;Enables effective, efficient and terse unit tests of complex pieces of code.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Little implementation detail: Jest achieves
this partially by running tests inside an isolated &lt;a href=&quot;https://nodejs.org/api/vm.html&quot;&gt;Nodejs vm&lt;/a&gt;
which gives jest complete control of the test environment.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Let’s cover some really useful patterns I have been using a lot lately:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;es6 modules: default export mock&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; myLib &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;my-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// now myLib is a mock&lt;/span&gt;
jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// configure a mock return value, you&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;myLib &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mock&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mockImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;test value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;es6 modules: member mock&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; member &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;my-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// now myLib is a mock&lt;/span&gt;
jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// configure a mock return value, you&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mock&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mockImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;test value&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are &lt;a href=&quot;https://github.com/jhnns/rewire&quot;&gt;libs&lt;/a&gt;
out there that provide similar strategies but
they often fall short, or do not support ES6 modules,
or are simply too complicated because they
do not have the level of control over how the code is being run
like Jest does.&lt;/p&gt;
&lt;p&gt;Check the official &lt;a href=&quot;https://jestjs.io/docs/en/es6-class-mocks&quot;&gt;docs&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;6-jest-has-first-class-support-for-babel-and-typescript&quot;&gt;&lt;a href=&quot;#6-jest-has-first-class-support-for-babel-and-typescript&quot; aria-label=&quot;6 jest has first class support for babel and typescript permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;6. Jest has first class support for Babel and Typescript&lt;/h2&gt;
&lt;p&gt;Easy to integrate with &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;Typescript&lt;/a&gt;
either by using &lt;a href=&quot;https://babeljs.io/&quot;&gt;Babel&lt;/a&gt;
or by using &lt;a href=&quot;https://github.com/kulshekhar/ts-jest&quot;&gt;ts-jest&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If your codebase already uses typescript through Babel
then jest will automatically use that config and you won’t
need to do anything else.&lt;/p&gt;
&lt;h2 id=&quot;7-jest-test-runner-interface-is-awesome&quot;&gt;&lt;a href=&quot;#7-jest-test-runner-interface-is-awesome&quot; aria-label=&quot;7 jest test runner interface is awesome permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;7. Jest test runner interface is awesome&lt;/h2&gt;
&lt;p&gt;Watch mode, interactive mode, filtering, Jest has you covered.&lt;/p&gt;
&lt;p&gt;Read more &lt;a href=&quot;https://jestjs.io/docs/en/cli&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is a really nice trick I use a lot to focus
only on particular tests at a time: reg exp filtering&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# runs all the tests&lt;/span&gt;
jest

&lt;span class=&quot;token comment&quot;&gt;# runs only the tests that fit this patterns&lt;/span&gt;
jest pattern
jest myFunction
jest myFunc*&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Something similar can be done in the interactive watch mode.&lt;/p&gt;
&lt;h2 id=&quot;bonus-my-unit-test-mind-set&quot;&gt;&lt;a href=&quot;#bonus-my-unit-test-mind-set&quot; aria-label=&quot;bonus my unit test mind set permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bonus: My unit test mind set&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;test in the most simple and minimalistic way&lt;/li&gt;
&lt;li&gt;do real unit tests, mocking everything else&lt;/li&gt;
&lt;li&gt;test only the high impact code&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In most of the cases I don’t see the value of being obsessed
with 100% coverage, because sometimes testing two
error handling lines inside a unhappy path branch might require
a whole lot of code.&lt;/p&gt;
&lt;p&gt;There are cases where a 100% coverage might be adequate
or needed but in most high level business apps there’s really
no need and the cost of keeping the coverage to 100% is really high.
In most cases I try to implement a Pareto approach, do the
minimum thing with the highest impact which typically translates
into 80% code coverage and ignoring glue code files.&lt;/p&gt;
&lt;p&gt;Unit tests files is still code that you need to maintain so it should
be treated as close to regular code as possible and it should be as simple
and as readable and maintainable as possible.&lt;/p&gt;
&lt;h3 id=&quot;story-time-how-not-to-unit-test&quot;&gt;&lt;a href=&quot;#story-time-how-not-to-unit-test&quot; aria-label=&quot;story time how not to unit test permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Story time: how not to unit test&lt;/h3&gt;
&lt;p&gt;Some random day I was cursing at my screen and my partner
asked me why I was so mad and since she’s not a technical person
I came up with this analogy on the fly to explain what was the problem
and also how I would solve it.
I believe this illustrates really well my unit test mindset:&lt;/p&gt;
&lt;p&gt;Let’s say we are building a wall lamp that would typically be used inside your house.
The guys who tested this lamp (unit testing) did the unthinkable: they
build a testing house, with foundations, wall framing, ceiling, windows, doors, hardwood floors,
water pipes, heating system, insulation and a working power grid; they then proceeded
to install the lamp that they were testing, and finally flipped the right wall switch to see if
it worked.&lt;/p&gt;
&lt;p&gt;How I would have done it differently? I would just reveal the contacts and give them
power by the simplest possible means (without risking my life), like for example:
wiring them to a circuit with power!&lt;/p&gt;
&lt;p&gt;My partner hugged me and left feeling sorry for me.&lt;/p&gt;
&lt;p&gt;The point of this story is to emphasize that we need to have a clear
mind set when unit testing our code, we need to ensure that we are testing an isolated unit,
that we are testing it in the simplest way that can provide the verifications we
look for, nothing more.&lt;/p&gt;
&lt;p&gt;Which brings up my coding mindset: &lt;strong&gt;clarity then simplicity then consistency&lt;/strong&gt;
which I will most likely be talking about in a follow up post.&lt;/p&gt;
&lt;p&gt;So remember: &lt;strong&gt;do not build a house around the lamp you want to test, simply connect it
to a cable with power and be done with it.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;As you can see, there’s a lot to love about Jest.&lt;/p&gt;
&lt;p&gt;Jest can be considered a composition of a bunch of libraries into a
nice tight package that works out of the box:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mochajs.org/&quot;&gt;jest&lt;/a&gt; =
&lt;a href=&quot;https://mochajs.org/&quot;&gt;mocha&lt;/a&gt; +
&lt;a href=&quot;https://www.chaijs.com/&quot;&gt;chai&lt;/a&gt; +
&lt;a href=&quot;https://github.com/power-assert-js/power-assert&quot;&gt;power-assert&lt;/a&gt; +
&lt;a href=&quot;https://sinonjs.org/&quot;&gt;sinon&lt;/a&gt; +
&lt;a href=&quot;https://github.com/jhnns/rewire&quot;&gt;rewire&lt;/a&gt; +
&lt;a href=&quot;https://istanbul.js.org/&quot;&gt;instanbul&lt;/a&gt; +
more&lt;/p&gt;
&lt;p&gt;I encourage you to consider it for your next project, it works well for
Nodejs and Browser projects, it works well with plain old Javascript or ES6+ or Typescript,
and it has really nice integrations with &lt;a href=&quot;https://reactjs.org/&quot;&gt;React.js&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Liked the content? Consider supporting us below.&lt;/p&gt;
&lt;p&gt;Want to know more? Consider joining our mailing list below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Authenticating your Node.js app with Google as an OpenId Connect Provider]]></title><description><![CDATA[Table of Contents Introduction So what is OpenId Connect? That’s fine, but why should I care? Show me the code! A note on tooling Step…]]></description><link>https://nosleepjavascript.com/openid-oauth-authentication-for-nodejs/</link><guid isPermaLink="false">https://nosleepjavascript.com/openid-oauth-authentication-for-nodejs/</guid><pubDate>Fri, 23 Oct 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;table-of-contents&quot;&gt;&lt;a href=&quot;#table-of-contents&quot; aria-label=&quot;table of contents permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table of Contents&lt;/h2&gt;
&lt;div class=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#so-what-is-openid-connect&quot;&gt;So what is OpenId Connect?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#thats-fine-but-why-should-i-care&quot;&gt;That’s fine, but why should I care?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#show-me-the-code&quot;&gt;Show me the code!&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#a-note-on-tooling&quot;&gt;A note on tooling&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-1-what-are-we-building&quot;&gt;Step 1: What are we building?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-2-initializing&quot;&gt;Step 2: Initializing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-3-log-in&quot;&gt;Step 3: Log In&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-4-persistent-session&quot;&gt;Step 4: Persistent Session&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-5-log-out&quot;&gt;Step 5: Log Out&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-6-putting-it-all-together&quot;&gt;Step 6: Putting it all together&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#step-7-single-sign-on&quot;&gt;Step 7: Single Sign On&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#bonus-the-complete-sequence-diagram-of-oidc-authentication&quot;&gt;Bonus: the complete sequence diagram of oidc authentication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#bonus-what-are-the-access-refresh-and-id-tokens&quot;&gt;Bonus: what are the access, refresh and id tokens?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#exercise-1&quot;&gt;Exercise 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;Closing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Let’s build the basic boilerplate for an OpenId Connect based Authentication mechanism
for our Node.js / Typescript app that supports SSO (Single Sign On experience) out of the box
and that will fit very well with a microservice architecture with no statefulness added.&lt;/p&gt;
&lt;p&gt;This sort of setup is great for microservice architectures because&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it provides clear authentication (and authorization) interfaces based on industries best practices&lt;/li&gt;
&lt;li&gt;it works well with self contained auth tokens that can be used for communications across microservices&lt;/li&gt;
&lt;li&gt;it requires no extra stateful layers (such as session databases)&lt;/li&gt;
&lt;li&gt;it can be easily expanded to make up a Single Sign on experience across multiple apps and even across companies.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;so-what-is-openid-connect&quot;&gt;&lt;a href=&quot;#so-what-is-openid-connect&quot; aria-label=&quot;so what is openid connect permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;So what is OpenId Connect?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;OpenId Connect (a.k.a oidc) is an &lt;em&gt;interoperable authentication protocol&lt;/em&gt; based on the OAuth 2.0 family of specifications.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://openid.net/connect/faq/&quot;&gt;src&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The line between OpenId and OAuth is blurry in practice and in learning material in the web the concepts
are sometimes a mix and match of both.&lt;/p&gt;
&lt;p&gt;I like to think of OpenId and OAuth as a set of specifications that
define standard APIs for Authentication and Authorization, respectively.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;OpenID Connect lets developers authenticate their users across websites and
apps without having to own and manage password files. For the app builder,
it provides a secure verifiable, answer to the question:
“What is the identity of the person currently using the browser or native app that is connected to me?”&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://openid.net/connect/faq/&quot;&gt;src&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This has enabled 3rd party Authentication providers and the always present “Log In with X”
you see around the web, such Auth providers include Google (the one we use in the example code),
Auth0, Microsoft, Okta, among many others. &lt;a href=&quot;https://openid.net/certification/&quot;&gt;See certified providers here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Additionally, OpenId Connect can be used in enterprise settings like shared Auth and Identity provider
across many apps (think about Microsoft active directory, or Okta’s service)
providing a Single Sign On experience; and also as a way of structuring a microservice
architecture with multiple “clients” (OAuth lingo for applications that interact with the Auth Server).&lt;/p&gt;
&lt;p&gt;If you want to go down the rabbit hole and learn more check these resources out&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=996OiexHze0&quot;&gt;Nate Barbettini’s OAuth and OpenId in plain English&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.okta.com/blog/2019/10/21/illustrated-guide-to-oauth-and-oidc&quot;&gt;Okta’s Ilustrated Guide to Oauth and OpenId Connect&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6749&quot;&gt;IEEE OAuth 2.0 RFC&lt;/a&gt; (it is dense but has all the details)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here is a nice illustration of one of the most common ways of Authenticating with
OAuth 2.0 and OpenId Connect: the authorization code flow&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/46184ddba11a21c92840104b5eab19a9/flow1.svg&quot; alt=&quot;OAuth OpenId high level flow diagram&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Source: heavily inspired by this &lt;a href=&quot;https://www.youtube.com/watch?v=996OiexHze0&quot;&gt;Nate Barbettini’s presentation&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;thats-fine-but-why-should-i-care&quot;&gt;&lt;a href=&quot;#thats-fine-but-why-should-i-care&quot; aria-label=&quot;thats fine but why should i care permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;That’s fine, but why should I care?&lt;/h2&gt;
&lt;p&gt;OAuth 2.0 and oidc have become ever present in the modern application development landscape and
although the tooling is really good and hides a lot of details chances are that you will still require
a decent high level understanding of what you are doing.&lt;/p&gt;
&lt;p&gt;This applies both to already existing applications and to the practice of designing and creating new
applications with modern architectures such as microservice oriented one.&lt;/p&gt;
&lt;p&gt;I will try to find the sweet spot between comprehensive and high level coverage, let’s hope
I can achieve it.&lt;/p&gt;
&lt;h2 id=&quot;show-me-the-code&quot;&gt;&lt;a href=&quot;#show-me-the-code&quot; aria-label=&quot;show me the code permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Show me the code!&lt;/h2&gt;
&lt;p&gt;Let’s build a simple application that uses OAuth 2.0 and oidc. The idea is to show&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;how to use 3rd party Auth and Identity providers&lt;/li&gt;
&lt;li&gt;how to integrate those mechanisms with something familiar to the web platform: session cookies!&lt;/li&gt;
&lt;li&gt;how to easily manage sessions in the Request-Response web app cycle (no libs here!)&lt;/li&gt;
&lt;li&gt;how the session can be structured to be self contained for a stateless session management&lt;/li&gt;
&lt;li&gt;security implications&lt;/li&gt;
&lt;li&gt;how this application can be used to achieve SSO (single sign on experience across multiple apps)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can check the full code &lt;a href=&quot;https://github.com/franleplant/sso-with-openid&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;a-note-on-tooling&quot;&gt;&lt;a href=&quot;#a-note-on-tooling&quot; aria-label=&quot;a note on tooling permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;A note on tooling&lt;/h3&gt;
&lt;p&gt;I have found a nice certified NodeJs library called &lt;a href=&quot;https://github.com/panva/node-openid-client&quot;&gt;openid-client&lt;/a&gt;, it is a nice library with
decent Typescript support that makes it very easy to integrate Identity providers.&lt;/p&gt;
&lt;p&gt;Another really cool thing about OpenId Connect is the concept of &lt;a href=&quot;https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata&quot;&gt;Discovery&lt;/a&gt; which
basically means that although there are a bunch of parameters involved in setting up a proper
oidc flow like multiple urls, encryption algorithms, public keys to verify tokens, etc;
you really just need to use one url and, if the client library you are using supports it, the client will
use this Discovery mechanism to look for a &lt;a href=&quot;https://developers.google.com/identity/protocols/oauth2/openid-connect#discovery&quot;&gt;Discovery Document&lt;/a&gt; that contains all the necessary parameters
and you are good to go!. &lt;code class=&quot;language-text&quot;&gt;openid-client&lt;/code&gt; supports this!.&lt;/p&gt;
&lt;h3 id=&quot;step-1-what-are-we-building&quot;&gt;&lt;a href=&quot;#step-1-what-are-we-building&quot; aria-label=&quot;step 1 what are we building permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 1: What are we building?&lt;/h3&gt;
&lt;p&gt;We are going to use a top-down approach, so first we are going to cover how the app
works at the business logic level and in later steps we are going to cover
the “lib” side of things where we implement the proper express middleware, session management,
cookie storage, etc.&lt;/p&gt;
&lt;p&gt;The app is really simple, it has two content routes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt; or the home where we show the “login” button and it is public.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/private&lt;/code&gt; were we display some information about the currently logged in user. If there is no user logged in we simply display an error.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here are some pictures:&lt;/p&gt;
&lt;style&gt;
.screen-img img {
  border: 3px solid #CCC;
}
&lt;/style&gt;
&lt;div class=&quot;screen-img&quot;&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a206f12438f888385b39a4f2b0273f22/91f10/screen1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABKklEQVQoz62MuU4CARRF5ztcABmUfQmDbMIoRhAU2RyEgFBoYaHW8onW2pkYE2NjgTiLGg3hOIwxwVa9Lyc59xVXaET9VHJufLKLYEgiK2+yXSyTL+xQKu0RT6wRlRJIsSSJZIZ4PI3HG0Bc9mB3iNjsTubmbSwsOnAsuRAiwQjBQBCPP4C0miJmkkrLZLIb5njOGgtHJLy+EP5ABJ8/jFNcQXS5cZmjobCEvJ4jmUib3YvQ7vZotjrsK2063T61uoLSbJneo3vYN/8HVKp1tvJF8lMKX+yWK1RrDY6OTxhcDDg/PTO7gnBzdc/15S0Pd48YLzq6pqNZaKiqZrmu6xiG8YPpb4qqqgyHT4xGz1YXPt7GvL+OmYz5lwjfMpne5O8Is8UanvHf5BPTW6Gf7tnuTQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Initial public screen with login link&quot;
        title=&quot;Initial public screen with login link&quot;
        src=&quot;/static/a206f12438f888385b39a4f2b0273f22/fcda8/screen1.png&quot;
        srcset=&quot;/static/a206f12438f888385b39a4f2b0273f22/12f09/screen1.png 148w,
/static/a206f12438f888385b39a4f2b0273f22/e4a3f/screen1.png 295w,
/static/a206f12438f888385b39a4f2b0273f22/fcda8/screen1.png 590w,
/static/a206f12438f888385b39a4f2b0273f22/efc66/screen1.png 885w,
/static/a206f12438f888385b39a4f2b0273f22/91f10/screen1.png 992w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9613b16e4e1c9d8bcd95bda6862bff04/0f7d5/screen2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 108.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADmUlEQVQ4y51UW28TVxBe9b3/AMolJCGQVAaC4hAnhCTGCXG5PICEeERQwZ/hAbX9A5UQCPGCECAkaLkIqVKgSZ044ZbYayf4st712rve9e6ej5njGFaGgsSRvp1zZs6ZM/vNmVESfXuQmOpG18EdmE0cw8lTpzF2eBKjYxM4mpjFxGQCk1MJxEbHcWAwisGDw+jdvRe7undj2/Yu/LRtJ7Zs3S7Ba2X/QASRyAD6BvoxQQfHJ+KIDscwFB3B+JEpHBoZwxg5H4rGsP/AECL7BtHd04edXT3o2tWL/p/30UVD0tbTuxfKseRJxI/OYmbmOJK/nMJI7DCm4glMT88iHp8mfRLJ5AnaM0PRxqV9+NAoRRqVl50+cxYXf72MCxcvyb9R3q6ksZReJpBcSkuZSi3i9Zs3yOXyhJyEqrbQXrdtWVVFJpOR4LXiCx+O20Sj0UDDceAQavU6mp6H7xmKEOJrdhGSQRh0LqDBH4Rky2EYPDyKTtd1WJaFer0ubNsGw7JaknRwXbd1U0dEX3TIv888Lq+siIWF/5hbd3FxqfDv/HwxlUoV5+bmChqNtj/RGvK80qFk4jzTNL1CoeBREpz19XUYhvFEoUG2HzfxA2GQ9tthh2EOxWb4UtlsNuVvMWq1OifqBakjxNEo7YmRZGfnCI0w1x8jDHwfTdcxaH6NlNdJMm4Q/iS8bG/m+zrpIU5F1TRhE02sYod+LrOK548fvvjr0WNeK7YHxaGEefLC4MJmAJwF/xMES5kwokg4TitYxfUhDNNCUauW7Sau1hz8XnfwG+EPml+xXPHMdgMQAoLohEOssw+XpNOkCPL0o69UU6QzOhjzr97j5XIeqbdFLLx+j/RaBXkdQq0EyH0BqvYJvFZ0C6JouNjQGmJDs71csSaRL9WlJH2g1QKUa77QQgitUTZZBtAtyZH4VjX9b7V02KRQ5EOm+jWMKipUHaZZg6ZV5Jyh6wbbhFGtolo1W/sqOkplrT0XxVJJZlkmhT9V2vzu3Soy2SzWNzawRp1jdY06SFYVWTXnr2WySC0unb93/8HWJ0+f9T989PeeGzdvddMbXeG3SueDdilKhz69Q67fsNycC5IM3vYP4TbhHuEu4Q7B/Oxhf6PbfOQx/JjDZ8LNoV0psoNQvfIDlZIpYB23o9AZblk+dSCf9D6VI8+ljZqJaIQ55HotFIqS7HK5jBKRzLrOiFjypUyBIxNpSF27pfH4AHzPCK/CFbQLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Authenticating with the oidc provider&quot;
        title=&quot;Authenticating with the oidc provider&quot;
        src=&quot;/static/9613b16e4e1c9d8bcd95bda6862bff04/fcda8/screen2.png&quot;
        srcset=&quot;/static/9613b16e4e1c9d8bcd95bda6862bff04/12f09/screen2.png 148w,
/static/9613b16e4e1c9d8bcd95bda6862bff04/e4a3f/screen2.png 295w,
/static/9613b16e4e1c9d8bcd95bda6862bff04/fcda8/screen2.png 590w,
/static/9613b16e4e1c9d8bcd95bda6862bff04/efc66/screen2.png 885w,
/static/9613b16e4e1c9d8bcd95bda6862bff04/0f7d5/screen2.png 993w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/38ecb057c330665f2189718f37b62f20/0f7d5/screen3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACFklEQVQoz52SUW/SUBTH+z00wgZsbJbSbcBGGYUBgwi4kUicMdmbD+rLfPFTTBOM0fgJFt7wS5gMBpEtxsQnlwwpBSMJECi03L+3pSwZziV6kl/PPeee/P+37WWii07Ew3Y41m1wcx4ExQjiiSSisQTuJe8jkUhhK7INfsUL33oAHq8fziUWdocTFqsNdyzzuHXbQrHCSmuGZ3lwHIsllwteX4AiwC+ICGyGIIYiEAIiFRLg4lbh5j1YvsvBOmfH3LwDNvsiWG4FghDExoYAx8IymJ1MFslUhqTTGTzI7hF6GjUWS6ip9A5lVxVDW2pQDBtZCARVnl/TVtd8xO/fRDgcJY8e7+Pg4AWeP32G7XgSTLVaRbFYxOnZGTk+LuLkpIxKpYJSqYRyuYJ6vY5WqwVZbqLZpJhrWZZJQ5YhSRIuajXUaj+g10y73dY3xz/pYKfTOVdV9XW/388pipIbDoc5AFPeUA4pRxSCSUzzZTC6uyQ1tEbTEPxEewsUlwlLRdnBYMBSAzc1slHDh+NJgELMfAmjq37/9hVH714ROjyxJeQK095M/NEwTqg/OvIFKRy+RLfX04c06qRRAU1fz2bKmJjq5BoXQ/DD+7dkN51EofCRmM7EnL9Sz3D9N/xy+hlP9vfolckin89j2BtDOv+FkaL+7VVvDKbT7Rq/vik3oAwVDHojtOUe1JH2f4I3bf6rmB6/Afy4DGIZyTJHAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Back to our private route in our app&quot;
        title=&quot;Back to our private route in our app&quot;
        src=&quot;/static/38ecb057c330665f2189718f37b62f20/fcda8/screen3.png&quot;
        srcset=&quot;/static/38ecb057c330665f2189718f37b62f20/12f09/screen3.png 148w,
/static/38ecb057c330665f2189718f37b62f20/e4a3f/screen3.png 295w,
/static/38ecb057c330665f2189718f37b62f20/fcda8/screen3.png 590w,
/static/38ecb057c330665f2189718f37b62f20/efc66/screen3.png 885w,
/static/38ecb057c330665f2189718f37b62f20/0f7d5/screen3.png 993w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;There are at least two additional routes that have to do with the OAuth flow
that we will cover later.&lt;/p&gt;
&lt;p&gt;This is the &lt;code class=&quot;language-text&quot;&gt;index.ts&lt;/code&gt; that makes up the high level app implementation, think of this
as a mix of the boilerplate plus the two domain / business specific routes.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Necessary for express to parse the cookies into a nice&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// higher level object&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cookieParser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// initialises the Issuer and the Client&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;initialize&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Deals with the user session&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Adds the OAuth / OpenId necessary routes.&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// use the pre configured view engine&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// to render the index.mustache file&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/private&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;requireAuth&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// This is the main high level hook for the user&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// session, we will be building this later&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; claims &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tokenSet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;claims&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// render private.mustache and interpolate&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// the following data&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    email&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; claims&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    picture&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; claims&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;picture&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; claims&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PORT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Express started on port &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PORT&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next we will cover more details (descending into the details).&lt;/p&gt;
&lt;h3 id=&quot;step-2-initializing&quot;&gt;&lt;a href=&quot;#step-2-initializing&quot; aria-label=&quot;step 2 initializing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 2: Initializing&lt;/h3&gt;
&lt;p&gt;First we need to initialize the &lt;a href=&quot;https://github.com/panva/node-openid-client&quot;&gt;openid-client&lt;/a&gt;
Issuer (the one that discovers all the publicly available OpenId configuration) and later the Client
(the one that we will use to make all the underlying HTTP calls).
We will abstract this step into a middleware and save the instances into the &lt;code class=&quot;language-text&quot;&gt;req.app&lt;/code&gt; object
since these things need to be instantiated once per app.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  req&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  res&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  next&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; NextFunction
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authIssuer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; googleIssuer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Issuer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;discover&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;https://accounts.google.com&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;googleIssuer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    client_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;OAUTH_CLIENT_ID&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    client_secret&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;OAUTH_CLIENT_SECRET&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    redirect_uris&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDomain&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/auth/callback&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    response_types&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authIssuer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; googleIssuer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note: &lt;code class=&quot;language-text&quot;&gt;getDomain&lt;/code&gt; is a thin helper that returns exactly this &lt;code class=&quot;language-text&quot;&gt;http://${process.env.HOST}:${process.env.PORT}&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;step-3-log-in&quot;&gt;&lt;a href=&quot;#step-3-log-in&quot; aria-label=&quot;step 3 log in permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 3: Log In&lt;/h3&gt;
&lt;p&gt;We have a nice comprehensive sequence diagram of the all the HTTP redirects and
interactions that make up the complete OAuth / OpenId Connect authorization code flow
below in a &lt;a href=&quot;#bonus-the-complete-sequence-diagram-of-oidc-authentication&quot;&gt;bonus section&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In this step we are going to build the two endpoints necessary for this type of auth flow:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Auth entry point: Create a route that redirects to the right oidc provider authentication page and that kicks starts the whole auth flow, in our case we simply called it: &lt;code class=&quot;language-text&quot;&gt;/auth/login&lt;/code&gt; but you can use whatever you like.&lt;/li&gt;
&lt;li&gt;Callback: Create a route that the oidc provider will redirect back from the auth page with the auth code that we will later exchange for the proper access, id and refresh tokens. In our case we simply called it &lt;code class=&quot;language-text&quot;&gt;/auth/callback&lt;/code&gt; but again it can be whatever you want it to be.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We also encapsulated these routes into a nice middleware that we called &lt;code class=&quot;language-text&quot;&gt;auth.routes&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Auth entry point.&lt;/span&gt;
router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/auth/login&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Check the full code to see a&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// concrete implementation of this&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calcState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;extraContent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// calculate the url where we want to redirect to&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; authUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;authorizationUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    scope&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;openid email profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;setAuthStateCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;authUrl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Callback&lt;/span&gt;
router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/auth/callback&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// extract all the necessary query params&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// like the authorization code.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;callbackParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// read the state cookie&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAuthStateCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// exchange the authorization code for the access,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// refresh and id token, this is what makes up the&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// main `Back channel` communication, it is considered&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// more secure and will include client_id and client_secret.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; tokenSet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDomain&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/auth/callback&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    params&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// The lib will compare the state that the&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// identity provider passes as params&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// with the one we stored in the cookies.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; state &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// We can fetch the userinfo (basic identity attributes)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;userinfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tokenSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Set the session cookie,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// we could also set req.session but&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// since we are returning immediately is not&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// a must&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sessionCookie &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;serialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; tokenSet&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;setSessionCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sessionCookie&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;check the &lt;a href=&quot;https://github.com/franleplant/sso-with-openid&quot;&gt;complete code&lt;/a&gt; to see how to implement logout and a back-to-original-route mechanism&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can see the &lt;em&gt;Auth entry point&lt;/em&gt; is a very simple sync redirect to the Identity provider’s login,
the library is doing a lot of the work for us but the &lt;code class=&quot;language-text&quot;&gt;authUrl&lt;/code&gt; will contain the &lt;code class=&quot;language-text&quot;&gt;client_id&lt;/code&gt;,
the callback url &lt;code class=&quot;language-text&quot;&gt;http://host:port/auth/callback&lt;/code&gt; in our case, required &lt;code class=&quot;language-text&quot;&gt;scopes&lt;/code&gt;, etc.
This is also what we call the “Front channel” and it is considered not entirely secure, that is why
we are not sending the client secret at this stage, remember that this happens all in the browser via
HTTP redirects.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;Callback&lt;/em&gt; will be redirected from a successful login with the Identity provider and
will exchange the authorization code for the tokens (check inline comments).
This is the step where we more commonly deal with persistent sessions, notice that
the Identity Provider doesn’t deal with this and that’s something we need to deal with ourselves.&lt;/p&gt;
&lt;p&gt;Check the &lt;code class=&quot;language-text&quot;&gt;state&lt;/code&gt; parameter, this acts as a sort of &lt;a href=&quot;https://en.wikipedia.org/wiki/Cross-site_request_forgery&quot;&gt;XSRF a.k.a. CSRF a.k.a. csurf&lt;/a&gt; token that we can use to
prevent XSRF attacks but also to store &lt;em&gt;state&lt;/em&gt; across the OAuth flow. See exercise at the bottom for more info.
Check the &lt;a href=&quot;https://github.com/franleplant/sso-with-openid&quot;&gt;full code&lt;/a&gt; for a concrete but very simple working implementation.&lt;/p&gt;
&lt;p&gt;We are going to use a very simple self contained stateless strategy here, we will cover it in more details
in the next section but at a high level what we are doing is setting a persistent cookie (the session cookie)
that will travel in all requests from the browser to our local server and that we will use to identify
users that already identified themselves.&lt;/p&gt;
&lt;h3 id=&quot;step-4-persistent-session&quot;&gt;&lt;a href=&quot;#step-4-persistent-session&quot; aria-label=&quot;step 4 persistent session permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 4: Persistent Session&lt;/h3&gt;
&lt;p&gt;There are several ways of handling sessions but in most cases
it all boils down to persisting a session across requests and
identifying requests with one or zero sessions, meaning, identifying the
already authenticated and identified users that are making requests to our app or simply
acknowledging that there is no previously authenticated user.&lt;/p&gt;
&lt;p&gt;Sessions are most commonly persisted in the form of a long lived cookie in the browsers and
their content might be a session id that is mapped to the session object in a database
server side which is the stateful solution; or the content might be the entire self contained session object,
which is the stateless solution, this is a simpler approach that will work for us
and that has its merits in the microservice architecture.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Why do we care about stateless vs stateful? Having a self contained cookie means that we can
know certain facts about the authenticated users without having to either interact with a database
or another service. Stateless is desired as much as possible because it is easy to horizontally scale
i.e. adding more instances of the app running in other nodes in our cluster, whereas scaling stateful
services is another whole challenge (think about master slave relationship between databases,
replication, backup, consistency considerations, etc).
The typical solution for a stateful session is to store a simple session id in the browser and then associate
that id in a key value database such as &lt;a href=&quot;https://redis.io/&quot;&gt;redis&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;When do we write the session cookie?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We write it at two main steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;after login in&lt;/li&gt;
&lt;li&gt;after refreshing the auth tokens (not necessary in a stateful session schema)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We also clear it in two main steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;after logout&lt;/li&gt;
&lt;li&gt;after trying to refresh a token and the refresh token has expired.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;And when do we read the session cookie? And what do we do with it?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This where the fun begins. We read the session cookie &lt;em&gt;on every request&lt;/em&gt;,
and if we find one then we are going to parse it into a session object or instance
and store it in the &lt;code class=&quot;language-text&quot;&gt;req&lt;/code&gt; object, this fits super fine because the parsed, hydrated session
object only applies on a particular request, the next request might belong to another user or even
to a non authenticated user.&lt;/p&gt;
&lt;p&gt;Why do we need to parse it? Basically, we will store it as string in the cookie and when
we read the cookie we are going to parse it back to an object, this is a very simple approach, more
commonly you will store the session as a base64 encoded json object to save space and later you will
parse it into an instance of a class so that you can cache some results and provide certain useful methods
to the rest of the app. In our case we simply reuse the &lt;code class=&quot;language-text&quot;&gt;TokenSet&lt;/code&gt; class with useful methods that
the &lt;a href=&quot;https://github.com/panva/node-openid-client&quot;&gt;openid-client&lt;/a&gt; lib provides.&lt;/p&gt;
&lt;p&gt;This is a nice illustration of the flow you will soon see in code:&lt;/p&gt;
&lt;style&gt;
.flow2 img {
 max-width: 500px;
}

.flow2 p {
text-align: center;

}
&lt;/style&gt;
&lt;div class=&quot;flow2&quot;&gt;
&lt;p&gt;&lt;img src=&quot;/5ddf56d912b9307f2c486659a827916a/flow2.svg&quot; alt=&quot;Session Middleware flow diagram&quot;&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Enough talk, let’s code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  req&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  res&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  next&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; NextFunction
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sessionCookie &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSessionCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// If there is no session cookie it means there is no&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// authenticated user associated with this request,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// no further work needed.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;sessionCookie&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Parse the cookie into a TokenSet instance&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deserialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sessionCookie&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Refresh the tokens if necessary&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tokenSet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;expired&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; refreshedTokenSet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;refresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tokenSet
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tokenSet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; refreshedTokenSet&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// set the cookie with the refreshed tokens&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setSessionCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;serialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// this can throw when the refresh&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// token has expired,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// logout completely when that happens&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;clearSessionCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// We also verify that the tokens inside the cookie are valid&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// with public keys mechanisms covered by the JWT spec.&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// This is unfortunately a private method of the lib, but basically&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// it grabs the id_token and decodes it as JWT with a public key&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// that we got as part as the discovery process, if this succeeds it means&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// that the token inside the cookie is a token that has been crated by our&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// identity provided and thus it is secure and fine and we can trust it.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; validate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;validateIdToken &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tokenSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;bad token signature found in auth cookie&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Bad Token in Auth Cookie!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// After all that work the only thing remaining is&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// to store the valid session object into req.session&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// for the rest of the app to use.&lt;/span&gt;
  req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What might the rest of the app do with &lt;code class=&quot;language-text&quot;&gt;req.session&lt;/code&gt;?
Just to give some ideas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;check if there is a user logged in (i.e. only allowing to view certain content to authenticated users)&lt;/li&gt;
&lt;li&gt;display information about the logged in user, such as menu icons etc&lt;/li&gt;
&lt;li&gt;fetch data associated with a user to a database or another service&lt;/li&gt;
&lt;li&gt;check user permissions and create a more complex allow list of routes&lt;/li&gt;
&lt;li&gt;many many more things.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The main point of this middleware (which is inspired by prior work such as
&lt;a href=&quot;https://www.npmjs.com/package/express-session&quot;&gt;express-session&lt;/a&gt; and &lt;a href=&quot;http://www.passportjs.org/&quot;&gt;Passport.js&lt;/a&gt;) is to abstract all the logic of
parsing the session cookie, refreshing if necessary and hydrating the &lt;code class=&quot;language-text&quot;&gt;req.session&lt;/code&gt; object
in a single place, the rest of the app can rely on that being there and that nothing else will
need to be done there.&lt;/p&gt;
&lt;p&gt;We also have a nice example middleware that prevents non authenticated users to access
certain routes:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;requireAuth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  req&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  res&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  next&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; NextFunction
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;unauthenticated&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Of course this will only work if the &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; middleware runs first in the middleware chain
and this runs later, that is why it is important that your session middleware to be run as early as possible,
at least before your routes definitions.&lt;/p&gt;
&lt;h3 id=&quot;step-5-log-out&quot;&gt;&lt;a href=&quot;#step-5-log-out&quot; aria-label=&quot;step 5 log out permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 5: Log Out&lt;/h3&gt;
&lt;p&gt;In here you have two options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Logging out of just your app&lt;/li&gt;
&lt;li&gt;Logging out entirely out of the identity provider&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We are going to use the first approach:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/auth/logout&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authClient&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; tokenSet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;tokenSet&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Make sure the access token we got from the identity provider&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// gets revoked, this is for security reasons&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;revoke&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tokenSet&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;access_token&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Clean up session cookies&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;clearSessionCookie&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;step-6-putting-it-all-together&quot;&gt;&lt;a href=&quot;#step-6-putting-it-all-together&quot; aria-label=&quot;step 6 putting it all together permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 6: Putting it all together&lt;/h3&gt;
&lt;p&gt;With a little bit of express experience we can encapsulate all the previous logic
into nice middlewares and leave the rest of the app to deal with domain / business logic.&lt;/p&gt;
&lt;p&gt;We put all the authentication related code in the &lt;code class=&quot;language-text&quot;&gt;auth&lt;/code&gt; directory, and the high level api is
made up of middlewares. You can use middleware factories for more complex use cases (functions that accept
options and return middlewares, and yes, the router &lt;em&gt;is&lt;/em&gt; a middleware).&lt;/p&gt;
&lt;h3 id=&quot;step-7-single-sign-on&quot;&gt;&lt;a href=&quot;#step-7-single-sign-on&quot; aria-label=&quot;step 7 single sign on permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 7: Single Sign On&lt;/h3&gt;
&lt;p&gt;Single Sign On (SSO) means that if you are already authenticated with one app using the same
OpenId Identity Provider then you will be almost automatically authenticated we other apps.&lt;/p&gt;
&lt;p&gt;We have set a nice example in the repo, check instructions to see it in action &lt;a href=&quot;https://github.com/franleplant/sso-with-openid&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;How does it work?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the Session cookie is completely independent in each app (see the domain note on the repo’s README).&lt;/li&gt;
&lt;li&gt;If you already logged in with app1 then when you try to login with app2 then you won’t need to introduce your credentials and the OAuth flow will happen without you (the user) needing to do anything, that is why I say it is almost automatic.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;bonus-the-complete-sequence-diagram-of-oidc-authentication&quot;&gt;&lt;a href=&quot;#bonus-the-complete-sequence-diagram-of-oidc-authentication&quot; aria-label=&quot;bonus the complete sequence diagram of oidc authentication permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bonus: the complete sequence diagram of oidc authentication&lt;/h2&gt;
&lt;p&gt;Most of the time you will see this sequence diagram simplified, but I wanted
to show you in full details all the steps and http redirects there are inside this
transaction, most of the time you won’t need to worry about these but I think
it is a nice exercise to have it detailed fully like this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/be05b5e82862d20b8aa6cde5ca810ca4/flow3.svg&quot; alt=&quot;OAuth OpenId authorization code flow sequence diagram&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;bonus-what-are-the-access-refresh-and-id-tokens&quot;&gt;&lt;a href=&quot;#bonus-what-are-the-access-refresh-and-id-tokens&quot; aria-label=&quot;bonus what are the access refresh and id tokens permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bonus: what are the access, refresh and id tokens?&lt;/h2&gt;
&lt;p&gt;Each identity provider might use them differently but these are
some of the core ideas behind each of them&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;access token&lt;/em&gt;: an opaque value with a short expiration that the identity server uses to identify a user (think of it as a portable session id)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;refresh token&lt;/em&gt;: another opaque value with a longer expiration that it is used to refresh the access token and the id token. Long lived sessions are typically handled by this two step process to give more control to identity providers.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;id token&lt;/em&gt;: this is what OpendId Connect adds, this is a self contained jwt that contains claims (attributes) about the identity of the currently logged in user. This is what makes sense the most to use inside your own system to check the identity of the user. You can cryptographically verify its validity and it will contain minimal information such as the &lt;code class=&quot;language-text&quot;&gt;sub&lt;/code&gt; id (the subject id or the user id), the email, the names, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;exercise-1&quot;&gt;&lt;a href=&quot;#exercise-1&quot; aria-label=&quot;exercise 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Exercise 1&lt;/h2&gt;
&lt;p&gt;How would you implement a “back to” functionality?&lt;/p&gt;
&lt;p&gt;Let’s say that you originally tried to access &lt;code class=&quot;language-text&quot;&gt;/private/route/1&lt;/code&gt; but you weren’t authenticated yet
so we redirected you to &lt;code class=&quot;language-text&quot;&gt;/auth/login&lt;/code&gt;.
After going through all the auth flow we would like for the app to redirect automatically back
to &lt;code class=&quot;language-text&quot;&gt;/private/route/1&lt;/code&gt;.&lt;/p&gt;
&lt;details&gt;
  &lt;summary&gt;Show me the answer&lt;/summary&gt;
&lt;p&gt;See answer &lt;a href=&quot;https://github.com/franleplant/sso-with-openid/blob/master/src/auth/routes.ts#L31-L43&quot;&gt;here&lt;/a&gt;. A couple of notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you basically store a &lt;code class=&quot;language-text&quot;&gt;backTo&lt;/code&gt; param in the state and in the cookie&lt;/li&gt;
&lt;li&gt;you can store more stuff in the &lt;code class=&quot;language-text&quot;&gt;state&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;we need it also in the cookie to prevent XSRF.&lt;/li&gt;
&lt;li&gt;Check the &lt;a href=&quot;https://tools.ietf.org/html/draft-bradley-oauth-jwt-encoded-state-00&quot;&gt;IETF standard&lt;/a&gt; and read more &lt;a href=&quot;https://auth0.com/docs/protocols/state-parameters&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Did you like the content? Consider sharing it in your social circle and subscribing
to receive awesome exclusive content right into your email box.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to create route namespaces with Express]]></title><description><![CDATA[This is going to be a quick post about solving the
great old question: “how to create route namespaces with Express”. Show me the answer…]]></description><link>https://nosleepjavascript.com/express-route-namespace/</link><guid isPermaLink="false">https://nosleepjavascript.com/express-route-namespace/</guid><pubDate>Fri, 07 Aug 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This is going to be a quick post about solving the
great old question: &lt;em&gt;“how to create route namespaces with Express”&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;#the-complete-example&quot;&gt;Show me the answer&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This isn’t at all an advanced technique but we have either very old
posts talking about how to do it the old way; or we have libraries to
do it or; we have the Express documentation which rather
&lt;em&gt;inexpressive&lt;/em&gt; if you pardon a pun.&lt;/p&gt;
&lt;p&gt;First of all, the Express docs are purely API docs, they tend to not
cover too much real world scenarios or “recipes” as some call them.&lt;/p&gt;
&lt;p&gt;This is specially hard on newcomers that might not have all the
necessary http, frameworks, nodejs, express idiosyncracy context
in their heads yet.&lt;/p&gt;
&lt;p&gt;So, the closest thing we have to an answer in the Express docs are &lt;a href=&quot;https://expressjs.com/en/4x/api.html#app.use&quot;&gt;here&lt;/a&gt;,
and say in a very tiny place:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Since router and app implement the middleware interface, you can use them as you would any other middleware function.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And later goes to actually show the closest thing to an example that
you will see in the docs:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mw1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mw2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; r1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; express&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
r1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; r2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; express&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
r2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; subApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
subApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mw1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;mw2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; subApp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see, this is rather blunt and inexpressive and it is using
quite old javascript.&lt;/p&gt;
&lt;p&gt;The answer is actually right here but you will never
find it just by googling: &lt;em&gt;“how to create namespaces in express”&lt;/em&gt; or
any other variant.&lt;/p&gt;
&lt;h2 id=&quot;the-answer&quot;&gt;&lt;a href=&quot;#the-answer&quot; aria-label=&quot;the answer permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The Answer&lt;/h2&gt;
&lt;p&gt;Although we’ve seen the answer in a very &lt;em&gt;expressive&lt;/em&gt; way in the
Express docs, here we present it a little bit more unpacked, explained and
with actual real world usage in mind.&lt;/p&gt;
&lt;p&gt;One typical scenario where you would want namespacing is for example
when you create a Rest api that has all its rest sources under the &lt;code class=&quot;language-text&quot;&gt;/api&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So for example you would have&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/api/dog/&lt;/code&gt; -&gt; get all dogs&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/api/dog/123&lt;/code&gt; -&gt; get dog with id 123&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/api/cat/&lt;/code&gt; -&gt; get all cats&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/api/cat/123&lt;/code&gt; -&gt; get cat with id 123&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is nice way of structuring your application since you might have routes
that are not particularly Rest resources that might go some other place.&lt;/p&gt;
&lt;p&gt;Or you might even be working on an app that also servers files and html routes,
which is very common when building monolithical apps or simply smaller apps that
don’t require any other fancy micro-servicing.&lt;/p&gt;
&lt;h3 id=&quot;enter-code-classlanguage-textroutercode&quot;&gt;&lt;a href=&quot;#enter-code-classlanguage-textroutercode&quot; aria-label=&quot;enter code classlanguage textroutercode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Enter &lt;code class=&quot;language-text&quot;&gt;Router&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Express &lt;code class=&quot;language-text&quot;&gt;Router&lt;/code&gt; is great way of grouping related route handlers and
to break your app in smaller more manageable pieces.&lt;/p&gt;
&lt;p&gt;In particular, the router is great to express a single Rest Resource,
i.e. a dog, a cat, a person, a document, etc.&lt;/p&gt;
&lt;p&gt;A common pattern to express this is the following:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dogController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Router &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/dog&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;get all dogs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/dog/:dogId&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;get dog with id &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dogId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; router&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that this is function, and that is because you typically would want to pass
parameters when your app becomes larger, such as some configuration, contextual data,
shared methods, etc.&lt;/p&gt;
&lt;p&gt;Right now this router isn’t &lt;em&gt;mounted&lt;/em&gt; anywhere, which means that the express app
is not serving it, so to serve it you can do the following:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/api&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dogController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;At this point you will have the router mounted and if you
make the request you will get a response:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; http://localhost:3000/api/dog
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; get all dogs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So how about if you need to add another controller?&lt;/p&gt;
&lt;h3 id=&quot;how-to-create-namespaces-with-express&quot;&gt;&lt;a href=&quot;#how-to-create-namespaces-with-express&quot; aria-label=&quot;how to create namespaces with express permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to create namespaces with Express&lt;/h3&gt;
&lt;p&gt;If you have followed here you will for sure
know the exact answer and it is the following&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/api&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dogController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;catController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So, the end interface is rather nice, you can add
or remove routers inside this &lt;code class=&quot;language-text&quot;&gt;api&lt;/code&gt; namespace by
adding or removing controllers to the array (which
are middleware if you didn’t know)&lt;/p&gt;
&lt;p&gt;Let’s test it out&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; http://localhost:3000/api/dog
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; get all dogs

$ $ &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; http://localhost:3000/api/dog/123
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; get dog with &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;123&lt;/span&gt;

$ &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; http://localhost:3000/api/cat/123
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; get &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; with &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;123&lt;/span&gt;

$ &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; http://localhost:3000/api/cat
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; get all cats

&lt;span class=&quot;token comment&quot;&gt;# Other routes still work&lt;/span&gt;
$ http://localhost:3000/
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Hello World&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;the-complete-example&quot;&gt;&lt;a href=&quot;#the-complete-example&quot; aria-label=&quot;the complete example permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The complete example&lt;/h2&gt;
&lt;p&gt;How to create route namespaces in express TLDR:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; express&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Router &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;express&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; port &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Fake Rest Controller for Dog resource&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dogController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Router &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/dog&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;get all dogs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/dog/:dogId&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;get dog with id &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dogId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; router&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Fake Rest Controller for Cat resource&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;catController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Router &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/cat&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;get all cats&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/cat/:catId&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;get cat with id &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;catId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; router&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Create the api namespace and assign&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// any amount of routers&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/api&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dogController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;catController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello World!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
  &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Example app listening at http://localhost:&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;port&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Download the code &lt;a href=&quot;TODO%20REPO&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I hope this post will ease your way into the NodeJS / Express world
and will serve as reference in the future.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to write CHANGELOGs]]></title><description><![CDATA[Whether you are working on an open source library or an internal private library you
should master the art of CHANGELOG. This is a…]]></description><link>https://nosleepjavascript.com/how-to-write-changelogs/</link><guid isPermaLink="false">https://nosleepjavascript.com/how-to-write-changelogs/</guid><pubDate>Thu, 07 May 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Whether you are working on an open source library or an internal private library you
should master the art of &lt;em&gt;CHANGELOG&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;This is a fundamental not-coding part of maintaining
libraries and enables consumers to understand what they can expect when moving
from version to version.&lt;/p&gt;
&lt;p&gt;This is a great resource to share with your teammates inside your company so
hopefully you can all have a common ground when maintaining internal libraries.&lt;/p&gt;
&lt;h2 id=&quot;tldr-how-to-write-a-changelog&quot;&gt;&lt;a href=&quot;#tldr-how-to-write-a-changelog&quot; aria-label=&quot;tldr how to write a changelog permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR: How to write a CHANGELOG&lt;/h2&gt;
&lt;p&gt;Keep in mind:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;your primary audience are &lt;em&gt;humans that consume your library&lt;/em&gt;, think of them when writing the CHANGELOG.&lt;/li&gt;
&lt;li&gt;it is sorted by last entry first (descending order)&lt;/li&gt;
&lt;li&gt;each entry has a date and a version number&lt;/li&gt;
&lt;li&gt;follow Semver&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;each entry should answer:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;what was added, changed, deprecated, removed, fixed, etc&lt;/li&gt;
&lt;li&gt;are there any breaking changes?&lt;/li&gt;
&lt;li&gt;Nice to have: any dependencies updates (dependencies are becoming more and more complicated so documenting any important changes here might give your consumers clues about any unexpected behaviours)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://keepachangelog.com/en/0.3.0/&quot;&gt;Keep a CHANGELOG&lt;/a&gt; is a great standard you can follow,
make sure to read their docs thoroughly but here is an example following their suggested
format.&lt;/p&gt;
&lt;p&gt;Have in mind that this is a template, not all subsections &lt;code class=&quot;language-text&quot;&gt;###&lt;/code&gt; need to be added.
&lt;code class=&quot;language-text&quot;&gt;Component X&lt;/code&gt; refers to software component, probably identify it by its directory path
or by its name or by any non-abiguous id that is obvious to consumers.
&lt;code class=&quot;language-text&quot;&gt;**BREAKING**&lt;/code&gt; needs to be added to any changes introduced that are not backwards compatible,
make sure to follow Semver (see next section).&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;CHANGELOG.md&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;##&lt;/span&gt; [Unrelease]&lt;/span&gt;

All changes that will be added in the next version

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;##&lt;/span&gt; [1.0.0] - 2020-05-04&lt;/span&gt;

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;###&lt;/span&gt; Added&lt;/span&gt;

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; New feature A in component B
&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; ...

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;###&lt;/span&gt; Changed&lt;/span&gt;

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token bold&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token content&quot;&gt;BREAKING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;**&lt;/span&gt;&lt;/span&gt; Component C now does thing D
&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; ...

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;###&lt;/span&gt; Removed&lt;/span&gt;

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token bold&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token content&quot;&gt;BREAKING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;**&lt;/span&gt;&lt;/span&gt; Component E has been removed

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;###&lt;/span&gt; Deprecated&lt;/span&gt;

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Component F has been depreacted and will be removed in next major release

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;###&lt;/span&gt; Fixed&lt;/span&gt;

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Component G now handles scenario X correctly by doing thing Y

&lt;span class=&quot;token title important&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;###&lt;/span&gt; Security&lt;/span&gt;

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Security vulnerability in Component H has been fixed (Probably add more details.)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;real-world-scenarios&quot;&gt;&lt;a href=&quot;#real-world-scenarios&quot; aria-label=&quot;real world scenarios permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Real world scenarios&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/master/CHANGELOG.md&quot;&gt;React&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/olivierlacan/metaself/blob/master/bower_components/momentjs/CHANGELOG.md&quot;&gt;Moment.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/jest/blob/master/CHANGELOG.md&quot;&gt;Jest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;follow-semver&quot;&gt;&lt;a href=&quot;#follow-semver&quot; aria-label=&quot;follow semver permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Follow &lt;a href=&quot;https://semver.org/&quot;&gt;Semver&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Unless you have very strong reasons and opinions for not
following Semver I suggest you follow it. It is a great
standard tool used across a variety of ecosystems with
clear semantics and documentation.&lt;/p&gt;
&lt;p&gt;From &lt;a href=&quot;https://semver.org&quot;&gt;https://semver.org&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;Given a version number MAJOR.MINOR.PATCH, increment the:

MAJOR version when you make incompatible API changes,
MINOR version when you add functionality in a backwards compatible manner, and
PATCH version when you make backwards compatible bug fixes.

Additional labels for pre-release and build metadata are available as extensions to the MAJOR.MINOR.PATCH format.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The combination of properly implemented Semver and properly
implemented CHANGELOG is a very powerful solution for maintaining
libraries.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;For mid to large sized companies it is very common to
maintain internal libraries (i.e. npm packages for Javascript
applications), so it is of the outmost importance that
we manage them correctly since, although the audience is reduced,
they behave very close to the Open Source model.&lt;/p&gt;
&lt;p&gt;Most of the things we go through this post have been observed
from the Open Source world, which brings me to a bonus conclusion:
&lt;strong&gt;&lt;em&gt;You can use the Open Source model as a role model for your company’s internal ecosystem&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You can explore this concept in the following recommended book:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://amzn.to/2SKqg3v&quot;&gt;The Cathedral &amp;#x26; the Bazaar&lt;/a&gt;&lt;/p&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=B0026OR3LM&amp;asins=B0026OR3LM&amp;linkId=a31f250867360780f8710bb9d8475b67&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;div id=&quot;amzn-assoc-ad-388ed262-d0bf-4cf6-8458-5b5d84d8a3cd&quot;&gt;&lt;/div&gt;&lt;script async src=&quot;https://z-na.associates-amazon.com/onetag/v2?MarketPlace=US&amp;instanceId=388ed262-d0bf-4cf6-8458-5b5d84d8a3cd&quot;&gt;&lt;/script&gt;</content:encoded></item><item><title><![CDATA[How to support multiple authors in Gatsby.js]]></title><description><![CDATA[Introduction gatsby-starter-blog comes with out of the box support for a single author blog.
But what happens when you want to support…]]></description><link>https://nosleepjavascript.com/gatsby-multi-author/</link><guid isPermaLink="false">https://nosleepjavascript.com/gatsby-multi-author/</guid><pubDate>Mon, 27 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/&quot;&gt;gatsby-starter-blog&lt;/a&gt; comes with out of the box support for a single author blog.
But what happens when you want to support multiple authors writing in your blog?&lt;/p&gt;
&lt;p&gt;Gatsby actually makes it very easy to do so but for people getting started with Gatsby
it might be a bit of challenge putting all the parts together.&lt;/p&gt;
&lt;p&gt;This post hopes to show how to solve this problem holistically.&lt;/p&gt;
&lt;p&gt;This blog is actually a real life implementation of the multi author blog. Check our &lt;a href=&quot;https://github.com/franleplant/nosleepjavascript-blog&quot;&gt;source&lt;/a&gt;!&lt;/p&gt;
&lt;h2 id=&quot;setting-multiple-author-support&quot;&gt;&lt;a href=&quot;#setting-multiple-author-support&quot; aria-label=&quot;setting multiple author support permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setting multiple author support&lt;/h2&gt;
&lt;p&gt;The highest level interface that authors writing posts will use will
still be the &lt;a href=&quot;https://www.gatsbyjs.org/packages/gatsby-transformer-remark/&quot;&gt;frontmatter&lt;/a&gt; yaml on top of each post’s markdown file.&lt;/p&gt;
&lt;p&gt;By specifying an &lt;em&gt;author id&lt;/em&gt;, we are going to be able
to retrieve the rest of the author data we have stored in our codebase.&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;content/blog/my-post/index.md&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;&lt;span class=&quot;token hr punctuation&quot;&gt;---&lt;/span&gt;
title: My Post!
&lt;span class=&quot;token title important&quot;&gt;author: author1
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For this to work we need to setup Gatsby to:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;use the filesystem as a valid source of data. In this case we used &lt;code class=&quot;language-text&quot;&gt;src/data&lt;/code&gt; but it can be anything you like.&lt;/li&gt;
&lt;li&gt;use a yaml transformer because we will store our authors data inside a yaml but you could use JSON or any other format.&lt;/li&gt;
&lt;li&gt;map frontmatter’s &lt;code class=&quot;language-text&quot;&gt;author&lt;/code&gt; attribute to &lt;code class=&quot;language-text&quot;&gt;src/data/author.yaml&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;gatsby-config.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  plugins&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;otherPlugins&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 1. use src/data as a data source&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      resolve&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;gatsby-source-filesystem&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;__dirname&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/src/data&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 2. enable yaml support&lt;/span&gt;
    &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;gatsby-transformer-yaml&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  mapping&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 3. map author to author.yaml&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;MarkdownRemark.frontmatter.author&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;AuthorYaml&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You will probably need to install the necessary dependencies: &lt;code class=&quot;language-text&quot;&gt;yarn add gatsby-source-filesystem gatsby-transformer-yaml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.gatsbyjs.org/docs/gatsby-config/#plugins&quot;&gt;Check Gatsby config docs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Important:&lt;/strong&gt; frontmatter’s &lt;code class=&quot;language-text&quot;&gt;author&lt;/code&gt; will need to match an &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt; attribute in your &lt;code class=&quot;language-text&quot;&gt;author.yaml&lt;/code&gt;, since that is
what the mapping uses as a sort of primary key.&lt;/p&gt;
&lt;p&gt;Now lets show how the &lt;code class=&quot;language-text&quot;&gt;author.yaml&lt;/code&gt; looks.&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/data/author.yaml&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; author1
  &lt;span class=&quot;token key atrule&quot;&gt;bio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; I am Author 1
  &lt;span class=&quot;token key atrule&quot;&gt;profilepicture&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ../../content/assets/author1.png
&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; author2
  &lt;span class=&quot;token key atrule&quot;&gt;bio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; I am Author 2
  &lt;span class=&quot;token key atrule&quot;&gt;profilepicture&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ../../content/assets/author2.png&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;At this point Gatsby will automatically provide the entire
Author data via the GraphQL interface,
in your post template.&lt;/p&gt;
&lt;p&gt;Notice that it will return the data for the author you
specified in the post’s frontmatter, and of course, each
post can have a different author.&lt;/p&gt;
&lt;p&gt;Let’s check how the post template can use the &lt;code class=&quot;language-text&quot;&gt;author&lt;/code&gt; data now:&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/templates/blog-post.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageQuery &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphql&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  query BlogPostBySlug($slug: String!) {
    markdownRemark(fields: { slug: { eq: $slug } }) {
      excerpt(pruneLength: 160)
      html
      frontmatter {
        title
        author {
          id
          bio
          profilepicture {
            childImageSharp {
              fluid {
                ...GatsbyImageSharpFluid
              }
            }
          }
        }
      }
    }
  }
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inside your post component you will be able to access all author data:&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/templates/blog-post.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BlogPostTemplate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    bio&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    profilepicture&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;markdownRemark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;author&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;bonus-author-profile-picture&quot;&gt;&lt;a href=&quot;#bonus-author-profile-picture&quot; aria-label=&quot;bonus author profile picture permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bonus: Author profile picture&lt;/h3&gt;
&lt;p&gt;If you look at the previous snippets you will notice we used the &lt;code class=&quot;language-text&quot;&gt;profilepicture&lt;/code&gt; to
support author’s profile pictures. Notice how in the GraphQL query that we showed before we used the
&lt;code class=&quot;language-text&quot;&gt;childImageSharp&lt;/code&gt; query to enable image optimization, something that the Gatbsy Starter blog
does by default in the mono-author mode.&lt;/p&gt;
&lt;p&gt;By using this &lt;code class=&quot;language-text&quot;&gt;childImageSharp&lt;/code&gt; and any of the other queries of &lt;a href=&quot;https://www.gatsbyjs.org/packages/gatsby-image/&quot;&gt;gatsby-image&lt;/a&gt; you can
transform dynamically loaded images via the expected GraphQL interface with ease.&lt;/p&gt;
&lt;h2 id=&quot;how-to-use-all-authors&quot;&gt;&lt;a href=&quot;#how-to-use-all-authors&quot; aria-label=&quot;how to use all authors permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to use all authors&lt;/h2&gt;
&lt;p&gt;We’ve only covered the automagical way of mapping a frontmatter
attribute to a filesystem database i.e. &lt;code class=&quot;language-text&quot;&gt;author.yaml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;But what happens when you want all the authors, lets say for a list of
authors in your page or a shared &lt;a href=&quot;https://nosleepjavascript.com/about/&quot;&gt;about&lt;/a&gt; page?&lt;/p&gt;
&lt;p&gt;Gatsby also has you covered with this by using the plugins we setup before.
Gatsby will automatically provide a way of reading the entire &lt;code class=&quot;language-text&quot;&gt;author.yaml&lt;/code&gt; as follows:&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/pages/about.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageQuery &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphql&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
    allAuthorYaml {
      nodes {
        id
        bio
      }
    }
  }
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how &lt;code class=&quot;language-text&quot;&gt;author.yaml&lt;/code&gt; is mapped to &lt;code class=&quot;language-text&quot;&gt;allAuthorYaml&lt;/code&gt;, that name transformation
is significant and you should be carefully with it.&lt;/p&gt;
&lt;p&gt;If unsure you can always go to the GraphQL explored that Gatsby provides by
default and play around with the available queries.&lt;/p&gt;
&lt;p&gt;At this point your page component will be provided with an array of authors:&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/pages/about.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;About&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// this is an array of authors&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; authors &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;allAuthorYaml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nodes&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;bonus-run-time-multi-author-support-through-graphql&quot;&gt;&lt;a href=&quot;#bonus-run-time-multi-author-support-through-graphql&quot; aria-label=&quot;bonus run time multi author support through graphql permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bonus: Run-Time multi author support through GraphQL&lt;/h3&gt;
&lt;p&gt;Notice that this setup also enables you do an ad-hoc manual implementation
of the multi-author support.
I will probably not recommend it for this use case but it is a possibility if you
encounter a use case that might benefit from it. Notice that by using this you don’t need
to statically know the author id like we did in the &lt;code class=&quot;language-text&quot;&gt;blog-post.js&lt;/code&gt; before, you can
do it entirely dynamically by simply passing react props.&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/pages/Author.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Author&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; authorId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;author&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; authors &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;allAuthorYaml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nodes&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// manually search for the selected author&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; myAuthor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; authorId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Author Bio&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;myAuthor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bio&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphql&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
    allAuthorYaml {
      nodes {
        id
        bio
      }
    }
  }
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And you can use it like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Author author&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;author1&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This can be extrapolated to a lot of other use cases.&lt;/p&gt;
&lt;h3 id=&quot;bonus-run-time-multi-author-support-through-importing-files&quot;&gt;&lt;a href=&quot;#bonus-run-time-multi-author-support-through-importing-files&quot; aria-label=&quot;bonus run time multi author support through importing files permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bonus: Run-Time multi author support through importing files&lt;/h3&gt;
&lt;p&gt;And if everything else fails you can always simply import the yaml (or any other format) directly
from your components and display the data however you like.&lt;/p&gt;
&lt;p&gt;The main drawback is that you don’t have some useful image transformations
and some other GraphQL-only APIs but there might be very good use cases for this approach
aside from supporting multiple authors:&lt;/p&gt;
&lt;div class=&quot;gatsby-code-title code-block-title&quot;&gt;src/components/Author.js&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; authors &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../data/author.yaml&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Author&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; authorId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;author&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// manually search for the selected author&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; myAuthor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; authorId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Author Bio&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;myAuthor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bio&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;I hope that I have eased the entry barrier for a multi author blog with Gatbsy,
and taught some extra techniques in the way.&lt;/p&gt;
&lt;/br&gt;
&lt;/br&gt;
Want to become a Javascript expert? This is nice place to start:
&lt;/br&gt;
&lt;/br&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=B084BNMN7T&amp;asins=B084BNMN7T&amp;linkId=8b137e903d39f2ffe9d05b679af42508&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=B08634PZ3N&amp;asins=B08634PZ3N&amp;linkId=41b1c21effffe8f07f6a3f9556d010b2&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=1491904151&amp;asins=1491904151&amp;linkId=1cf3fa04463aad92be6c68fd69a0c964&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=1491904224&amp;asins=1491904224&amp;linkId=6deb74eba04d6d6f64eda93686b39beb&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=1491904240&amp;asins=1491904240&amp;linkId=3022a1bcff37fcf599ba8b9ddcd8517f&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=1491904194&amp;asins=1491904194&amp;linkId=879d759323b3c457b665eeb431537dab&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
 &lt;div id=&quot;amzn-assoc-ad-388ed262-d0bf-4cf6-8458-5b5d84d8a3cd&quot;&gt;&lt;/div&gt;&lt;script async src=&quot;https://z-na.associates-amazon.com/onetag/v2?MarketPlace=US&amp;instanceId=388ed262-d0bf-4cf6-8458-5b5d84d8a3cd&quot;&gt;&lt;/script&gt;</content:encoded></item><item><title><![CDATA[Essential Investing and Finance for developers]]></title><description><![CDATA[Intro Whether you are working on a fin tech startup or you want to start investing or
you simply are curious about the world of investing…]]></description><link>https://nosleepjavascript.com/finance-essentials-for-developers/</link><guid isPermaLink="false">https://nosleepjavascript.com/finance-essentials-for-developers/</guid><pubDate>Mon, 20 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;intro&quot;&gt;&lt;a href=&quot;#intro&quot; aria-label=&quot;intro permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Intro&lt;/h2&gt;
&lt;p&gt;Whether you are working on a fin tech startup or you want to start investing or
you simply are curious about the world of investing and finance this post will be for you.
We will lay out a roadmap to learn the basics and beyond that resembles the path I’ve taken myself.&lt;/p&gt;
&lt;p&gt;This roadmap will be structured as a series of books you can read to become
financially literate and start taking control of your investing decisions.&lt;/p&gt;
&lt;h2 id=&quot;disclaimer&quot;&gt;&lt;a href=&quot;#disclaimer&quot; aria-label=&quot;disclaimer permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disclaimer&lt;/h2&gt;
&lt;p&gt;Of course this post does not constitute financial advice and
you should seek professional help before
doing any serious investing.&lt;/p&gt;
&lt;p&gt;Unless the world ends tomorrow and most of the concepts behind money, wealth,
jobs and socio-economics
are completely changed then you will probably
need to take control of these aspects of your life eventually,
so let this serve as an introductory step towards a better life!&lt;/p&gt;
&lt;h2 id=&quot;prerequisites&quot;&gt;&lt;a href=&quot;#prerequisites&quot; aria-label=&quot;prerequisites permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;Since this post is targeted towards developers
I assume you have some basic understanding of math.
I will cover which parts of the suggested roadmap
require explicit knowledge of somewhat advance calculus
and statistics but I can already tell you that that content will be mostly optional,
but I do believe that at least understanding
the complexity behind all these financial instruments is important.&lt;/p&gt;
&lt;p&gt;As always when learning something new, you should have patience, an open mind and thirst for knowledge.&lt;/p&gt;
&lt;p&gt;Lets being!&lt;/p&gt;
&lt;h2 id=&quot;step-1-the-millionaire-next-door&quot;&gt;&lt;a href=&quot;#step-1-the-millionaire-next-door&quot; aria-label=&quot;step 1 the millionaire next door permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 1: &lt;a href=&quot;https://amzn.to/34uubpM&quot;&gt;The Millionaire Next Door&lt;/a&gt;&lt;/h2&gt;
&lt;div style=&quot; display: flex; flex-direction: row; align-items: center; justify-content: center; margin: 40px; &quot;&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=1630762504&amp;asins=1630762504&amp;linkId=e43609509ccb3f00bd3db34f24e83cd0&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Suggested formats: Digital, Paper and great as audiobook&lt;/p&gt;
&lt;p&gt;Although this book is not strictly about finance nor investing, it does cover an aspect of
how most of the rich people in USA build their wealth, maintain it and live with it.&lt;/p&gt;
&lt;p&gt;I assume that you are interested at least partially in building
and maintaining wealth
for you and your family and that is why you want to learn to invest,
if you don’t then you can probably skip this step.&lt;/p&gt;
&lt;p&gt;What I really like about this book is that it grounds down the expectation of how it actually
is being wealthy. We have a very weird and incorrect understanding of what being wealthy means
thanks to TV, Movies and now Social Media and, spoiler alert, most of the Millionaires in United States
are hard working men and women that live frugally, are great savers and live well below their means and
with the extra cash they can commit to long term conservative investments, generating
long term wealth.&lt;/p&gt;
&lt;p&gt;So yes, being wealthy usually does not mean having tons of super expensive cars, good looking human partners,
sail boats in the Mediterranean, mansions and careless expending. These in fact are roads towards being
poor actually in most cases and are only part of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Collective_unconscious&quot;&gt;Collective unconscious&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I recommend reading this book because it talks a lot about building wealth and saving, activities that
are super important as a foundational steps towards investing.&lt;/p&gt;
&lt;h2 id=&quot;step-2-a-random-walk-down-wall-street&quot;&gt;&lt;a href=&quot;#step-2-a-random-walk-down-wall-street&quot; aria-label=&quot;step 2 a random walk down wall street permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 2: &lt;a href=&quot;https://amzn.to/2Xr4MMo&quot;&gt;A Random Walk Down Wall Street&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Suggested formats: Digital, Paper and great as audiobook&lt;/p&gt;
&lt;div style=&quot; display: flex; flex-direction: row; align-items: center; justify-content: center; margin: 40px; &quot;&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=B07DP6YGVX&amp;asins=B07DP6YGVX&amp;linkId=bc08a819966a9eaf0536b7e4f3cf860a&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;This is a good and short book that covers a wide variety of financial instruments and
investment techniques and concludes that most of the time the typical retail investor (i.e. you and me) is
better off following a simple technique called: buy and hold of conservative instruments
such as equities, bonds and &lt;a href=&quot;https://www.investopedia.com/terms/e/etf.asp&quot;&gt;ETFs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It gives a good and quick rundown of important concepts such as &lt;a href=&quot;https://www.investopedia.com/terms/v/valueinvesting.asp&quot;&gt;Value Investing&lt;/a&gt;,
&lt;a href=&quot;https://www.investopedia.com/terms/f/fundamentalanalysis.asp&quot;&gt;Fundamental Analysis&lt;/a&gt;, &lt;a href=&quot;https://www.investopedia.com/terms/t/technicalanalysis.asp&quot;&gt;Technical Analysis&lt;/a&gt;,
ETFs, Equities (stocks), government bonds, corporate bonds,
&lt;a href=&quot;https://www.investopedia.com/terms/m/modernportfoliotheory.asp&quot;&gt;Modern Portfolio Theory&lt;/a&gt;, &lt;a href=&quot;https://www.investopedia.com/terms/b/behavioraleconomics.asp&quot;&gt;Behavioral economics&lt;/a&gt;
etc.&lt;/p&gt;
&lt;p&gt;So after reading this books you will have a proper
holistic knowledge of the investment world and perhaps it will serve you
to identify your own path down this rabbit hole.
Perhaps you become interested in Technical Analysis or
perhaps you want to know more about Value Investing like the legend Warren Buffet.&lt;/p&gt;
&lt;h2 id=&quot;step-3-the-intelligent-investor&quot;&gt;&lt;a href=&quot;#step-3-the-intelligent-investor&quot; aria-label=&quot;step 3 the intelligent investor permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 3: &lt;a href=&quot;https://amzn.to/2VeUOuE&quot;&gt;The intelligent investor&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Suggested formats: Digital, Paper and great as audiobook&lt;/p&gt;
&lt;div style=&quot; display: flex; flex-direction: row; align-items: center; justify-content: center; margin: 40px; &quot;&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=B000FC12C8&amp;asins=B000FC12C8&amp;linkId=1dddce3db872bd9042014a241b7150c8&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;I got to this book because it is well recommended by a lot
of blogs and forums and it is actually recommended
by &lt;a href=&quot;https://www.cnbc.com/2017/02/02/billionaire-warren-buffett-discusses-the-book-that-changed-his-life.html&quot;&gt;Warren Buffet himself&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It is a rather long book that talks about in details
about the “Buy and Hold” investing strategy and
the benefits of it and how it fits perfectly the retail investor.
This book also introduces the concept
of &lt;a href=&quot;https://www.investopedia.com/terms/d/dollarcostaveraging.asp&quot;&gt;Dollar Cost Average&lt;/a&gt;, a technique that will
help you invest consistently while averaging the prices that
you pay for instruments, easing any low and high peaks
you might encounter in the road (the main benefit is easing the high
peaks of course).&lt;/p&gt;
&lt;h2 id=&quot;step-4-mits-finance-theory-i-and-principles-of-corporate-finance&quot;&gt;&lt;a href=&quot;#step-4-mits-finance-theory-i-and-principles-of-corporate-finance&quot; aria-label=&quot;step 4 mits finance theory i and principles of corporate finance permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 4: &lt;a href=&quot;https://www.youtube.com/playlist?list=PLUl4u3cNGP63B2lDhyKOsImI7FjCf6eDW&quot;&gt;MIT’s Finance Theory I&lt;/a&gt; and &lt;a href=&quot;https://amzn.to/2RumRW8&quot;&gt;Principles of Corporate Finance&lt;/a&gt;&lt;/h2&gt;
&lt;div style=&quot; display: flex; flex-direction: row; align-items: center; justify-content: center; margin: 40px; &quot;&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=1260565556&amp;asins=1260565556&amp;linkId=9e8cfcfe7f6924577ec7badac09765e2&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Suggested formats: Paper and, as a second option, Digital&lt;/p&gt;
&lt;p&gt;This is the step where you become a pro.&lt;/p&gt;
&lt;p&gt;The good old MIT has the generosity of making publicly
available a lot of top notch courses, along with
their syllabus, exercises and any other associated material.
These constitute one of the best learning resources
that I’ve encounter in several areas of knowledge
like computer science, math and, what we are here today, finance.&lt;/p&gt;
&lt;p&gt;In particular this course has three key aspects that make
it an invaluable learning resource in the path of
financial literacy:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The content covers a wide variety of topics that together constitute the fundamental of the modern financial world.&lt;/li&gt;
&lt;li&gt;The instructor Andrew Lo does an amazing job covering the material and relating it to real world scenarios.&lt;/li&gt;
&lt;li&gt;The course is from the Fall of 2008, right in the middle of one of the worst US and world financial crisis in the last 100 years: the &lt;a href=&quot;https://en.wikipedia.org/wiki/Financial_crisis_of_2007%E2%80%9308&quot;&gt;2008 Great Financial Crisis&lt;/a&gt;. And a lot of the material covered is directly related to what was happening then. In fact, there is a particularly good session where Andre Lo teaches about how a pool of investments can be structured and resold via the “Trench” technique. And the abuse and misuse of this techniques is one of the main culprits of the financial crisis.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We conclude then that this course is well timed, complete and overall amazing for all levels.&lt;/p&gt;
&lt;p&gt;You might get lost here or there when they go to calculating the price of futures and options when they start
using second derivatives and infinite series expansions but with the proper patience you can come to either
understand it or simply mark it as “TODO” (developer slang for &lt;em&gt;that which remains to be done&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Additionally this course follows very closely the material
covered in the book &lt;em&gt;“Principles of Corporate Finance”&lt;/em&gt;
from &lt;em&gt;“Richard Brealey, Stewart Myers, Franklin Allen”&lt;/em&gt;
which I believe is a great book overall.&lt;/p&gt;
&lt;p&gt;You can easily opt for just one of these resources or
work them together since they complement each other so much.&lt;/p&gt;
&lt;p&gt;These last two resources actually cover probably more than you want to know but they are a very good
resource if you really want to know some of the nitty-gritty details behind all this complex instruments.&lt;/p&gt;
&lt;p&gt;A specially useful section is the one where they cover the &lt;a href=&quot;https://www.investopedia.com/terms/m/modernportfoliotheory.asp&quot;&gt;Modern Portfolio theory&lt;/a&gt;, after you learn this you will
understand one of the most important aspects of being a successfully investor:
&lt;a href=&quot;https://www.investopedia.com/terms/d/diversification.asp&quot;&gt;Diversification&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;a-note-on-crypto&quot;&gt;&lt;a href=&quot;#a-note-on-crypto&quot; aria-label=&quot;a note on crypto permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;A note on crypto&lt;/h2&gt;
&lt;p&gt;Some of the material here does translate to the crypto world. In fact, at the time of writing this article there are
tons of innovative projects trying to build a lot of the traditional financial instruments into crypto. In fact we already
have futures, options and some other instruments being either available or in development.&lt;/p&gt;
&lt;p&gt;If you are working on a Fin Tech that works on top of the
Ethereum network you will probably already know most of these
things but otherwise you will probably want to at least understand the basics.&lt;/p&gt;
&lt;p&gt;On the topic of Crypto I cannot recommend enough &lt;a href=&quot;https://amzn.to/34w4AwF&quot;&gt;The Bitcoin Standard&lt;/a&gt;.
It runs down on the essence of money and how bitcoin fits in as a potentially revolutionary
store of value.&lt;/p&gt;
&lt;div style=&quot; display: flex; flex-direction: row; align-items: center; justify-content: center; margin: 40px; &quot;&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=franleplant-20&amp;language=en_US&amp;marketplace=amazon&amp;region=US&amp;placement=B07D81VLQH&amp;asins=B07D81VLQH&amp;linkId=97e066bb279bd2557bc906757f449091&amp;show_border=true&amp;link_opens_in_new_window=true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Suggested Formats: Digital, Paper and great as Audiobook&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;I wrote this post because this is a question I actually get quite often and I decided to sit down and
write it so that I can reference to it later.&lt;/p&gt;
&lt;p&gt;All these books have affected me profoundly and I cannot recommend them enough.
All the books linked have affiliate links that help support this blog.&lt;/p&gt;
 &lt;div id=&quot;amzn-assoc-ad-388ed262-d0bf-4cf6-8458-5b5d84d8a3cd&quot;&gt;&lt;/div&gt;&lt;script async src=&quot;https://z-na.associates-amazon.com/onetag/v2?MarketPlace=US&amp;instanceId=388ed262-d0bf-4cf6-8458-5b5d84d8a3cd&quot;&gt;&lt;/script&gt;</content:encoded></item><item><title><![CDATA[Intro to game development with Typescript]]></title><description><![CDATA[Table of Contents Introduction Scope Tech requirements Starting out Project setup Game Code The game loop Input Rendering concepts Note…]]></description><link>https://nosleepjavascript.com/intro-to-gamedev/</link><guid isPermaLink="false">https://nosleepjavascript.com/intro-to-gamedev/</guid><pubDate>Mon, 13 Apr 2020 20:12:03 GMT</pubDate><content:encoded>&lt;h2 id=&quot;table-of-contents&quot;&gt;&lt;a href=&quot;#table-of-contents&quot; aria-label=&quot;table of contents permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table of Contents&lt;/h2&gt;
&lt;div class=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#scope&quot;&gt;Scope&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#tech-requirements&quot;&gt;Tech requirements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#starting-out&quot;&gt;Starting out&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#project-setup&quot;&gt;Project setup&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#game-code&quot;&gt;Game Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#the-game-loop&quot;&gt;The game loop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#input&quot;&gt;Input&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#rendering-concepts&quot;&gt;Rendering concepts&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#note-about-coordinates&quot;&gt;Note about coordinates&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#main-gameplay-loop&quot;&gt;Main gameplay loop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#creating-the-character&quot;&gt;Creating the character&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#updating-the-world-with-delta&quot;&gt;Updating the world with &lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#obstacles&quot;&gt;Obstacles&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#shouldplaceworldobject&quot;&gt;ShouldPlaceWorldObject()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#getscorenextobstacle&quot;&gt;GetScoreNextObstacle()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#addobject&quot;&gt;AddObject()&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#collisions&quot;&gt;Collisions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#finishing-touches&quot;&gt;Finishing touches&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;Closing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;If you are like me and are looking into getting out of Google’s ecosystem, chances are that you switched (or are thinking on switching) from Chrome to another browser. In doing so, you will be getting rid of one of the cheekiest features in any browser: The &lt;a href=&quot;https://elgoog.im/t-rex/&quot;&gt;dinosaur game&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I thought we could take this chance to learn a little bit about web-based game development and create a small clone of the game.&lt;/p&gt;
&lt;p&gt;You can play the &lt;a href=&quot;https://ignacioamigo.github.io/dinogame/bin/index.html&quot;&gt;finished game here&lt;/a&gt; and &lt;a href=&quot;https://github.com/IgnacioAmigo/dinogame&quot;&gt;review the code here&lt;/a&gt;. Keep in mind that the code is much more commented on this article since it’s meant to be as explicit and educating as possible. Here’s what it looks like if you don’t feel like clicking the above link:&lt;/p&gt;
&lt;div style=&quot;overflow: hidden;&quot;&gt;
  &lt;iframe  frameborder=&quot;0&quot; src=&quot;https://ignacioamigo.github.io/dinogame/bin/index.html&quot; width=&quot;900&quot; height=&quot;225&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
Let&apos;s dive in!
&lt;h2 id=&quot;scope&quot;&gt;&lt;a href=&quot;#scope&quot; aria-label=&quot;scope permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Scope&lt;/h2&gt;
&lt;p&gt;It’s very easy to overshoot when scoping any piece of software, especially when you can clearly see many ways in which your software can be expanded which is the case for pretty much any kind of game (power-ups, sound effects, types of entities, etc.). In these kinds of contexts, (over-)engineering the code to be prepared for future implementations seems like the correct way to go.&lt;/p&gt;
&lt;p&gt;In this case, however, we have a pretty clear idea of what we want our game to look like: It’s a simple infinite runner, where a couple of obstacles spawn from time to time and the score is directly based on how much time we can succesfully avoid them.&lt;/p&gt;
&lt;p&gt;It will be hard, but let’s try to keep the code and program simple and pragmatic. There’s value in making the code work more systematically but we are looking into low-friction implementation since we want this to work as an introduction to a couple of ideas and technologies.
Furthermore, since we are learning some of these technologies, I’ll try to be as explicit as possible while exploring some of their defining features (in general though, I would recommend diving deeper in each of the concepts).&lt;/p&gt;
&lt;h2 id=&quot;tech-requirements&quot;&gt;&lt;a href=&quot;#tech-requirements&quot; aria-label=&quot;tech requirements permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tech requirements&lt;/h2&gt;
&lt;p&gt;Keeping the scope in mind, let’s try to deduce and compress what we need from a technology perspective:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We want the game to run on the browser, which pretty much inevitably means we are going to use either Javascript, or something that ends up turning into Javascript.&lt;/li&gt;
&lt;li&gt;We have to do game-specific tasks such as render images and process input. Luckily the browser gives us good support for both of them through things like WebGL and Javascript’s input system respectively.&lt;/li&gt;
&lt;li&gt;We would also like it to be as responsive as possible since it makes for a better user experience.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that we don’t really need brazing fast graphic drawing for this since the game will not render thousands of objects at once, so using WebGL is probably overkill. However, it’s a good way to get into the topic and so we’ll take the chance to do it that way. WebGL is fairly complicated to work with from scratch, so after doing a bit of research I have decided we can use &lt;a href=&quot;https://www.pixijs.com/&quot;&gt;PixiJS&lt;/a&gt; to render stuff.
PixiJS is a pretty simple but powerful Javascript engine to render 2D sprites. It runs over WebGL (which in turn means we are using hardware acceleration to render stuff). This will all help us get some of the cumbersome stuff out of the way so that we can focus on writing code directly related to the game itself.&lt;/p&gt;
&lt;p&gt;I think it would also be a good idea to go a step further and try to use it with Typescript to get some of that sweet, sweet type-checking.&lt;/p&gt;
&lt;h2 id=&quot;starting-out&quot;&gt;&lt;a href=&quot;#starting-out&quot; aria-label=&quot;starting out permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Starting out&lt;/h2&gt;
&lt;p&gt;We are going to use a starter template, which will solve some of these issues for us. Specifically, the starter is the following: &lt;a href=&quot;https://github.com/llorenspujol/parcel-pixijs-quickstarter&quot;&gt;https://github.com/llorenspujol/parcel-pixijs-quickstarter&lt;/a&gt;. It includes &lt;a href=&quot;https://parceljs.org/&quot;&gt;Parcel&lt;/a&gt;, &lt;a href=&quot;https://www.pixijs.com/&quot;&gt;PixiJS&lt;/a&gt; and &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;TypeScript&lt;/a&gt;. We could set it up by hand but since it’s not really the point of the post, we’ll use the template. PixiJS started shipping with Type information since version 5, which is the one being included in the starter template. This means we don’t have to import extra packages to be able to type-check PixiJS code.&lt;/p&gt;
&lt;p&gt;Note that the only real requirement for this is Node and NPM.&lt;/p&gt;
&lt;h3 id=&quot;project-setup&quot;&gt;&lt;a href=&quot;#project-setup&quot; aria-label=&quot;project setup permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Project setup&lt;/h3&gt;
&lt;p&gt;Let’s go ahead and clone the template repo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;git clone --depth 1 https://github.com/llorenspujol/parcel-pixijs-quickstarter.git DinoGame&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Immediately, on our &lt;strong&gt;DinoGame&lt;/strong&gt; folder we’ll have a starting project app that combines TypeScript and PixiJS (and already includes the type information), bundled with Parcel which also provides some nifty features such as hot module reloading. At this point it’s a good idea to run &lt;code class=&quot;language-text&quot;&gt;npm install&lt;/code&gt; to install all the package dependencies that are defined as standard node dependencies.&lt;/p&gt;
&lt;p&gt;We can actually go ahead and run the application by doing &lt;code class=&quot;language-text&quot;&gt;npm run start&lt;/code&gt;, which kicks off the build process and hosts the app on &lt;code class=&quot;language-text&quot;&gt;https://localhost:1234/&lt;/code&gt;. You’ll see a cute animation of a character that looks like Bomberman.&lt;/p&gt;
&lt;p&gt;Let’s review the code a little bit. The two TypeScript files that are important are the following: &lt;code class=&quot;language-text&quot;&gt;main.ts&lt;/code&gt;, on the root directory, and &lt;code class=&quot;language-text&quot;&gt;src\app.ts&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;main.ts&lt;/code&gt; is a simple file that imports from &lt;code class=&quot;language-text&quot;&gt;app.ts&lt;/code&gt; and creates a GameApp object by passing an HTML element, a number for screen width, and one for screen height. I want to make a low-res kind of game so I’ll drop down the resolution to &lt;em&gt;300x75&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; GameApp &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./app/app&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; myGame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;75&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, we have &lt;code class=&quot;language-text&quot;&gt;/assets/loader.js&lt;/code&gt;, which is where the creator of the template left some code that loads the game assets. Let’s modify it to suit our needs:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ghost &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./images/ghost/*.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; cloud &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./images/cloud/*.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; obstacle1 &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./images/obstacle1/*.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; obstacle2 &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./images/obstacle2/*.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;pixi.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; spriteNames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ghost&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ghost&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  obstacleGrave&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obstacle1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  obstaclePumpkin&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obstacle2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  cloud&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cloud&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetSprite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AnimatedSprite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    spriteNames&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Texture&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above code is fundamentally using the &lt;a href=&quot;https://parceljs.org/module_resolution.html&quot;&gt;&lt;em&gt;wildcard import&lt;/em&gt; feature from Parcel&lt;/a&gt; to import an arbitrary number of image paths for each of the &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; statements (specifically, the number of images in each of the directories) which we can easily extract with &lt;code class=&quot;language-text&quot;&gt;Object.values()&lt;/code&gt;. We will end up with objects that look a little bit like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;ghost &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  image1&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pathToImage1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  image2&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pathToImage2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// so when you Object.values&lt;/span&gt;
Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ghost&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  pathToImage1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pathToImage2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We are now able to call &lt;code class=&quot;language-text&quot;&gt;GetSprite()&lt;/code&gt; from &lt;code class=&quot;language-text&quot;&gt;app.ts&lt;/code&gt; with one of the four values (specifically, the keys of &lt;code class=&quot;language-text&quot;&gt;spriteNames&lt;/code&gt;). The code essentially gets the files from each of the subdirectories and creates a texture from them.&lt;/p&gt;
&lt;p&gt;This is mostly an implementation detail and you can forget about it as long as you recall that the loading happens on that file and really, all we are doing is loading files in an easy way for PixiJS to be able to render them.&lt;/p&gt;
&lt;p&gt;We could do something more strict/expandable here but for now this will work well for us, and is a low amount of code to maintain.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: The code above assumes you have your assets in the specified folders! I’d suggest copying them from the repository.&lt;/p&gt;
&lt;h2 id=&quot;game-code&quot;&gt;&lt;a href=&quot;#game-code&quot; aria-label=&quot;game code permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Game Code&lt;/h2&gt;
&lt;p&gt;Once the assets are out of the way, we can focus our efforts on the game code. Recall that this resides in &lt;code class=&quot;language-text&quot;&gt;src\app.ts&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; app&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Application&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    parent&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HTMLElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      width&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      height&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      backgroundColor&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x000000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// init Pixi loader&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; loader &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Loader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Add user player assets&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Player to load&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; playerFrames&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;playerFrames&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      loader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;playerFrames&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Load assets&lt;/span&gt;
    loader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onAssetsLoaded&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The constructor simply creates a new &lt;code class=&quot;language-text&quot;&gt;PIXI.Application&lt;/code&gt; and sets the &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; field. After that, it creates a &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Loader.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.Loader&lt;/code&gt;&lt;/a&gt; which is used to load assets (there’s one by default so it’s not really necessary to create one), and loads some files.&lt;/p&gt;
&lt;p&gt;If you run the game after changing the resolution, you’ll see it looks a little bit weird. As I said, I want to create a low-res game with a pixelated look, so for our first modifications we’ll set some fields in the &lt;code class=&quot;language-text&quot;&gt;PIXI.Application&lt;/code&gt; object that we created.&lt;/p&gt;
&lt;p&gt;This part is not very fun or interesting to discuss but needs to be done, so feel free to skip it or read without much attention. In short, I’m setting a white background (&lt;code class=&quot;language-text&quot;&gt;0xFFFFFF&lt;/code&gt; in hex), setting the scaling resolution to 3 (which makes it so that the game is low resolution but scaled on our browser), and telling PixiJS how we want the scaled pixels to look like. I also went ahead and removed a portion of code that loads the default assets so that we can start out clean:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; app&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Application&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    parent&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HTMLElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      width&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      height&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      backgroundColor&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xffffff&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      antialias&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      resolution&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// this scaling mode makes it so that scaled pixels are the&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// same as the nearest neighbor, making it blocky as we want it&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SCALE_MODE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SCALE_MODES&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NEAREST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;the-game-loop&quot;&gt;&lt;a href=&quot;#the-game-loop&quot; aria-label=&quot;the game loop permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The game loop&lt;/h2&gt;
&lt;p&gt;We have completed the setup of the game, so it’s time to start writing the game loop. The game loop is, at a high level, the main flow control tool of most modern games. It usually looks something like this in abstract terms (order is really not very relevant):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token function&quot;&gt;InitialSetup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// game loop:&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;ProcessInputs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;UpdateWorld&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;RenderWorld&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that since we are using specific tools to make this (the browser, PixiJS) we won’t really implement all steps here but it’s important to keep in mind that we usually want to handle them in some way or another.&lt;/p&gt;
&lt;p&gt;Each iteration of this loop is usually called a frame, and most games run at 30 or 60 FPS (or frames per second). This means a single frame should take around 33 or 16 miliseconds respectively.&lt;/p&gt;
&lt;p&gt;PixiJS handles setting the framerate to be the same as our screen sync rate, so we don’t have to worry much about it. As we’ll see, we can handle simulating our game in variable framerate by knowing how much time passed between the previous frame and the current one. This does not mean it’s really the most appropriate solution (in fact, a lot of times you’ll want to &lt;a href=&quot;https://gafferongames.com/post/fix_your_timestep/&quot;&gt;fix your frametime&lt;/a&gt;).&lt;/p&gt;
&lt;h2 id=&quot;input&quot;&gt;&lt;a href=&quot;#input&quot; aria-label=&quot;input permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Input&lt;/h2&gt;
&lt;p&gt;This is the first step of the high-level game loop I described above. How will we handle this? Luckily for us, Javascript/the browser has a pretty robust input system of which we can take advantage of to know when the user presses a key so we won’t have to put much effort for this to work.&lt;/p&gt;
&lt;p&gt;Let’s say we want our player to jump with the &lt;em&gt;Spacebar&lt;/em&gt; key. We can implement this easily by having a &lt;code class=&quot;language-text&quot;&gt;PressedSpace&lt;/code&gt; boolean value that we reset at the end of every frame, once we updated our world (so it is not &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt; forever).&lt;/p&gt;
&lt;h2 id=&quot;rendering-concepts&quot;&gt;&lt;a href=&quot;#rendering-concepts&quot; aria-label=&quot;rendering concepts permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Rendering concepts&lt;/h2&gt;
&lt;p&gt;Before diving into the fun part (the gameplay code!), let’s see how we will handle the rendering part of our game, which is PixiJS’s main function.
When we create the main object (of class &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Application.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.Application&lt;/code&gt;&lt;/a&gt;), we’ll have access to an object called the &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Application.html#stage&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stage&lt;/code&gt;&lt;/a&gt; (of class &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Container.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.Container&lt;/code&gt;&lt;/a&gt;), which is where we can tell Pixi what objects we want to have drawn. You can think of it as a list (or more generally, a collection) of objects to display. After loading an image, we can do this with a single line of code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; sprite &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Sprite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Stage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obstacle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can learn more about it on PixiJS’s documentation articles (I’d recommend at least glossing over them since it always helps to be familiarized with official documentation).&lt;/p&gt;
&lt;p&gt;Any object (text, lines, sprites) can be displayed this way. Since our use is pretty limited, there’s not really much more to say about this system, but it has a lot more useful functions which I recommend exploring.&lt;/p&gt;
&lt;h3 id=&quot;note-about-coordinates&quot;&gt;&lt;a href=&quot;#note-about-coordinates&quot; aria-label=&quot;note about coordinates permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Note about coordinates&lt;/h3&gt;
&lt;p&gt;PixiJS uses a coordinate system that comprises the 2 usual suspects: The X coordinate, and the Y coordinate. However, it is important to keep in mind that the (0,0) coordinate is on the &lt;strong&gt;top left&lt;/strong&gt;, and &lt;strong&gt;the X coordinate increases to the right&lt;/strong&gt;, whereas &lt;strong&gt;the Y component increases as we go down on the screen&lt;/strong&gt;. This is the most common coordinate system in game development tools so we’ll leave it as it is, but as you can imagine there are things you can do to translate and modify the system as desired.&lt;/p&gt;
&lt;h2 id=&quot;main-gameplay-loop&quot;&gt;&lt;a href=&quot;#main-gameplay-loop&quot; aria-label=&quot;main gameplay loop permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Main gameplay loop&lt;/h2&gt;
&lt;p&gt;We’ve seen what the gameplay loop looks like in general terms, but how do we implement the main update function (ie: &lt;code class=&quot;language-text&quot;&gt;UpdateWorld()&lt;/code&gt;)? The answer is pretty simple, the &lt;code class=&quot;language-text&quot;&gt;PIXI.Application&lt;/code&gt; object that we created contains a field called &lt;code class=&quot;language-text&quot;&gt;ticker&lt;/code&gt; of type &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Ticker.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.Ticker&lt;/code&gt;&lt;/a&gt;, which lets us register different tickers that will run on each animation frame (for example, 60 times per second). After its execution, the frame is rendered (that is,the objects we set on the &lt;code class=&quot;language-text&quot;&gt;stage&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;This rendering process can be done at hand by &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Ticker.html#.shared&quot;&gt;getting the renderer object and calling &lt;code class=&quot;language-text&quot;&gt;render()&lt;/code&gt;&lt;/a&gt;, but we will avoid this and let PixiJS do it automatically after running the ticker. This way, we are essentially coupling the &lt;code class=&quot;language-text&quot;&gt;UpdateWorld()&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;RenderWorld()&lt;/code&gt; of our abstract game loop, which will work just fine for our needs.&lt;/p&gt;
&lt;p&gt;Let’s create a set of static methods and fields where we will group our game logic in our &lt;code class=&quot;language-text&quot;&gt;GameApp&lt;/code&gt; class. We know we want to know if the player is in a game over state, and what score they are achieving, so we’ll define fields for those values.&lt;/p&gt;
&lt;p&gt;Regarding methods, for now we’ll have one method for setup and one for the world updates, which we will implement through the PixiJS ticker:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; GameOver&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; PressedSpace&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; Score&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    parent&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HTMLElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// code we added in the previous section goes here&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// register the event for key presses&lt;/span&gt;
    window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onkeydown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ev&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; KeyboardEvent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PressedSpace &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ev&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    Game&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetupGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// this is the ticker that runs once per frame, let&apos;s call our Update() function&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ticker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      Game&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SetupGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// initial setup of the game state&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// simulate game, update entities and world&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// frame is ending, so let&apos;s set PressedSpace back to false&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// so that it is the default on the next frame&lt;/span&gt;
    GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PressedSpace &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Ticker.html#deltaTime&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt;&lt;/a&gt; parameter is passed on to the ticker and is how much time (&lt;strong&gt;in milliseconds&lt;/strong&gt;) passed between the previous frame and the current one, so that we can use it to simulate our entities. It will be explained better in the next section so don’t worry for now.&lt;/p&gt;
&lt;h2 id=&quot;creating-the-character&quot;&gt;&lt;a href=&quot;#creating-the-character&quot; aria-label=&quot;creating the character permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating the character&lt;/h2&gt;
&lt;p&gt;We now have a little skeleton of code to fill in. Let’s start by drawing the character whose assets we loaded previously.&lt;/p&gt;
&lt;p&gt;PixiJS has two classes called &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Sprite.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.Sprite&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.AnimatedSprite.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.AnimatedSprite&lt;/code&gt;&lt;/a&gt; to draw either static sprites (i.e: images) or animations, respectively. So let us create a Player class that contains an AnimatedSprite that we can draw on screen:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  sprite&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AnimatedSprite&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetSprite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ghost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Game&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GroundPosition&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animationSpeed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.05&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Game&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can now create a &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt; object and immediately see the character on screen animating, at the bottom left. If we go a little bit further, we can probably imagine that we need to update the object every frame, so we can go ahead and create an &lt;code class=&quot;language-text&quot;&gt;Update()&lt;/code&gt; method that handles the character jumping (recall that we were saving whether the player had pressed Space). Since we will be updating the player from &lt;code class=&quot;language-text&quot;&gt;GameApp.Update(delta)&lt;/code&gt; it makes sense that the &lt;em&gt;Update&lt;/em&gt; method for our character takes this as an argument as well.&lt;/p&gt;
&lt;p&gt;We know we want our character to jump with Spacebar, so we are actually at the point where we can implement this as well. I’ll be defining a couple of fields on the &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt; class for this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Airborne&lt;/code&gt;: Boolean value that determines whether the customer is in the air. We need this to know if we have to accelerate the character downwards, and whether the character can jump.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;VerticalSpeed&lt;/code&gt;: Gravity accelerates our character downward, which in turn means it increases the vertical speed linearly (i.e: a specific amount per frame/time unit).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;updating-the-world-with-code-classlanguage-textdeltacode&quot;&gt;&lt;a href=&quot;#updating-the-world-with-code-classlanguage-textdeltacode&quot; aria-label=&quot;updating the world with code classlanguage textdeltacode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Updating the world with &lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;As mentioned before, the &lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt; parameter that we are getting from the ticker and passing on to our &lt;code class=&quot;language-text&quot;&gt;Update()&lt;/code&gt; method contains, in miliseconds, how much time passed between the previous frame and this one. Why is that value useful to us? Well, if we don’t know how much time passed between one frame and the next one, we can’t proportionally simulate the world. Usually, if we fix the framerate, we can simulate for a specific amount of frametime (so, if we want our game to run at 60 FPS, we would divide 1000 ms by 60 frames, which gives us 16.6 ms/frame), but in reality we can’t rely on that being the real time that passed between two frames (there is a lot of variance introduced by the OS, the browser, the user, etc.).&lt;/p&gt;
&lt;p&gt;This way, if we want a value to increase by a rate of &lt;code class=&quot;language-text&quot;&gt;X per second&lt;/code&gt; depending on how much time passed, we need to adjust for how much time passed in the frame. If half a second passed between a frame and the next one, the amount by which we increase would be equal to &lt;code class=&quot;language-text&quot;&gt;0.5 seconds&lt;/code&gt; times &lt;code class=&quot;language-text&quot;&gt;X per second&lt;/code&gt;. This is the pattern that we will use to increment values that are tied to time (for example: user score, player speed, etc.).&lt;/p&gt;
&lt;p&gt;Keeping all this in mind, you might already get the sense of what the update code is going to look like, but to spell it out: If our character not airborne and the player pressed space, let’s set the VerticalSpeed to a negative value so our little character goes up. If the character is airborne, we need to accelerate it downward by adding up a constant value to the vertical speed. To make sure he doesn’t go downward eternally, let’s check against a &lt;code class=&quot;language-text&quot;&gt;GroundPosition&lt;/code&gt; (defined on &lt;code class=&quot;language-text&quot;&gt;GameApp&lt;/code&gt; since it will depend on the view’s height) so that we know when we are not airborne anymore (and when we can set the speed to 0). Finally, let’s make our character move by changing the sprite’s Y position:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GroundPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// if downward acceleration brought us to the ground,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// stop and set airborne to false&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GroundPosition&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;verticalSpeed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;airborne &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;airborne&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// if we are in the air, accelerate downward&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// by increasing the velocity by a constant value&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;verticalSpeed &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; delta&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PressedSpace &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;airborne&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// jump!&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;airborne &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;verticalSpeed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// remember the delta update!&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// the position will change in accordance to&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// how much time passed and the character&apos;s speed&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;verticalSpeed &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; delta&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So far, we can create a &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt; object on &lt;code class=&quot;language-text&quot;&gt;GameApp.SetupGame()&lt;/code&gt; and have it update on the &lt;code class=&quot;language-text&quot;&gt;GameApp.Update()&lt;/code&gt; method. The character will stand on the bottom left side of the window and jump when we press Spacebar as it animates slowly. You might be wondering when we are going to make the character move: The answer is we don’t! We’ll move obstacles towards the character.&lt;/p&gt;
&lt;h2 id=&quot;obstacles&quot;&gt;&lt;a href=&quot;#obstacles&quot; aria-label=&quot;obstacles permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Obstacles&lt;/h2&gt;
&lt;p&gt;We have a character that jumps, so a good next point to explore is obstacles that scroll horizontally to the left. We want to have an arbitrary number of obstacles coming at the player, leaving some space for it to react accordingly.&lt;/p&gt;
&lt;p&gt;Since we are doing scrolling obstacles, we can also make our code so that it includes aesthetic objects such as clouds. We can differentiate those with objects that the character can bump into by having a boolean member called &lt;code class=&quot;language-text&quot;&gt;solid&lt;/code&gt;. We can even make them scroll a little bit slower so that we have some sort of &lt;a href=&quot;https://en.wikipedia.org/wiki/Parallax_scrolling&quot;&gt;parallax scrolling&lt;/a&gt;. For this, let’s define a base scroll speed on &lt;code class=&quot;language-text&quot;&gt;GameApp&lt;/code&gt; and subtract one from it if the world object is not solid.
Lastly, let’s add a modifier to the speed of the obstacles so that they move a little bit faster as the score increases:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; ScrollSpeed &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ScrollingObject&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  sprite&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Sprite&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  solid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spriteName&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isSolid&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token function&quot;&gt;GetSprite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spriteName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Width&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GroundPosition&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;anchor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;solid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; isSolid&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; baseScrollSpeed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;solid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ScrollSpeed &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ScrollSpeed&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// modifier for speed depending on score so that it gets more difficult&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; scrollSpeed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; baseScrollSpeed &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;15.0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// move to the left, watch out!&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; delta &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrollSpeed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Right now we can create multiple obstacle objects and have them update on the main game loop. We mentioned before that we wanted to prepare our game for an arbitrary number of objects, how can we achieve this? One way would be to create a list of &lt;code class=&quot;language-text&quot;&gt;WorldObject&lt;/code&gt;s and insert there all the objects that we want.&lt;/p&gt;
&lt;p&gt;At this point, however, we actually have 2 types of objects that interact with the world: &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;ScrollingObject&lt;/code&gt;. But it makes sense for us to coalesce all instances in one list of objects to loop over. If we were to go in an &lt;a href=&quot;https://en.wikipedia.org/wiki/Object-oriented_programming&quot;&gt;object-oriented&lt;/a&gt; direction, we could create a class hierarchy that perhaps could make both our classes inherit from a common one that had all the shared functionality and data. Another good approach would be to create an interface that enforced the methods/fields that they both share. However, since we are using TypeScript and it has a &lt;a href=&quot;https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types&quot;&gt;very powerful type system&lt;/a&gt;, we can try to implement one of the more frictionless options by creating a Union type and an alias for it. It’s easy to combine our smaller primitives this way for now given the way our code looks like. Remember, we are trying to go for low cost solutions for our little project.&lt;/p&gt;
&lt;p&gt;So let’s go ahead and implement all this on our &lt;code class=&quot;language-text&quot;&gt;GameApp&lt;/code&gt; class.:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// creating an alias for our Union type that we can use&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WorldObjects&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Player &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ScrollingObject&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; app&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Application&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; PressedSpace&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; Stage&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Container&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; ActiveEntities&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;WorldObjects&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; GameOver&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; ScrollSpeed&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ground position, given by screen height&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; GroundPosition&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// width of game screen, given by screen width&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; Width&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// score of current run&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; Score&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// max score achieved in session&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; MaxScore&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// next score in which we should place an obstacle&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; ScoreNextObstacle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Objects whose types are of this Union type (&lt;code class=&quot;language-text&quot;&gt;Player | ScrollingObject&lt;/code&gt;) have accessible members that are defined both on our Player and on ScrollingObject types. As seen above, I created a new static member called &lt;code class=&quot;language-text&quot;&gt;ActiveEntities&lt;/code&gt; which is an array of &lt;code class=&quot;language-text&quot;&gt;WorldObject&lt;/code&gt;s. We now have to change &lt;code class=&quot;language-text&quot;&gt;GameApp.Update()&lt;/code&gt; to loop over this array.&lt;/p&gt;
&lt;p&gt;But before that, you might have noticed as well that I created a couple more variables for tracking score stuff. This will allow us to do a couple of things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Keep score for the current run&lt;/li&gt;
&lt;li&gt;Save the maximum score achieved in a session&lt;/li&gt;
&lt;li&gt;Know when the next obstacle should spawn (each time we create one, we set the score at which the next one should appear)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To keep the code simple for now, everytime we spawn an obstacle we’ll spawn a cloud for aesthetics. There’s no real reason why we couldn’t add a more random element to these decorations later, but for now this will keep the code easier to study/describe.&lt;/p&gt;
&lt;p&gt;A quick note regarding object spawns: As you might have seen in the assets definitions, we have two different kinds of obstacles in addition to the cloud sprite. Once we decide it’s time to spawn a new obstacle, we need to choose which one we want to spawn. The pumpkin is a little more difficult to overcome because of the sprite’s dimensions, so we can do something like generating a random number that falls between zero and one uniformly, and decide to spawn a pumpkin only if the number is higher than 0.75. This way, we are essentially giving the pumpkin a 25% chance of spawning, and a 75% chance to the grave.&lt;/p&gt;
&lt;p&gt;Keeping that in mind, let’s see what our current game update looks like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// if we haven&apos;t lost yet let&apos;s update everything,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// otherwise wait for spacebar press to restart game&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GameOver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// loop over object list&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; currentEntity &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ActiveEntities&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// update entity&lt;/span&gt;
      currentEntity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ActiveEntities&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// current score update!&lt;/span&gt;
    GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; delta &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// update the max score if necessary&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MaxScore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MaxScore &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShouldPlaceWorldObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.75&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;obstacleGrave&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;obstaclePumpkin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;cloud&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ScoreNextObstacle &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetScoreNextObstacle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PressedSpace&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetupGame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PressedSpace &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There’s some code I defined there which has not been written out yet, however it felt like something that could be deferred, since meaning can be extracted out of what you can read above anyway.&lt;/p&gt;
&lt;p&gt;Let’s see how we can go ahead and define the implementation of the definitions written above.&lt;/p&gt;
&lt;h3 id=&quot;shouldplaceworldobject&quot;&gt;&lt;a href=&quot;#shouldplaceworldobject&quot; aria-label=&quot;shouldplaceworldobject permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ShouldPlaceWorldObject()&lt;/h3&gt;
&lt;p&gt;This one’s an easy one. We said we had &lt;code class=&quot;language-text&quot;&gt;ScoreNextObstacle&lt;/code&gt; defined for us to know when it was time to spawn a new obstacle, so let’s define the check:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShouldPlaceWorldObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ScoreNextObstacle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;getscorenextobstacle&quot;&gt;&lt;a href=&quot;#getscorenextobstacle&quot; aria-label=&quot;getscorenextobstacle permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;GetScoreNextObstacle()&lt;/h3&gt;
&lt;p&gt;In the scoping section, we mentioned briefly that we wanted the game to spawn obstacles &lt;em&gt;from time to time&lt;/em&gt; (if you played Chrome’s dinosaur game, you know they appear randomly). There’s a level of uncertainty in that statement that we can resolve by getting random values for the next time for an object to appear:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetScoreNextObstacle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// let&apos;s have a minimum distance so objects don&apos;t appear next to each other&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; minimumDistance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// we can define a level of difficulty to make it harder as we go on (limit is 5)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; difficulty &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// define the random value based on values above&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;difficulty &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; minimumDistance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;addobject&quot;&gt;&lt;a href=&quot;#addobject&quot; aria-label=&quot;addobject permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;AddObject()&lt;/h3&gt;
&lt;p&gt;Since we are using this method to generalize adding decorations (i.e: non-solid objects) and obstacles, we let the caller decide which height (or Y position) it should be spawned at, but the X position should always be set as the game’s width (at the right limit of the screen).
The other thing we need to keep in mind is that if we want the object to update, we need to add it to the list of &lt;code class=&quot;language-text&quot;&gt;ActiveEntities&lt;/code&gt; so that the game keeps track of it (and to PixiJS’s Stage object).&lt;/p&gt;
&lt;p&gt;So the method would look something like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;AddObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spriteName&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;keyof&lt;/span&gt; Sprites&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; height&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isSolid&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obstacle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ScrollingObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spriteName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Width&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isSolid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ActiveEntities&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obstacle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obstacle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;collisions&quot;&gt;&lt;a href=&quot;#collisions&quot; aria-label=&quot;collisions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Collisions&lt;/h2&gt;
&lt;p&gt;We are at the point where our game feels pretty playable, we can run it and jump over objects. A “small” problem that you might have noticed, however, is that we cannot really bump into objects and lose the game, so we’ll have to find a solution for that.&lt;/p&gt;
&lt;p&gt;Our sprites are loaded as 2D textures that fit inside a box which has a specific width and height. PixiJS gives us access to these values (and the current X and Y positions) through a rectangle structure, accessible through &lt;code class=&quot;language-text&quot;&gt;PIXI.Sprite.getBounds()&lt;/code&gt;. Imagine we have 2 rectangles of which we know these 4 values (i.e: X position, Y position, width and height), how can we tell if they are overlapping/colliding? One way of answering is by inversion (&lt;em&gt;When do they &lt;strong&gt;not&lt;/strong&gt; collide?&lt;/em&gt;):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;If the the first rectangle’s X position starts after the second rectangle’s X extension ends, then they are definitely not colliding because of the orthogonal properties of the X and Y axes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This also applies the other way around (if the second rectangle’s X position starts after the first one’s X extension ends they don’t collide)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If the the first rectangle’s Y position starts after the second rectangle’s Y extension ends, the same applies.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;And the other way around.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since we know when they are &lt;strong&gt;not&lt;/strong&gt; colliding, we can negate that and get the result.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The above can be a little confusing&lt;/strong&gt;, so looking at code might help. Let’s define a &lt;code class=&quot;language-text&quot;&gt;CollidesWidth()&lt;/code&gt; method on our &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt; class. Each of the four lines in the return statement refers to each of the cases stated above:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CollidesWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;otherSprite&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Sprite&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// player&apos;s rectangle&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; ab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBounds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// sprite we are checking against&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; otherSprite&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBounds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
          ab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
          ab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
          ab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since we have a way of checking for 1:1 collisions on &lt;code class=&quot;language-text&quot;&gt;Player&lt;/code&gt;, we’ll need to modify the &lt;code class=&quot;language-text&quot;&gt;Update()&lt;/code&gt; method to check if it’s colliding against any of all the solid &lt;code class=&quot;language-text&quot;&gt;ActiveEntities&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let’s add this at the end of the method:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; currentEntity &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ActiveEntities&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    currentEntity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;solid &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collidesWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentEntity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sprite&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GameOver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;finishing-touches&quot;&gt;&lt;a href=&quot;#finishing-touches&quot; aria-label=&quot;finishing touches permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Finishing touches&lt;/h2&gt;
&lt;p&gt;We are saving what the max and current score are, but we have not been displaying it so far. Luckily it’s pretty easy to such thing in PixiJS. All we need to do is define a &lt;a href=&quot;https://pixijs.download/dev/docs/PIXI.Text.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PIXI.Text&lt;/code&gt;&lt;/a&gt; object, add it to the stage and adjust it as we need. Let’s do it on our &lt;code class=&quot;language-text&quot;&gt;GameApp&lt;/code&gt; class:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre class=&quot;language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GameApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; ScoreText&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;PIXI&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Score: &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fill&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;#aaff&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    align&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;center&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    stroke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;#aaaaaa&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    strokeThickness&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ticker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// if we didn&apos;t lose, display score and max score,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// otherwise show a &quot;game over&quot; prompt&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GameOver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ScoreText&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;Score: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot; - Max Score: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MaxScore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ScoreText&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;Game over! You scored &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;. Max Score: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GameApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MaxScore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;. Press spacebar to restart.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are some other finishing touches and optimizations that I added to the code, feel free to review them on the repo (and ask away if you think I can help!).&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Since it involves many subsystems, there are many, many ways to approach game development in general, and we only just barely scraped the surface of it.&lt;/p&gt;
&lt;p&gt;Hopefully this served as a good starting point which you can build upon. TypeScript and PixiJS are both very useful tools that made this very easy, but keep in mind that they are very powerful. There are a number of optimizations and features in terms of code and runtime that could be done and I would suggest exploring to improve your craft: Improve assets loading code by adding compile-time checks (such as for assets names), add different kinds of obstacles, make the character fall faster if the player presses the down arrow key, recycle/pool objects so that there aren’t many allocations, the possibilities are endless!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Essential Docker for Javascript and Front End Developers]]></title><description><![CDATA[Jump to the commands sections What is docker? Docker is an open platform for developing, shipping, and running applications. source Docker…]]></description><link>https://nosleepjavascript.com/docker-essentials-for-front-end-developers/</link><guid isPermaLink="false">https://nosleepjavascript.com/docker-essentials-for-front-end-developers/</guid><pubDate>Tue, 10 Mar 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Jump to the &lt;a href=&quot;#essential-commands&quot;&gt;commands sections&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;what-is-docker&quot;&gt;&lt;a href=&quot;#what-is-docker&quot; aria-label=&quot;what is docker permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is docker?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker is an open platform for developing, shipping, and running applications.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/docker-overview/&quot;&gt;source&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.docker.com/&quot;&gt;Docker&lt;/a&gt; lets you encapsulate your application along with all its
system dependencies into a single executable
that can be shipped predictably into servers or clusters; or
as development environment for other developers using different
Operating Systems.&lt;/p&gt;
&lt;p&gt;If you are familiar with Virtual Machines (such as &lt;a href=&quot;https://www.virtualbox.org&quot;&gt;Virtual Box&lt;/a&gt;) or &lt;a href=&quot;https://www.vagrantup.com&quot;&gt;Vagrant&lt;/a&gt;
then you should feel comfortable enough with Docker.&lt;/p&gt;
&lt;p&gt;With Docker you can easily create something very similar to a headless virtual machine.
You can install system dependencies, configure networks and ports, setup databases,
fetch your code and start your app with a simple configuration file i.e. &lt;em&gt;Dockerfile&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Today it’s very common for &lt;a href=&quot;https://en.wikipedia.org/wiki/Infrastructure_as_a_service&quot;&gt;IaaS&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Platform_as_a_service&quot;&gt;PaaS&lt;/a&gt; providers to provide first
class support for Docker containers.
Examples of these providers are &lt;a href=&quot;https://cloud.google.com/compute&quot;&gt;Google Cloud Compute Engine&lt;/a&gt;,
&lt;a href=&quot;https://azure.microsoft.com/en-us/&quot;&gt;Microsoft Azure&lt;/a&gt; and &lt;a href=&quot;https://aws.amazon.com&quot;&gt;Amazon AWS&lt;/a&gt; among others.
You can use &lt;a href=&quot;https://kubernetes.io/&quot;&gt;Kubernetes&lt;/a&gt; to manage a cluster composed of dozens
of Docker containers in these providers and scale easily
so long as you can afford it.&lt;/p&gt;
&lt;p&gt;Lets take a simple Nodejs / Front End application, what does it need to run?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;System Dependencies:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An adequate linux distribution.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;NodeJs&lt;/a&gt;, &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;NPM&lt;/a&gt;, &lt;a href=&quot;https://yarnpkg.com/&quot;&gt;Yarn&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gcc.gnu.org/&quot;&gt;gcc&lt;/a&gt; and the required native dependencies to install native NodeJs dependencies (such as &lt;code class=&quot;language-text&quot;&gt;node-sass&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;System configurations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;npm/yarn repositories.&lt;/li&gt;
&lt;li&gt;OS networks, users, groups, etc.&lt;/li&gt;
&lt;li&gt;System optimizations such as removing any OS components not needed for running your app.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;build/run steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fetching your app’s code&lt;/li&gt;
&lt;li&gt;installing dependencies (i.e. via &lt;code class=&quot;language-text&quot;&gt;yarn install&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;npm install&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;building (if necessary)&lt;/li&gt;
&lt;li&gt;starting your app&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We will a cover an example of this later.&lt;/p&gt;
&lt;p&gt;Docker lets you express all these necessary steps that make
up a single deliverable application.&lt;/p&gt;
&lt;p&gt;The way you express these necessary steps is a &lt;strong&gt;Dockerfile&lt;/strong&gt;
and the result of &lt;em&gt;building&lt;/em&gt; your &lt;em&gt;Dockerfile&lt;/em&gt;
is an &lt;strong&gt;Image&lt;/strong&gt; that can be instantiated and executed, this executable
is called a &lt;strong&gt;Container&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&quot;what-is-an-image&quot;&gt;&lt;a href=&quot;#what-is-an-image&quot; aria-label=&quot;what is an image permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is an image?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;An image is a read-only template with instructions for creating a Docker container.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/docker-overview/&quot;&gt;source&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You use a &lt;em&gt;Dockerfile&lt;/em&gt; to define an &lt;em&gt;image&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Your &lt;em&gt;Dockerfile&lt;/em&gt; is an ordered list of steps necessary to
run your app. Each line will generate an intermediate &lt;em&gt;image&lt;/em&gt; that
Docker will cache for performance reasons, so the order of your
steps is important.&lt;/p&gt;
&lt;p&gt;This is a rather minimal but typical &lt;em&gt;Dockerfile&lt;/em&gt; for a NodeJs app:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# This is our base community provided image,&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# with some minimal distribution of linux&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# that comes with NodeJs v10 (and npm) already installed&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;12

&lt;span class=&quot;token comment&quot;&gt;# Use this directory _inside_ your Docker container&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# as the base directory of all the next actions&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /usr/src/app

&lt;span class=&quot;token comment&quot;&gt;# Copy your app&apos;s code from the host (your computer) to the container.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# This assumes a typical setup in which the Dockerfile&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# is in the root of your project&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json ./

&lt;span class=&quot;token comment&quot;&gt;# Install dependencies&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm install

&lt;span class=&quot;token comment&quot;&gt;# Copy the rest of your App&apos;s source files&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . .

&lt;span class=&quot;token comment&quot;&gt;# Tell Docker that your app will be working in the port 8080&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# so we should open it up to the outside&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 8080

&lt;span class=&quot;token comment&quot;&gt;# Run your app.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# CMD signals Docker that this is the thing that we want to run,&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# if this executable fails then the whole container will exit.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;node&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;server.js&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how we install dependencies before copying the App’s code, this assumes
that the dependencies will change less frequently that the App code so Docker might
be able to use the already cached intermediate &lt;em&gt;image&lt;/em&gt; up to that point.&lt;/p&gt;
&lt;p&gt;Building &lt;em&gt;images&lt;/em&gt; means processing the list of instructions and sort of &lt;em&gt;render&lt;/em&gt; the final &lt;em&gt;image&lt;/em&gt;
so that it is ready to be instantiated into a running &lt;em&gt;container&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt;: &lt;strong&gt;Images&lt;/strong&gt; are just instructions, when you run them you turn them into &lt;strong&gt;Containers&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&quot;what-is-a-container&quot;&gt;&lt;a href=&quot;#what-is-a-container&quot; aria-label=&quot;what is a container permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is a container?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;A container is a runnable instance of an image.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/docker-overview/&quot;&gt;source&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;After you built your final &lt;em&gt;image&lt;/em&gt; you can then instantiate it into an executable,
this executable is called a &lt;em&gt;container&lt;/em&gt; and it is treated
by your host OS as just another process.&lt;/p&gt;
&lt;p&gt;Take a moment to think about the big leap of the final statement,
this means that by using Docker you have encapsulated an
entire Operating System (OS), dependencies, configurations,
startup commands, etc into a single runnable process in your
host Operating System. Nice, right?&lt;/p&gt;
&lt;h2 id=&quot;image-vs-container-an-analogy&quot;&gt;&lt;a href=&quot;#image-vs-container-an-analogy&quot; aria-label=&quot;image vs container an analogy permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Image vs Container: an analogy&lt;/h2&gt;
&lt;p&gt;You can think of an &lt;em&gt;image&lt;/em&gt; as a traditional Object Oriented Programming (OOP) Class,
and a &lt;em&gt;container&lt;/em&gt; as an instance.
You can have multiple running instances of an image
(that is usually how you scale your app inside a cluster), with
slightly different parameters (Environment Variables mostly).&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Images&lt;/code&gt; can inherit from other &lt;code class=&quot;language-text&quot;&gt;images&lt;/code&gt; to compose them in useful and meaningful ways.&lt;/p&gt;
&lt;h2 id=&quot;docker-repositories-docker-hub&quot;&gt;&lt;a href=&quot;#docker-repositories-docker-hub&quot; aria-label=&quot;docker repositories docker hub permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Docker repositories (Docker Hub)&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker Hub repositories allow you share container images with your team, customers, or the Docker community at large.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/docker-hub/repos/&quot;&gt;source&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Docker Hub is an analogue solution to things such as NPM to distribute NodeJs packages,
&lt;a href=&quot;https://doc.rust-lang.org/cargo/&quot;&gt;Cargo&lt;/a&gt; to distribute &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt; crates (pieces of code), &lt;a href=&quot;https://maven.apache.org/&quot;&gt;Maven&lt;/a&gt; to distribute &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_(software_platform)&quot;&gt;Java&lt;/a&gt; Jars (pieces of code), etc.&lt;/p&gt;
&lt;p&gt;Docker hub also has the concept of &lt;a href=&quot;https://docs.docker.com/registry/deploying/&quot;&gt;registry&lt;/a&gt; similar to NPM where you can use
the default Docker hub registry or your company’s own.
The default &lt;a href=&quot;https://www.docker.com/products/docker-hub&quot;&gt;Docker hub registry&lt;/a&gt; is where most of the base images, such as NodeJs,
Nginx, Java, etc live.&lt;/p&gt;
&lt;p&gt;In the &lt;code class=&quot;language-text&quot;&gt;Dockerfile&lt;/code&gt; we dissected before, the first line is &lt;code class=&quot;language-text&quot;&gt;FROM node:12&lt;/code&gt; and
tells docker to use the base image &lt;code class=&quot;language-text&quot;&gt;node:12&lt;/code&gt; (NodeJs version 12) that is stored
in a Docker hub registry, by default it will use Docker’s registry.&lt;/p&gt;
&lt;p&gt;The first time you try to build this image you will notice that Docker
downloads the base image and store it in cache.&lt;/p&gt;
&lt;p&gt;We cover the basic commands in the next section.&lt;/p&gt;
&lt;h2 id=&quot;essential-commands&quot;&gt;&lt;a href=&quot;#essential-commands&quot; aria-label=&quot;essential commands permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Essential commands&lt;/h2&gt;
&lt;p&gt;This assumes you have docker installed in your system (Linux or Macos)&lt;/p&gt;
&lt;h3 id=&quot;building&quot;&gt;&lt;a href=&quot;#building&quot; aria-label=&quot;building permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building&lt;/h3&gt;
&lt;p&gt;Build your docker image (from a &lt;em&gt;Dockerfile&lt;/em&gt; in the current directory).
Docker will output the &lt;code class=&quot;language-text&quot;&gt;Image Id&lt;/code&gt; if everything goes well. This will be used
to instantiate the &lt;em&gt;image&lt;/em&gt; later.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker build &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# equivalent to&lt;/span&gt;
docker build ./Dockerfile&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Use &lt;code class=&quot;language-text&quot;&gt;tags&lt;/code&gt; to easily reference the built image, this replaced the need to use &lt;code class=&quot;language-text&quot;&gt;Image Id&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker build -t mySuperApp &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Force docker to re-build your &lt;code class=&quot;language-text&quot;&gt;image&lt;/code&gt;. Typically this is used when you changed something
in your Dockerfile, or the base image has changed.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker build --no-cache &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Check the built images in your system&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker image &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;All the build commands output the docker &lt;code class=&quot;language-text&quot;&gt;Image id&lt;/code&gt; which is something you can use when
instantiating them into &lt;code class=&quot;language-text&quot;&gt;containers&lt;/code&gt;, but using a &lt;code class=&quot;language-text&quot;&gt;tag&lt;/code&gt; is a much more human friendly way.&lt;/p&gt;
&lt;h3 id=&quot;docker-hub&quot;&gt;&lt;a href=&quot;#docker-hub&quot; aria-label=&quot;docker hub permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Docker hub&lt;/h3&gt;
&lt;p&gt;Push your most recently built image to docker hub using the tag as identifier.
Tags can have a complex form to keep track of versions and such.
Some common patterns are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;name-of-my-app:LATEST&lt;/code&gt;: the latest version of your app, will keep changing as new versions come.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;name-of-my-app:VERSION&lt;/code&gt;: a given version of your app.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;nodejs:10&lt;/code&gt;: the base NodeJs v10 image.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker push &lt;span class=&quot;token variable&quot;&gt;$TAG&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;h3 id=&quot;running&quot;&gt;&lt;a href=&quot;#running&quot; aria-label=&quot;running permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Running&lt;/h3&gt;
&lt;p&gt;Instantiate an &lt;code class=&quot;language-text&quot;&gt;image&lt;/code&gt; either by &lt;code class=&quot;language-text&quot;&gt;Image Id&lt;/code&gt; or by &lt;code class=&quot;language-text&quot;&gt;tag&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker run &lt;span class=&quot;token variable&quot;&gt;$IMAGE_ID&lt;/span&gt;

docker run &lt;span class=&quot;token variable&quot;&gt;$TAG&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;h3 id=&quot;debugging&quot;&gt;&lt;a href=&quot;#debugging&quot; aria-label=&quot;debugging permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Debugging&lt;/h3&gt;
&lt;p&gt;These commands are very useful for debugging your container, image or
Application.&lt;/p&gt;
&lt;p&gt;Instantiate the &lt;code class=&quot;language-text&quot;&gt;image&lt;/code&gt; into a &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt; and replace the &lt;code class=&quot;language-text&quot;&gt;CMD&lt;/code&gt; in the &lt;em&gt;Dockerfile&lt;/em&gt; for
an interactive shell you can play around with. This is particularly useful when your app
fails to start, you can ssh into the container and manually start the app or make some debugging.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker run -ti &lt;span class=&quot;token variable&quot;&gt;$IMAGEID_OR_TAG&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Run a &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt; that uses your host’s (your machine) App directory and files.
This allows you to use your regular development tools such as IDEs or Text Editors
to edit your &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt;’s files in place. This is particularly useful when debugging
your App running inside a container.
&lt;code class=&quot;language-text&quot;&gt;$PWD&lt;/code&gt; is your process working directory or the directory you are currently located in your shell instance,
in this case we assume is your App’s root directory.
Your container &lt;code class=&quot;language-text&quot;&gt;WORKDIR&lt;/code&gt; should be the one you set in your &lt;em&gt;Dockerfile&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker run -ti -v &lt;span class=&quot;token environment constant&quot;&gt;$PWD&lt;/span&gt;:your-container-workdir &lt;span class=&quot;token variable&quot;&gt;$IMAGEID_OR_TAG&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; if you get an error about &lt;code class=&quot;language-text&quot;&gt;bash&lt;/code&gt; not being found then try using &lt;code class=&quot;language-text&quot;&gt;/bin/bash&lt;/code&gt;&lt;/p&gt;
&lt;/br&gt;
&lt;p&gt;SSH into an already running container.
Useful for debugging a partially running &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; or
for tweaking some details of your &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt;.
Most of the time I use the previous ones since I find them more useful.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; -ti &lt;span class=&quot;token variable&quot;&gt;$CONTAINER_ID&lt;/span&gt; /bin/bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;h3 id=&quot;managing&quot;&gt;&lt;a href=&quot;#managing&quot; aria-label=&quot;managing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Managing&lt;/h3&gt;
&lt;p&gt;What are the current running &lt;code class=&quot;language-text&quot;&gt;containers&lt;/code&gt;?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker &lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Kill a running &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt; (get the &lt;code class=&quot;language-text&quot;&gt;$CONTAINER_ID&lt;/code&gt; from the above output).&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker &lt;span class=&quot;token function&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$CONTAINER_ID&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Check a &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt;’s logs.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker logs &lt;span class=&quot;token variable&quot;&gt;$CONTAINER_ID&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Inspect a &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt; (debug information about volumes, networks, ports, etc about a given container).
In this case we get the &lt;code class=&quot;language-text&quot;&gt;container&lt;/code&gt;’s IP Address.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker inspect &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --format&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token variable&quot;&gt;$CONTAINER_ID&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/br&gt;
&lt;p&gt;Check the &lt;a href=&quot;https://docs.docker.com/engine/reference/commandline/inspect/&quot;&gt;docs&lt;/a&gt; for a more complete coverage.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;This is the basic knowledge I think every Front End developer should have as a minimum,
given the fact that Docker has such a wide adoption. The commands are commands I use
on a daily basis in my day job.&lt;/p&gt;
&lt;p&gt;Even if you are not a Front End developer but simply new to this technology I think
you will be able to take value (and pride) from learning the basics.&lt;/p&gt;
&lt;p&gt;There is a lot to learn about Docker and you can base your whole career specializing
on Docker and its parent discipline: DevOps.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to share React Components between Applications via NPM]]></title><description><![CDATA[Table of Contents Introduction: How to share React Components between Applications? To Inline or not to Inline Not-Inline Inline Theming…]]></description><link>https://nosleepjavascript.com/package-react-components/</link><guid isPermaLink="false">https://nosleepjavascript.com/package-react-components/</guid><pubDate>Tue, 21 Jan 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;table-of-contents&quot;&gt;&lt;a href=&quot;#table-of-contents&quot; aria-label=&quot;table of contents permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table of Contents&lt;/h2&gt;
&lt;div class=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction-how-to-share-react-components-between-applications&quot;&gt;Introduction: How to share React Components between Applications?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#to-inline-or-not-to-inline&quot;&gt;To Inline or not to Inline&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#not-inline&quot;&gt;Not-Inline&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#inline&quot;&gt;Inline&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#theming&quot;&gt;Theming&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#regular-css-class-names&quot;&gt;Regular CSS Class Names&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#css-theme-variables&quot;&gt;CSS Theme variables&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#inline-css-through-css-in-js&quot;&gt;Inline CSS (through CSS-in-JS)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#tldr-how-to-package-and-publish-front-end-libraries-in-2020&quot;&gt;TLDR: How to package and publish Front End libraries in 2020&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#using-create-react-library&quot;&gt;Using create-react-library&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;Closing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#appendix-1-how-to-use-peer-dependencies&quot;&gt;Appendix 1: How to use Peer Dependencies&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#what-are-peer-dependencies&quot;&gt;What are Peer Dependencies?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-do-i-mark-a-dependency-as-a-peer-dependency&quot;&gt;How do I mark a dependency as a Peer Dependency?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#appendix-2-active-vs-passive-compilation&quot;&gt;Appendix 2: Active vs Passive compilation&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#passive-compilation&quot;&gt;Passive Compilation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#active-compilation&quot;&gt;Active Compilation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction-how-to-share-react-components-between-applications&quot;&gt;&lt;a href=&quot;#introduction-how-to-share-react-components-between-applications&quot; aria-label=&quot;introduction how to share react components between applications permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction: How to share React Components between Applications?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Check &lt;a href=&quot;#tldr-how-to-package-and-publish-front-end-libraries-in-2020&quot;&gt;TLDR&lt;/a&gt; if you don’t want all the
details and just want the recommended solution.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are diverse situation in which we want to create an NPM package that contains
a &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; Component with CSS and images.&lt;/p&gt;
&lt;p&gt;This situation is particularly common inside companies that want to share components,
and pieces of code in general, between apps usually inside a private NPM repository, but
it also applies when authoring Open Source software like a single Component package such as a Date Picker
or a Multi Select and also when authoring Component Libraries or UI Frameworks like &lt;a href=&quot;https://react-bootstrap.github.io/&quot;&gt;React Bootstrap&lt;/a&gt;,
&lt;a href=&quot;https://ant.design/&quot;&gt;Ant Design&lt;/a&gt;, &lt;a href=&quot;https://babeljs.io/&quot;&gt;Semantic UI&lt;/a&gt;, &lt;a href=&quot;https://material-ui.com/&quot;&gt;Material UI&lt;/a&gt;, etc (more on these later).&lt;/p&gt;
&lt;p&gt;This problem might seem simple enough but it turns out that it has a lot of nuances and trade-offs.&lt;/p&gt;
&lt;p&gt;The main challenge in packaging a &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; Component is surprisingly not Javascript,
but all the Assets that might be related to that component such as CSS, Images, SVGs and fonts.
These assets are directly related to our Javascript code via some of the following statements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;imports image from &amp;#39;./image.{png,jpg,svg}&amp;#39;&lt;/code&gt; in Javascript&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;import classNames from &amp;#39;./styles.{css,scss,less)&amp;#39;&lt;/code&gt; in Javascript&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;url(image.{png,jpg,svg})&lt;/code&gt; in CSS&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;font-family and @import&lt;/code&gt; in CSS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://webpack.js.org/&quot;&gt;Webpack&lt;/a&gt; can understand all these dependency statements via &lt;em&gt;loaders&lt;/em&gt; and completely
analyse the cross-language and cross-file-type dependency graph, which for a very simple
component might look something like this.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;            --&amp;gt; styles.css --&amp;gt; otherImage.svg
MyComponent --&amp;gt; image.svg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It turns out that there are a lot of schemes for representing this graph in a Packaged NPM module,
each with its own trade-offs. Analysing each alternative is the main purpose of this post.&lt;/p&gt;
&lt;p&gt;Unfortunately in early 2020 there is still no universal standard way of &lt;em&gt;packaging a Front End&lt;/em&gt; module with all
its assets, but a lot of progress has been made and there are actually lots of promising solutions.&lt;/p&gt;
&lt;p&gt;We are going to explore how this problem is tackled in the wild by studying
each technique and providing examples of real world, production-ready libraries that
use them and in the end of this post we are going
to recommend a particular solution to this problem based of my experience.&lt;/p&gt;
&lt;p&gt;Additionally we are going to explore how each of these packaging schemes enable
different &lt;strong&gt;Theming&lt;/strong&gt; schemes and, at the end, recommend one (&lt;em&gt;Theming&lt;/em&gt; is a way of modifying the
styles of a set of components to fit your use case i.e. changing the buttons colors in a
UI framework such as Bootstrap to fit your company’s graphics design spec).&lt;/p&gt;
&lt;p&gt;Most of this post is also applicable to any piece of Front End Javascript code that is related
to CSS, images, etc, such as &lt;a href=&quot;https://angular.io/&quot;&gt;Angular&lt;/a&gt; Components / Directives, &lt;a href=&quot;https://vuejs.org/&quot;&gt;Vue&lt;/a&gt; Components, etc.&lt;/p&gt;
&lt;h2 id=&quot;to-inline-or-not-to-inline&quot;&gt;&lt;a href=&quot;#to-inline-or-not-to-inline&quot; aria-label=&quot;to inline or not to inline permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;To Inline or not to Inline&lt;/h2&gt;
&lt;p&gt;In the context of Front End assets, inlining means to bake those assets directly
into the Javascript code (bundle) generated by our bundlers or compilers such as Webpack or &lt;a href=&quot;https://babeljs.io/&quot;&gt;Babel&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;CSS can be inlined without any third party library by using the &lt;code class=&quot;language-text&quot;&gt;style&lt;/code&gt; HTML attribute,
but this has some limitations such as not being able to use pseudo selectors like &lt;code class=&quot;language-text&quot;&gt;:hover&lt;/code&gt;
and media queries so, to enable all these regular CSS features
a third party &lt;strong&gt;CSS-in-JS&lt;/strong&gt; library is recommended such as &lt;a href=&quot;https://emotion.sh/docs/introduction&quot;&gt;Emotion&lt;/a&gt;
or &lt;a href=&quot;https://www.styled-components.com/&quot;&gt;Styled-components&lt;/a&gt; (more on this later).&lt;/p&gt;
&lt;p&gt;Images can be inlined by Webpack’s &lt;a href=&quot;https://webpack.js.org/loaders/url-loader/&quot;&gt;url-loader&lt;/a&gt; in the form of &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs&quot;&gt;Data URL&lt;/a&gt; with Base64 encoding.
SVG can be inlined by turning an &lt;code class=&quot;language-text&quot;&gt;.svg&lt;/code&gt; file into a &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; Component (An SVG file is just a regular HTML tree)
or by using Webpack’s &lt;a href=&quot;https://github.com/webpack-contrib/svg-inline-loader&quot;&gt;inline-svg-loader&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For a deeper exploration of how to deal with &lt;code class=&quot;language-text&quot;&gt;svg&lt;/code&gt; in React checkout this &lt;a href=&quot;https://medium.com/@rossbulat/working-with-svgs-in-react-d09d1602a219&quot;&gt;post&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The main advantage of inlining is that after you bundle all your code base you end up with
a single Javascript file that contains all the dependencies it needs to run, even CSS and Images.&lt;/p&gt;
&lt;p&gt;This makes it &lt;em&gt;very&lt;/em&gt; easy to package and publish to &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;NPM&lt;/a&gt; and it makes very easy
for &lt;strong&gt;Component Consumers&lt;/strong&gt; to &lt;em&gt;use&lt;/em&gt; your module.&lt;/p&gt;
&lt;p&gt;Using &lt;strong&gt;CSS-in-JS&lt;/strong&gt; libraries like &lt;a href=&quot;https://emotion.sh/docs/introduction&quot;&gt;Emotion&lt;/a&gt; or &lt;a href=&quot;https://www.styled-components.com/&quot;&gt;Styled-components&lt;/a&gt; makes up for a very
nice &lt;strong&gt;Run-Time&lt;/strong&gt; &lt;strong&gt;Theming&lt;/strong&gt; API. Since everything is Javascript, your Themes are regular Javascript
object that can be composed or broken down into parts as any other regular JS object,
and these can be altered at Run-Time, Themes can be composed, and they provide
a much simpler strategy than Build-Time CSS generated Themes like &lt;a href=&quot;https://react-bootstrap.github.io/&quot;&gt;Bootstrap&lt;/a&gt; or &lt;a href=&quot;https://ant.design/&quot;&gt;Ant Design&lt;/a&gt;.
&lt;a href=&quot;https://material-ui.com/&quot;&gt;Material UI React&lt;/a&gt; uses a Run-Time Theme via a custom &lt;strong&gt;CSS-in-JS&lt;/strong&gt; solution.&lt;/p&gt;
&lt;p&gt;Inlining is particularly useful for Component libraries or even UI Frameworks because
they tend to be mostly CSS heavy and with a couple of SVGs at most, both of which are efficiently
inlined.&lt;/p&gt;
&lt;p&gt;Images are a bit more problematic because they are inlined in &lt;a href=&quot;https://medium.com/snapp-mobile/dont-use-base64-encoded-images-on-mobile-13ddeac89d7c&quot;&gt;Base64&lt;/a&gt; making them 30% bigger.&lt;/p&gt;
&lt;p&gt;In my experience, most Component Libraries do not tend to use an overabundance
of images and if they do they usually are rather small.&lt;/p&gt;
&lt;p&gt;Most high resolution images are dynamic content that is usually dealt by
Applications and not libraries, although libraries can render images, they do not
ship with those images since they are &lt;em&gt;Content&lt;/em&gt; provided by APIs
or static files in the App.&lt;/p&gt;
&lt;p&gt;The main drawback of inlining is that you turn multiple files that can
be fetched in parallel by the browser to a single larger file that cannot,
this will become more noticeable in larger code bases such as big Component Libraries
or Applications.&lt;/p&gt;
&lt;p&gt;If you have a big enough library of components you might be able to break it
into independent chunks that can be dynamically imported by Applications,
allowing more parallelism.
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import&quot;&gt;Dynamic imports&lt;/a&gt; is a new Javascript feature that lets you express a dynamically loaded
dependency that will be &lt;em&gt;fetched&lt;/em&gt; and &lt;em&gt;interpreted&lt;/em&gt; only when needed if needed at all.
This feature allows bigger and complex applications to reduce the initial load time by
loading only what is necessary for the particular portion of the app that the user is interacting with.
This is actually not a super far fetched solution since dynamic imports
are becoming &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import&quot;&gt;widely available&lt;/a&gt; and Webpack has been making good
progress towards an easier configuration for multiple chunks.&lt;/p&gt;
&lt;h3 id=&quot;not-inline&quot;&gt;&lt;a href=&quot;#not-inline&quot; aria-label=&quot;not inline permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Not-Inline&lt;/h3&gt;
&lt;h4 id=&quot;as-component-authors&quot;&gt;&lt;a href=&quot;#as-component-authors&quot; aria-label=&quot;as component authors permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Authors&lt;/h4&gt;
&lt;p&gt;The configuration is pretty standard and you can use
already made solutions such as &lt;a href=&quot;https://www.npmjs.com/package/create-react-library&quot;&gt;create-react-library&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You will end up with a bundle made of different files.&lt;/p&gt;
&lt;p&gt;A typical output might look like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;/dist
  - bundle.js
  - bundle.css
  images/
    - dog.jpg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is what you as an Author would publish to &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;NPM&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;bundle.css&lt;/code&gt; will use the image by doing &lt;code class=&quot;language-text&quot;&gt;url(./images/dog.jpg)&lt;/code&gt;, so
both files need to be served on the following URLs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;yourSite.com/public/bundle.css&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;yourSite.com/public/images/dog.jpg&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; can be any path with a trivial length, the important part is
that they are both served from &lt;a href=&quot;https://stackoverflow.com/questions/940451/using-relative-url-in-css-file-what-location-is-it-relative-to&quot;&gt;the same path&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Aside from properly documenting how the files inside your package
relate to each other there is not much else you can do.&lt;/p&gt;
&lt;p&gt;You can also use this strategy by allowing access to your module via a CDN
(&lt;em&gt;Content Delivery Network&lt;/em&gt; use to load Javascript, CSS, etc from specialized servers, checkout &lt;a href=&quot;https://unpkg.com/&quot;&gt;UNPKG&lt;/a&gt;),
by which &lt;em&gt;Component Consumers&lt;/em&gt; can simply reference the module.&lt;/p&gt;
&lt;h4 id=&quot;as-component-consumers&quot;&gt;&lt;a href=&quot;#as-component-consumers&quot; aria-label=&quot;as component consumers permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumers&lt;/h4&gt;
&lt;p&gt;This is where this approach has a hard time providing a good Consumer experience.&lt;/p&gt;
&lt;p&gt;Consumers need to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;import module from &amp;#39;module&amp;#39;&lt;/code&gt; for Javascript, in every file that uses the module&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Import the CSS by using either:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A bundler like Webpack:&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;import &amp;quot;module.css&amp;quot;&lt;/code&gt; only once in your Application&lt;/li&gt;
&lt;li&gt;HTML link:&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;cp ./node_modules/module/module.css ./public/images/dog.jpg&lt;/code&gt;: copy the CSS file to your public directory&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;link type=&amp;quot;text/css&amp;quot; rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;public/module.css&amp;quot;&amp;gt;&lt;/code&gt;: load the CSS in your page.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Serve images at the path the module’s CSS and/or Javascript files expect them, in this case at &lt;code class=&quot;language-text&quot;&gt;./images/dog.jpg&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;cp ./node_modules/module/images/dog.jpg ./public/images/dog.jpg&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Serve &lt;code class=&quot;language-text&quot;&gt;public/images/dog.jpg&lt;/code&gt; by properly configuring your Application&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We assume that &lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; is your App’s public directory from where you serve your
static files and assets, for convenience the directory is called &lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; and the
URL path is also called &lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Notice how to &lt;em&gt;Consume&lt;/em&gt; a simple module you need to do a lot of steps and
while there are tools to automate the process such as &lt;a href=&quot;https://webpack.js.org/&quot;&gt;Webpack&lt;/a&gt;, &lt;a href=&quot;https://gruntjs.com/&quot;&gt;Grunt&lt;/a&gt;, &lt;a href=&quot;https://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt;
or a package like &lt;a href=&quot;https://www.npmjs.com/package/npm-assets&quot;&gt;npm-assets&lt;/a&gt;, the overall experience is not optimal.&lt;/p&gt;
&lt;p&gt;An obvious additional problem is potential &lt;em&gt;name conflicts&lt;/em&gt;,
for example if two libraries need to serve &lt;code class=&quot;language-text&quot;&gt;images/dog.jpg&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Component Authors&lt;/em&gt; might make the module available via a CDN and that might
remove the need to fiddle around with CSS and Images but you will need to
access the library via a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Glossary/Global_object&quot;&gt;Browser Global&lt;/a&gt; like the good old days, and by doing this
you are removing the possibility of bundling optimizations such as &lt;a href=&quot;https://webpack.js.org/guides/tree-shaking/&quot;&gt;Tree Shaking&lt;/a&gt; that
will become more and more common in the future.&lt;/p&gt;
&lt;h3 id=&quot;inline&quot;&gt;&lt;a href=&quot;#inline&quot; aria-label=&quot;inline permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Inline&lt;/h3&gt;
&lt;h4 id=&quot;as-component-authors-1&quot;&gt;&lt;a href=&quot;#as-component-authors-1&quot; aria-label=&quot;as component authors 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Authors&lt;/h4&gt;
&lt;p&gt;The Webpack configuration is about the same as with &lt;strong&gt;Not-inline&lt;/strong&gt; and
is actually not that hard and a working example
will be provided at the end of this post.&lt;/p&gt;
&lt;p&gt;You also will be able to use &lt;a href=&quot;https://www.npmjs.com/package/create-react-library&quot;&gt;create-react-library&lt;/a&gt; since it &lt;a href=&quot;https://github.com/transitive-bullshit/create-react-library/issues/46&quot;&gt;inlines by default&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The key Webpack configuration is the inclusion of &lt;a href=&quot;https://webpack.js.org/loaders/url-loader/&quot;&gt;url-loader&lt;/a&gt; to
inline images and files right into the final Javascript bundle.&lt;/p&gt;
&lt;p&gt;If you use &lt;strong&gt;CSS-in-JS&lt;/strong&gt; libraries such as &lt;a href=&quot;https://emotion.sh/docs/introduction&quot;&gt;Emotion&lt;/a&gt; or &lt;a href=&quot;https://www.styled-components.com/&quot;&gt;Styled-components&lt;/a&gt; then
you will be able to use all the CSS features, plus compose them via Javascript and the
&lt;strong&gt;Theming&lt;/strong&gt; experience will be awesome.
You can easily create a Run-Time default Theme and provide
hooks for &lt;em&gt;Component Consumers&lt;/em&gt; to easily change it at Run-Time.&lt;/p&gt;
&lt;p&gt;For larger Component Libraries you will have a greater experience with writing
and maintaining CSS. You will avoid completely some CSS exclusive problems such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Global Scope and rule collisions.&lt;/li&gt;
&lt;li&gt;Specificity (inline-styles have maximum specificity, &lt;strong&gt;CSS-in-JS&lt;/strong&gt; libraries simulate this).&lt;/li&gt;
&lt;li&gt;Style composition. I believe that regular Javascript object composition is better than CSS cascading global composition model, plus you can create a custom system that fits your team and your business logic (remember, it’s regular Javascript). You can easily publish your Themes as private NPM packages internally to shared them among Applications.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;While regular inline-styles will go a long way, you will most likely
need features that inline-styles do not provide and that regular CSS do such
as pseudo selectors like &lt;code class=&quot;language-text&quot;&gt;:hover&lt;/code&gt; and media queries.
To solve this problem and provide better Developer Experience overall is that
&lt;strong&gt;CSS-in-JS&lt;/strong&gt; exists.&lt;/p&gt;
&lt;p&gt;I recommend going for &lt;a href=&quot;https://emotion.sh/docs/introduction&quot;&gt;Emotion&lt;/a&gt; or &lt;a href=&quot;https://www.styled-components.com/&quot;&gt;Styled-components&lt;/a&gt; since they
are very mature and feature rich, have
good documentation and an active community.&lt;/p&gt;
&lt;h4 id=&quot;as-component-consumers-1&quot;&gt;&lt;a href=&quot;#as-component-consumers-1&quot; aria-label=&quot;as component consumers 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumers&lt;/h4&gt;
&lt;p&gt;Here is where the &lt;strong&gt;Inline&lt;/strong&gt; approach &lt;em&gt;shines&lt;/em&gt;.
To use a module with all its styles and assets such as images
you simply need to write a single line of code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; module &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;module&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That is all!&lt;/p&gt;
&lt;p&gt;If you want to import the module dynamically (to parallelize and defer its loading
in the client) the experience is very similar:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Inside some function or component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; module &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;module&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you have Webpack configured correctly to create chunks that can be
dynamically loaded, this is called &lt;code class=&quot;language-text&quot;&gt;Code Splitting&lt;/code&gt;, then &lt;code class=&quot;language-text&quot;&gt;module&lt;/code&gt;
will be an independent file lazy loaded, only when it is needed.&lt;/p&gt;
&lt;p&gt;Latest version of Webpack make this configuration almost trivial,
check out their &lt;a href=&quot;https://webpack.js.org/guides/code-splitting/&quot;&gt;docs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This approach also works with the &lt;em&gt;Classic Way&lt;/em&gt; of using dependencies via Browser Globals.&lt;/p&gt;
&lt;h2 id=&quot;theming&quot;&gt;&lt;a href=&quot;#theming&quot; aria-label=&quot;theming permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Theming&lt;/h2&gt;
&lt;p&gt;For Component Libraries or UI Frameworks &lt;strong&gt;Theming&lt;/strong&gt; is a &lt;em&gt;must&lt;/em&gt;. They need to provide a way
for Component Consumers to change the default look of the components to fit
their brand or their business.&lt;/p&gt;
&lt;p&gt;Let’s inspect different strategies of providing Theming and Customization hooks.&lt;/p&gt;
&lt;h3 id=&quot;regular-css-class-names&quot;&gt;&lt;a href=&quot;#regular-css-class-names&quot; aria-label=&quot;regular css class names permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Regular CSS Class Names&lt;/h3&gt;
&lt;p&gt;This approach works great for single or few component libraries but falls
very short for larger Component Libraries or UI Frameworks.&lt;/p&gt;
&lt;p&gt;The basic premise is that Consumers use well defined CSS class names
to alter the Component’s looks.&lt;/p&gt;
&lt;p&gt;This approach works only at &lt;strong&gt;Run-Time&lt;/strong&gt;.&lt;/p&gt;
&lt;h4 id=&quot;as-component-author&quot;&gt;&lt;a href=&quot;#as-component-author&quot; aria-label=&quot;as component author permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Author&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;You write regular CSS Classes (without CSS modules) and you relate them to your components via
&lt;code class=&quot;language-text&quot;&gt;className&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;You can use LESS or SASS or any other CSS preprocessor.&lt;/li&gt;
&lt;li&gt;You should use Class Names naming conventions such as &lt;a href=&quot;http://getbem.com/introduction/&quot;&gt;BEM&lt;/a&gt; or &lt;a href=&quot;http://smacss.com/&quot;&gt;SMACSS&lt;/a&gt; among others.&lt;/li&gt;
&lt;li&gt;You &lt;strong&gt;cannot&lt;/strong&gt; use CSS Modules since they generate pseudo random Class Names that cannot be used consistently by Consumers to customize or theme your components.&lt;/li&gt;
&lt;li&gt;You structure your classes carefully to allow Component Consumers to Theme or Customize your components styles by overriding some of those classes.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;as-component-consumer&quot;&gt;&lt;a href=&quot;#as-component-consumer&quot; aria-label=&quot;as component consumer permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumer&lt;/h4&gt;
&lt;p&gt;You use the Component Author provided class names to alter the component’s looks.&lt;/p&gt;
&lt;h3 id=&quot;css-theme-variables&quot;&gt;&lt;a href=&quot;#css-theme-variables&quot; aria-label=&quot;css theme variables permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;CSS Theme variables&lt;/h3&gt;
&lt;p&gt;This approach is much more robust. The main premise is that Component Authors
use a set of well defined CSS, LESS or SASS variables to derive the rest of the styles.
These variables conform the Theme. Component Consumers can alter these variables
to generate different looking themes.&lt;/p&gt;
&lt;p&gt;Examples of these are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://ant.design/&quot;&gt;AntDesing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://react-bootstrap.github.io/&quot;&gt;Bootstrap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://react.semantic-ui.com/&quot;&gt;Semantic-UI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This approach works only at &lt;strong&gt;Build-Time&lt;/strong&gt; and &lt;strong&gt;may require a build system&lt;/strong&gt;,
depending on whether you use CSS variables and target only supported browsers or
you use SASS, LESS or a transpiled version of CSS variables (i.e. using &lt;a href=&quot;https://www.npmjs.com/package/postcss-css-variables&quot;&gt;this PostCss plugin&lt;/a&gt;)&lt;/p&gt;
&lt;h4 id=&quot;as-component-authors-2&quot;&gt;&lt;a href=&quot;#as-component-authors-2&quot; aria-label=&quot;as component authors 2 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Authors&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Carefully abstract the core theme variables and derive the rest of the styles from it.&lt;/li&gt;
&lt;li&gt;Provides a build system or build system integration documentation for Component Consumers to alter theme variables and compile new stylesheets.&lt;/li&gt;
&lt;li&gt;Works with or without CSS Modules.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;as-component-consumers-2&quot;&gt;&lt;a href=&quot;#as-component-consumers-2&quot; aria-label=&quot;as component consumers 2 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumers&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;You will need to either:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;build an out of band StyleSheet with the Component Author’s provided build system ala Bootstrap or Ant Design.&lt;/li&gt;
&lt;li&gt;integrate Component’s Author build system into yours and build it in-band with the rest of your app.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Run-Time build is not possible and you must work around it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Out of band&lt;/em&gt; and &lt;em&gt;in band&lt;/em&gt; are terms I got from signal processing theory and in this case I’m using it to
describe whether you build the StyleSheet in a separate build process and codebase (out of band)
or you integrate the necessary build configurations into your own build process and codebase (in band).&lt;/p&gt;
&lt;h3 id=&quot;inline-css-through-css-in-js&quot;&gt;&lt;a href=&quot;#inline-css-through-css-in-js&quot; aria-label=&quot;inline css through css in js permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Inline CSS (through CSS-in-JS)&lt;/h3&gt;
&lt;p&gt;This approach uses Core Theme Variables defined at Run-Time and
passed through Javascript to components to alter their looks.&lt;/p&gt;
&lt;p&gt;It works well with the &lt;strong&gt;Inline&lt;/strong&gt; Paradigm&lt;/p&gt;
&lt;p&gt;This approach works at &lt;strong&gt;Run-Time&lt;/strong&gt; and does not require a build system.&lt;/p&gt;
&lt;h4 id=&quot;as-component-authors-3&quot;&gt;&lt;a href=&quot;#as-component-authors-3&quot; aria-label=&quot;as component authors 3 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Authors&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Carefully abstract the core theme variables and derive the rest of the styles from it.&lt;/li&gt;
&lt;li&gt;Use CSS-in-JS libraries such as Emotion or styled-components.&lt;/li&gt;
&lt;li&gt;Use those libraries to provide theming hooks to Component Consumers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;as-component-consumers-3&quot;&gt;&lt;a href=&quot;#as-component-consumers-3&quot; aria-label=&quot;as component consumers 3 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumers&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;You must use the same CSS-in-JS libraries that the Component Author used.&lt;/li&gt;
&lt;li&gt;You simply define regular Javascript objects with core theme variables and pass them to Components.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tldr-how-to-package-and-publish-front-end-libraries-in-2020&quot;&gt;&lt;a href=&quot;#tldr-how-to-package-and-publish-front-end-libraries-in-2020&quot; aria-label=&quot;tldr how to package and publish front end libraries in 2020 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR: How to package and publish Front End libraries in 2020&lt;/h2&gt;
&lt;p&gt;This is my ideal setup for packaging and publishing
Front End libraries such as React Components in 2020.&lt;/p&gt;
&lt;p&gt;This approach uses an Inline, Actively Compiled (see Appendix 2), Run-Time Theming model,
that uses the following technologies:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;React as the main component framework&lt;/li&gt;
&lt;li&gt;CSS-in-JS via Emotion&lt;/li&gt;
&lt;li&gt;Inline CSS via &lt;strong&gt;CSS-in-JS&lt;/strong&gt; and the rest of the assets are inlined via Webpack’s &lt;code class=&quot;language-text&quot;&gt;url-loader&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Webpack as the bundler&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Check the full &lt;a href=&quot;https://github.com/franleplant/inline-react-package-example&quot;&gt;working source here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;To publish it to NPM:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;make sure you have the &lt;code class=&quot;language-text&quot;&gt;package.json#main&lt;/code&gt; file pointing to the output of your compilation, in this case &lt;code class=&quot;language-text&quot;&gt;dist/index.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;run &lt;code class=&quot;language-text&quot;&gt;npm version patch | minor | major&lt;/code&gt; to bump the version in &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; and create git tags&lt;/li&gt;
&lt;li&gt;run &lt;code class=&quot;language-text&quot;&gt;npm publish&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Make sure you publish to the right NPM repository before doing it as most of the time
companies do not want private packages to be publicly available by mistake.
Read more &lt;a href=&quot;https://docs.npmjs.com/misc/registry&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Webpack configuration&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;path&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// This is where we define the Inline magic.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// This loader will turn all .svg, .jpg and .png files&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// into something that can be inlined in the final bundle&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; fileRules &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  test&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\.(svg|jpg|png)$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  use&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      loader&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;url-loader&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// All files no matter what size&lt;/span&gt;
        limit&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Pretty standard babel configurations for modern react apps&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; jsRules &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  test&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\.jsx?$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  exclude&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;node_modules&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  use&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    loader&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;babel-loader&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      presets&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-env&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  entry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./src/index.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Will defer minifaction to Applications bundler&lt;/span&gt;
  mode&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;development&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  output&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    filename&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dist&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    libraryTarget&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;umd&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Manually tell webpack about our &quot;peerDependencies&quot;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// that should not be included in the final bundle and&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// will be provided by the Component Consumer, like an Application&lt;/span&gt;
  externals&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;react-dom&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@emotion/core&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@emotion/styled&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;emotion-theming&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  module&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    rules&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;jsRules&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fileRules&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Example Component with CSS-in-JS, inline assets and Theming&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; styled &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@emotion/styled&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; ThemeProvider &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;emotion-theming&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dog1 &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./dog.jpg&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dog2 &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./dog2.jpg&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; defaultTheme &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  colors&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    primary&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;blue&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Use regular CSS features through CSS-in-JS&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// instrumented by Emotion&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Container &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; styled&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;div&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  margin: 10px;
  padding: 10px;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
  &amp;amp; &gt; div {
    margin: 10px;
  }
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; styled&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;span&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  font-weight: bold;
  color: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;colors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;primary&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;;
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Use the image from CSS-in-JS&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Dog2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; styled&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;div&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  background: center / contain no-repeat url(&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;dog2&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;);
  width: 100px;
  height: 100px;
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Use the image from Javascript code&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Dog1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;dog1&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; width&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;100&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeProvider
      theme&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;ancestorTheme &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;theme&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ancestorTheme&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;defaultTheme&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;ancestorTheme &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Container&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          Im MyComponent&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; hi &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Name&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Name&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; and
          my color comes &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; a theme
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;br &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          Here are some pictures &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; dogs
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Dog1 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Dog2 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Container&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Component Consumer&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// In _real_ applications you would use it like this&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; MyComponent &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;my-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Theming API!&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; ThemeProvider &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;emotion-theming&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; appTheme &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  colors&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    primary&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;green&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;We are using MyComponent&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        It was Actively Compiled and now we can use it &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt;
        a Create React App Application
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* App defined theme at runtime */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeProvider theme&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;appTheme&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;MyComponent name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Luke Skywalker&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Notes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;make sure you have a single copy of &lt;code class=&quot;language-text&quot;&gt;@emotion/core&lt;/code&gt; in your final Application bundle to enable Theming. This is done by properly managing &lt;code class=&quot;language-text&quot;&gt;peerDependencies&lt;/code&gt; (more on this later).&lt;/li&gt;
&lt;li&gt;see it working in action in the linked repo.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;using-create-react-library&quot;&gt;&lt;a href=&quot;#using-create-react-library&quot; aria-label=&quot;using create react library permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Using create-react-library&lt;/h3&gt;
&lt;p&gt;We can achieve the same by using &lt;a href=&quot;https://www.npmjs.com/package/create-react-library&quot;&gt;create-react-library&lt;/a&gt;, the library
code is the same and we remove the need for manually configuring Webpack, the
output bundle is slightly different since &lt;em&gt;create-react-library&lt;/em&gt;
uses &lt;a href=&quot;https://rollupjs.org/&quot;&gt;Rollup&lt;/a&gt; instead of Webpack.&lt;/p&gt;
&lt;p&gt;Checkout the code &lt;a href=&quot;https://github.com/franleplant/inline-react-package-example-crl&quot;&gt;here&lt;/a&gt;, I am using the vanilla configurations that create-react-library
provides with one exception:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;diff&quot;&gt;&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;  url(),
&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;  url({limit: Infinity}),&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This forces everything to be inlined no matter what is its size.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Congratulations reading this far!&lt;/p&gt;
&lt;p&gt;You now know how to share code between different consumers such as Applications and
when to apply each of the studied solutions.&lt;/p&gt;
&lt;p&gt;If you have any questions let me know!&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;appendix-1-how-to-use-peer-dependencies&quot;&gt;&lt;a href=&quot;#appendix-1-how-to-use-peer-dependencies&quot; aria-label=&quot;appendix 1 how to use peer dependencies permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Appendix 1: How to use Peer Dependencies&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;TODO double check how we are handling externals&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As a &lt;strong&gt;Component Author&lt;/strong&gt; you need to manage &lt;strong&gt;Peer Dependencies&lt;/strong&gt; correctly to allow
&lt;strong&gt;Component Consumers&lt;/strong&gt; make the best possible final bundle avoiding duplication of dependencies
but also some libraries such as &lt;code class=&quot;language-text&quot;&gt;React&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Emotion&lt;/code&gt; don’t work correctly if there are multiple versions
of them running at the same time.&lt;/p&gt;
&lt;h3 id=&quot;what-are-peer-dependencies&quot;&gt;&lt;a href=&quot;#what-are-peer-dependencies&quot; aria-label=&quot;what are peer dependencies permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What are Peer Dependencies?&lt;/h3&gt;
&lt;p&gt;Every dependency that &lt;em&gt;might&lt;/em&gt; or &lt;em&gt;should&lt;/em&gt; be shared by multiple libraries used by a single &lt;strong&gt;Component Consumer&lt;/strong&gt;
should be treated as &lt;strong&gt;Peer Dependencies&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Examples of obvious Peer Dependencies are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;react&lt;/code&gt;: use by lots of components, breaks if there are more than one copy of it running&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;lodash&lt;/code&gt;: used by lots of libraries and components&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;redux&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@emotion/core&lt;/code&gt;: Theming breaks if you have more than one copy at the same time. &lt;a href=&quot;https://github.com/emotion-js/emotion/issues/1479&quot;&gt;ref&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;how-do-i-mark-a-dependency-as-a-peer-dependency&quot;&gt;&lt;a href=&quot;#how-do-i-mark-a-dependency-as-a-peer-dependency&quot; aria-label=&quot;how do i mark a dependency as a peer dependency permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How do I mark a dependency as a Peer Dependency?&lt;/h3&gt;
&lt;p&gt;In your &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// These are dependencies your lib expects to be present in your&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Component Consumer&apos;s context (i.e. the bundle)&lt;/span&gt;
&lt;span class=&quot;token string&quot;&gt;&quot;peerDependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;~16.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Most of the time you will need your peer dependencies&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// to be installed when testing your library.&lt;/span&gt;
&lt;span class=&quot;token string&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;~16.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;/strong&gt; make sure you are as wide as possible with the version ranges of your peer dependencies, this will
allow your package, as a Component Author, to be used without frictions in more situations.&lt;/p&gt;
&lt;p&gt;In your &lt;code class=&quot;language-text&quot;&gt;webpack.config.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// This tells webpack to not include these dependencies in the final bundle&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// since you expect them to be provided in the Component Consumer&apos;s context.&lt;/span&gt;
externals&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;appendix-2-active-vs-passive-compilation&quot;&gt;&lt;a href=&quot;#appendix-2-active-vs-passive-compilation&quot; aria-label=&quot;appendix 2 active vs passive compilation permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Appendix 2: Active vs Passive compilation&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;TLDR: Do not use &lt;em&gt;Passively compiled&lt;/em&gt; dependecies ever!&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I have seen situations in which packages are distributed raw,
without being compiled before being published, this means &lt;strong&gt;Component Authors&lt;/strong&gt;
package and distribute the raw sources like Typescript, ES2054, JSX, CSS Modules, etc.,
and rely on &lt;strong&gt;Component Consumers&lt;/strong&gt;, like Applications, to compile them usually
by configuring Webpack to also treat &lt;code class=&quot;language-text&quot;&gt;node_modules/my-raw-dependency&lt;/code&gt;
as part of the Application source.&lt;/p&gt;
&lt;p&gt;This is what I call &lt;strong&gt;Passive compilation&lt;/strong&gt; because &lt;strong&gt;Component Authors&lt;/strong&gt;
delegate their package compilation to the &lt;strong&gt;Component Consumers&lt;/strong&gt;, instead
of &lt;strong&gt;Active compilation&lt;/strong&gt; in which each package is distributed already compiled
by its &lt;strong&gt;Component Author&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Today you can go a long way with Webpack abstractions like
&lt;a href=&quot;https://create-react-app.dev/&quot;&gt;Create React App&lt;/a&gt; and &lt;a href=&quot;https://www.npmjs.com/package/create-react-library&quot;&gt;Create React Library&lt;/a&gt;, but you need to
do things in a fairly standard way and &lt;strong&gt;Passive Compilation&lt;/strong&gt; is not at all
a standard way of distributing code.&lt;/p&gt;
&lt;p&gt;Check what the team behind &lt;a href=&quot;https://github.com/facebook/create-react-app/issues/5103#issuecomment-425459196&quot;&gt;Create React App has to say about it&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It wouldn’t surprise me if other standardized high level build tools take a similar stand for
reasons we are going to talk about more later.&lt;/p&gt;
&lt;p&gt;In my experience Webpack configurations are something that most developers
do not know or do not want to touch so
&lt;strong&gt;having these sorts of abstractions inside
your company will save you a lot of trouble and maintenance,
which translates to less operation costs&lt;/strong&gt;.
These Webpack abstractions have lots of smart people working on them and
pouring their past experiences in creating something that will cover
lots of use cases you probably won’t ever think of, so you are getting even
more things for free than you anticipate.&lt;/p&gt;
&lt;p&gt;Additionally, having custom Webpack configurations creates a potential
opportunity to tightly couple other parts of your system like configurations,
Services URLs, CDNs, PORT assignment, etc. to your Webpack build and configuration
which makes it potentially brittle to any tweaks since it might affect some
tightly coupled relationship in some obscure place. Relying on standard Webpack abstractions
provides a very clear interface where you can pass configuration values and custom behaviors
effectively reducing this coupling.&lt;/p&gt;
&lt;p&gt;Finally, and with a more of a “business” look, it is much more
efficient and effective to rely on pre-made solutions for Application bundling and compilation.
Webpack and the other bundlers are hard to configure exactly right and as a company you will
need to maintain and bug fix your hand made configurations if you do them yourself.
It is effectively one more source of bugs you will have to deal with,
so rely as much as possible on third party open source solutions and for that
you &lt;em&gt;must&lt;/em&gt; avoid &lt;strong&gt;Passive Compilation&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&quot;passive-compilation&quot;&gt;&lt;a href=&quot;#passive-compilation&quot; aria-label=&quot;passive compilation permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Passive Compilation&lt;/h3&gt;
&lt;h4 id=&quot;as-component-authors-4&quot;&gt;&lt;a href=&quot;#as-component-authors-4&quot; aria-label=&quot;as component authors 4 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Authors&lt;/h4&gt;
&lt;h5 id=&quot;advantages&quot;&gt;&lt;a href=&quot;#advantages&quot; aria-label=&quot;advantages permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Advantages&lt;/h5&gt;
&lt;p&gt;It is trivial to setup since you simply distribute your raw files.
Some sort of an attempt at &lt;strong&gt;Active Compilation&lt;/strong&gt; will be required
if you want to unit test your library, but it could be a subset of the &lt;em&gt;real&lt;/em&gt;
configuration that &lt;strong&gt;Actively Compiling&lt;/strong&gt; your library for distribution would require.&lt;/p&gt;
&lt;p&gt;It removes the need to think about distributing CSS because each &lt;strong&gt;Component Consumer&lt;/strong&gt; (Applications)
will compile raw CSS modules or SASS or LESS into a single final bundle that will
include your &lt;strong&gt;Passively Compiled&lt;/strong&gt; dependency styles.&lt;/p&gt;
&lt;p&gt;Same goes for other assets such as fonts and images. Since Applications are treating
dependencies as sources then all these things will be covered by whatever
strategy the Application’s Webpack configuration uses, like &lt;code class=&quot;language-text&quot;&gt;file-loader&lt;/code&gt;, etc.&lt;/p&gt;
&lt;p&gt;Providing a &lt;strong&gt;Theming&lt;/strong&gt; API is also pretty simple as long as you have SASS or LESS
core variables that define your theme and from which the rest of the library’s
styles depend on and as long as the &lt;strong&gt;Component Consumers&lt;/strong&gt; support these type of preprocessing.&lt;/p&gt;
&lt;h5 id=&quot;disadvantages&quot;&gt;&lt;a href=&quot;#disadvantages&quot; aria-label=&quot;disadvantages permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disadvantages&lt;/h5&gt;
&lt;p&gt;You must either specify or follow a specification of what Webpack loaders,
loader configuration, CSS configuration, Babel configuration, etc. your library
requires in order for Apps to compile it successfully. You could also construct
some sort of Webpack composition hook but that can get really complicated really
soon without the proper care. An obvious problem with config composition is
conflicts with a given loader configuration, such as Babel, where the App uses
certain configurations and the library uses others. In general I would say that
the library and the consumer App cannot have too different bundling configurations
if they want to work properly together, which means of course &lt;em&gt;tight coupling&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;You have less encouragement to create a library public API and
simply let &lt;em&gt;Component Consumers&lt;/em&gt; use any of your library files
directly i.e. &lt;code class=&quot;language-text&quot;&gt;import something from &amp;#39;A/src/some/deep/nested/file.js&amp;#39;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This will make even harder to migrate your library to an &lt;strong&gt;Actively Compiled&lt;/strong&gt;
strategy down the road because &lt;em&gt;Component Consumer&lt;/em&gt; Apps will be tightly coupled
to your library’s internal file structure and providing that same per-file API
in Webpack is not trivial and has caveats (sharing code and such).&lt;/p&gt;
&lt;p&gt;By far, the &lt;strong&gt;biggest disadvantage&lt;/strong&gt; with &lt;strong&gt;Passive compilation&lt;/strong&gt; is that it will
&lt;strong&gt;infect&lt;/strong&gt; everything that it touches.
If you are creating a new package that is &lt;strong&gt;Actively compiled&lt;/strong&gt;
but it uses some of the &lt;strong&gt;Passively compiled&lt;/strong&gt; packages then BINGO,
you need to customize your package build to compile those &lt;strong&gt;passively compiled&lt;/strong&gt;
packages and you end up in a very similar situation than simply making
your new package &lt;strong&gt;Passively compiled&lt;/strong&gt;. Which locks you down into this paradigm
and all its flaws.&lt;/p&gt;
&lt;p&gt;I have been able to partially solve this situation by making those
&lt;strong&gt;Passively compiled&lt;/strong&gt; dependencies be &lt;code class=&quot;language-text&quot;&gt;peerDependencies&lt;/code&gt;, but you still need to
handle them somehow in a test environment (probably by mocking them entirely,
&lt;a href=&quot;https://jestjs.io/&quot;&gt;Jest&lt;/a&gt; does make this fairly easy)
and if you have any sort of playground or documentation page where
you display your component then BINGO again, you need to compile
&lt;strong&gt;Passively compiled&lt;/strong&gt; dependencies to make it work.&lt;/p&gt;
&lt;p&gt;If this seems crazy to you I can already tell you that I have
experienced this in my day to day Job and is super frustrating.&lt;/p&gt;
&lt;h4 id=&quot;as-component-consumers-4&quot;&gt;&lt;a href=&quot;#as-component-consumers-4&quot; aria-label=&quot;as component consumers 4 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumers&lt;/h4&gt;
&lt;h5 id=&quot;advantages-1&quot;&gt;&lt;a href=&quot;#advantages-1&quot; aria-label=&quot;advantages 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Advantages&lt;/h5&gt;
&lt;p&gt;It is fairly easy to setup with some tweaks to the inclusion paths in your Webpack config.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Theming&lt;/strong&gt; is easy because you just need to overwrite some SASS or LESS variables and your
build system will do the rest.&lt;/p&gt;
&lt;h5 id=&quot;disadvantages-1&quot;&gt;&lt;a href=&quot;#disadvantages-1&quot; aria-label=&quot;disadvantages 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disadvantages&lt;/h5&gt;
&lt;p&gt;You cannot use Webpack abstractions such as &lt;a href=&quot;https://create-react-app.dev/&quot;&gt;Create React App&lt;/a&gt;
because you always need to customize the sources you include,
and since this is a rather rare use case,
most abstractions won’t and probably should not provide this functionality.&lt;/p&gt;
&lt;h3 id=&quot;active-compilation&quot;&gt;&lt;a href=&quot;#active-compilation&quot; aria-label=&quot;active compilation permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Active Compilation&lt;/h3&gt;
&lt;h4 id=&quot;as-component-authors-5&quot;&gt;&lt;a href=&quot;#as-component-authors-5&quot; aria-label=&quot;as component authors 5 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Authors&lt;/h4&gt;
&lt;p&gt;You actually need to write a full Webpack configuration
to generate the bundle, but it is really not that bad (more on this later).&lt;/p&gt;
&lt;p&gt;Alternatively, you can use already made solutions such as &lt;a href=&quot;https://www.npmjs.com/package/create-react-library&quot;&gt;create-react-library&lt;/a&gt; et al.&lt;/p&gt;
&lt;p&gt;You will need to make decisions about how to package and distribute your
code which &lt;em&gt;is&lt;/em&gt; exactly the main point of this post.&lt;/p&gt;
&lt;h4 id=&quot;as-component-consumers-5&quot;&gt;&lt;a href=&quot;#as-component-consumers-5&quot; aria-label=&quot;as component consumers 5 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;As Component Consumers&lt;/h4&gt;
&lt;p&gt;You don’t need to customize your Webpack config to use the library,
this results in simpler configuration. You can also use standard
pre-made solutions such as &lt;a href=&quot;https://create-react-app.dev/&quot;&gt;create-react-app&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Theming&lt;/strong&gt; will depend exclusively on what the &lt;em&gt;Component Author&lt;/em&gt;
sets up to be the Theming API. If a Component Author use
something like &lt;strong&gt;CSS-in-JS&lt;/strong&gt; then the experience will be pretty good.
&lt;a href=&quot;https://material-ui.com/&quot;&gt;Material-UI React&lt;/a&gt; uses this API.&lt;/p&gt;
&lt;p&gt;If the Component Author provides a build to compile custom Themes
out of band (outside your Apps build system) then it will be less
optimal in my opinion.
&lt;a href=&quot;https://ant.design/&quot;&gt;Ant Design&lt;/a&gt; and &lt;a href=&quot;https://react-bootstrap.github.io/&quot;&gt;React Bootstrap&lt;/a&gt; use this API.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using Azure Functions to create a page view counter]]></title><description><![CDATA[Introduction Since we are using Gatsby to build this site as a set of static files, there are some common functionalities that you might…]]></description><link>https://nosleepjavascript.com/page-view-counter/</link><guid isPermaLink="false">https://nosleepjavascript.com/page-view-counter/</guid><pubDate>Thu, 26 Dec 2019 22:12:03 GMT</pubDate><content:encoded>&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Since we are using &lt;a href=&quot;https://www.gatsbyjs.org/&quot;&gt;Gatsby&lt;/a&gt; to build this site as a set of static files, there are some common functionalities that you might find in dynamic sites which you will naturally be missing. However, this does not mean they cannot be implemented in some way.&lt;/p&gt;
&lt;p&gt;As a way of testing the development of a small, simple feature and some Azure offerings, we decided to try to build a page view counter for our blog posts.&lt;/p&gt;
&lt;h2 id=&quot;scope&quot;&gt;&lt;a href=&quot;#scope&quot; aria-label=&quot;scope permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Scope&lt;/h2&gt;
&lt;p&gt;The scope of this small experiment will be to build a small service that maintains the state of how many times a specific blog post (or in general, a page) was viewed. Since in our case we are building the site statically, we will be calling the service from the frontend.&lt;/p&gt;
&lt;h2 id=&quot;tech-requirements&quot;&gt;&lt;a href=&quot;#tech-requirements&quot; aria-label=&quot;tech requirements permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tech requirements&lt;/h2&gt;
&lt;p&gt;Azure provides &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/architecture/guide/technology-choices/compute-overview&quot;&gt;multiple compute solutions&lt;/a&gt;, each with its own use cases. Considering the scope, &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview&quot;&gt;Azure Functions&lt;/a&gt; sounds like a good offering. Function apps are serverless execution contexts where we can run a piece of code (the Functions themselves) in a stateless way.&lt;/p&gt;
&lt;p&gt;Since this compute platform is stateless, it means we’ll need to have a separate way of storing how many times each page was visited. Most of the full-fledged DB offerings will probably be overkill for this, so using something like &lt;a href=&quot;https://azure.microsoft.com/en-us/services/storage/tables/&quot;&gt;Azure Storage Tables&lt;/a&gt; sounds like a good idea. The light, no-schema, and cheap service is good for key-value storage, which is exactly what we need.&lt;/p&gt;
&lt;p&gt;Considering the above, what we will be using is the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An Azure account/subscription (the &lt;a href=&quot;https://azure.microsoft.com/en-us/free/&quot;&gt;free one&lt;/a&gt; will be more than enough).&lt;/li&gt;
&lt;li&gt;Azure Storage Account, to use the tables service.&lt;/li&gt;
&lt;li&gt;Azure Functions App, to deploy our function into.&lt;/li&gt;
&lt;li&gt;An IDE (for this, I will be using .NET Core C# on the free version of &lt;a href=&quot;(https://azure.microsoft.com/downloads/)&quot;&gt;Visual Studio&lt;/a&gt;, but there are &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-functions/supported-languages&quot;&gt;several offerings&lt;/a&gt; that Azure Functions support)&lt;/li&gt;
&lt;li&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local#v2&quot;&gt;Core Tools&lt;/a&gt; for Azure Functions. It comes with Visual Studio if you include the &lt;strong&gt;Azure development&lt;/strong&gt; workload when installing it.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;capacity&quot;&gt;&lt;a href=&quot;#capacity&quot; aria-label=&quot;capacity permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Capacity&lt;/h2&gt;
&lt;p&gt;These Azure services all have their own pricing plans, but as mentioned in the above section, we will be fine using the free subscription offering for the experiment. You can see which products are free and in which capacity &lt;a href=&quot;https://azure.microsoft.com/en-us/free/search#new-products&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can see that this plan includes 1,000,000 function requests per month, which is a good amount in terms of capacity. You can upgrade later if needed, but in general, it’s a cheap plan and a good way to start.&lt;/p&gt;
&lt;h2 id=&quot;building-the-service&quot;&gt;&lt;a href=&quot;#building-the-service&quot; aria-label=&quot;building the service permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building the service&lt;/h2&gt;
&lt;h3 id=&quot;overview&quot;&gt;&lt;a href=&quot;#overview&quot; aria-label=&quot;overview permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Overview&lt;/h3&gt;
&lt;p&gt;As a general guide, let’s review a brief overview of what we’ll accomplish and delve into the details as the post goes on:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;We need to create an Azure Function.&lt;/li&gt;
&lt;li&gt;As Azure Functions are stateless, we need to add a way to persist these counts. For this, we need to create an Storage Account on Azure and use the Table service to keep track of this.&lt;/li&gt;
&lt;li&gt;We’ll have to program the Azure Function that it responds to requests for page view counts (for a specific URL/post) and tracks this on Storage Tables.&lt;/li&gt;
&lt;li&gt;Lastly, we’ll have to deploy the solution.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;using-azure-functions&quot;&gt;&lt;a href=&quot;#using-azure-functions&quot; aria-label=&quot;using azure functions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Using Azure Functions&lt;/h3&gt;
&lt;p&gt;Azure Functions is a way of executing code in a &lt;a href=&quot;https://azure.microsoft.com/solutions/serverless/&quot;&gt;serverless&lt;/a&gt; manner. In a way, it lets us only worry about the code that we want to execute instead of how the code is executed:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Azure Functions is a solution for easily running small pieces of code, or “functions,” in the cloud. You can write just the code you need for the problem at hand, without worrying about a whole application or the infrastructure to run it. Functions can make development even more productive, and you can use your development language of choice, such as C#, Java, JavaScript, PowerShell, and Python. Pay only for the time your code runs and trust Azure to scale as needed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It’s similar to what AWS offers with Lambdas. Thinking about it in terms of abstractions, we can put Functions-as-a-Service a layer above Platform-as-a-service (which, in turn, finds itself above Infrastructure-as-a-Service).&lt;/p&gt;
&lt;p&gt;There are some things we need to define before writing code for our own function, but they will be explained as we go along with the creation of the project in Visual Studio.&lt;/p&gt;
&lt;p&gt;Note that you can also create the Azure Function before deploying any actual code into it on the Azure portal (or several other ways like PowerShell, Azure CLI, REST API, etc.), but it makes sense to abstract from that considering the fact that we know that the project templates that come with Visual Studio (or the core tools in general) handle everything we need to deploy our code correctly into our own Azure account.&lt;/p&gt;
&lt;p&gt;To start, we open Visual Studio and create a new project. In the Create a new project dialog box, search for functions, choose the Azure Functions template, and select Next. I’m creating the project with the name &lt;em&gt;PageViewCounter&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;At this point, we need to set up our Function implementation. Let’s review the settings we need to set and what their concepts mean:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;There’s a drop-down that contains the technologies that will host our functions. As mentioned previously, we will use &lt;em&gt;Azure Functions v2 (.NET Core)&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Functions also provide automatic ways of triggering our code, some of which communicate with other Azure Services to call the function when something happens (Queues triggers, IoT Triggers, Blob Triggers, etc.). We’ll use the &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-http-webhook?tabs=csharp&quot;&gt;&lt;strong&gt;HTTP trigger&lt;/strong&gt;&lt;/a&gt; as we want our function to trigger whenever we enter a page.&lt;/li&gt;
&lt;li&gt;Authorization level: Anonymous. We don’t need fancy ways of doing authentication for this so we’ll leave it at that for simplicity.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After creating the project, we are received with boilerplate code that does some simple processing of a request; where if the HTTP request contains a name parameter, the response will be a greeting, and otherwise the request will fail with an error message:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;Function1.cs&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token attribute&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;FunctionName&lt;/span&gt;&lt;span class=&quot;token attribute-arguments&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Function1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token return-type class-name&quot;&gt;Task&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;IActionResult&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token attribute&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpTrigger&lt;/span&gt;&lt;span class=&quot;token attribute-arguments&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AuthorizationLevel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Anonymous&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;get&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Route &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpRequest&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ILogger&lt;/span&gt; log&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;LogInformation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;C# HTTP trigger function processed a request.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Query&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; requestBody &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;StreamReader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadToEndAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;dynamic&lt;/span&gt;&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; JsonConvert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;DeserializeObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;requestBody&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;?.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ActionResult&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;OkObjectResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;$&quot;Hello, &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token expression language-csharp&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;BadRequestObjectResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Please pass a name on the query string or in the request body&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let’s unpack some of the things we see here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;em&gt;[FunctionName(“Function1”)]&lt;/em&gt; attribute tells the Azure Functions app what the name of our Function is.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;[HttpTrigger(AuthorizationLevel.Anonymous, “get”, “post”, Route = null)] HttpRequest req&lt;/em&gt;: This attribute is used to define that this Function is triggered by HTTP and you can have it be triggered by this other things, as we reviewed. We are also telling it through a list of string params that the Function should respond to GETs and POSTs HTTP requests. You could change any of this at any point.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are some other files in the project that we’ll look into later.&lt;/p&gt;
&lt;p&gt;If we build and run the project, a console window opens up and gives us some information about our locally-hosted service:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Application started. Press Ctrl+C to shut down.

Http Functions:

        Function1: &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GET,POST&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; http://localhost:7071/api/Function1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we enter that URL into a browser (or even make a request to it with &lt;em&gt;curl&lt;/em&gt;) without a name parameter, it will ask us to pass a parameter name. If we do so (for instance, by entering &lt;em&gt;&lt;a href=&quot;http://localhost:7071/api/Function1?name=nacho&quot;&gt;http://localhost:7071/api/Function1?name=nacho&lt;/a&gt;&lt;/em&gt;), it will say hello pertinently.&lt;/p&gt;
&lt;p&gt;We can go ahead and make our first changes to this. We should start by naming the function something more specific. For this we can change the [&lt;em&gt;FunctionName()&lt;/em&gt;] attribute. I will name it &lt;em&gt;GetPageViewCount&lt;/em&gt; (and, to accompany the function name, I’ll rename the function file to this as well). We would also like it to respond only to &lt;strong&gt;POST&lt;/strong&gt; requests, so I will remove the &lt;em&gt;GET&lt;/em&gt; parameter in the [&lt;em&gt;HttpTrigger()&lt;/em&gt;] attribute. Lastly, we can change our code to return just “Hello!” as text for now. This is what it will look like:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;GetPageViewCount.cs&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token attribute&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;FunctionName&lt;/span&gt;&lt;span class=&quot;token attribute-arguments&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;GetPageViewCount&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token return-type class-name&quot;&gt;Task&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;IActionResult&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token attribute&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpTrigger&lt;/span&gt;&lt;span class=&quot;token attribute-arguments&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AuthorizationLevel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Anonymous&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Route &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpRequest&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ILogger&lt;/span&gt; log&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; requestBody &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;StreamReader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadToEndAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;dynamic&lt;/span&gt;&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; JsonConvert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;DeserializeObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;requestBody&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ActionResult&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;OkObjectResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we wanted, we could go ahead and publish our project by doing a right-click on the Project and selecting &lt;strong&gt;Publish&lt;/strong&gt;. Here is another thing we need to define about our service: How the pricing will be performed. The easiest way, especially if we are using the free Azure account, is to use a Consumption plan, which will give us &lt;strong&gt;1 million&lt;/strong&gt; free requests. There are some disadvantages compared to the other 2 plans (Premium and App Services):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Premium hosting has nice to have features such as perpetual warm instances (as to avoid cold starts which will make our code start with a bit of latency). However, latency is not something we care about in this case.&lt;/li&gt;
&lt;li&gt;App Service hosting makes our code run on App Service VMs, which makes it optimal if you are using that service already.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Lastly, when publishing to a consumption plan, it asks us for the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Name: The name of the plan.&lt;/li&gt;
&lt;li&gt;Subscription: After authenticating with your account, your free sub will appear here.&lt;/li&gt;
&lt;li&gt;Resource group: Just a way to group resources in Azure. All resources need to be deployed into one. You will need to create a new one if you didn’t already&lt;/li&gt;
&lt;li&gt;Location: The datacenter in which you want your Function to run.&lt;/li&gt;
&lt;li&gt;Azure Storage: The plan needs to store metadata and for this, they use a storage account. You will need to create one.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Notice that the last field is an Azure Storage Account. This is convenient for us because as we said, we will be using Storage tables and this saves us the creation of one. Let’s create the Storage Account and proceed with the publishing. A Storage Account name must be unique because it creates public endpoints through which you can access the service (e.g. &lt;em&gt;&lt;a href=&quot;https://your-storage-name.table.core.windows.net&quot;&gt;https://your-storage-name.table.core.windows.net&lt;/a&gt;&lt;/em&gt;). You are charged by the data egress and ingress, so you can create as many as you want.&lt;/p&gt;
&lt;p&gt;You can also access the &lt;a href=&quot;https://portal.azure.com/&quot;&gt;Azure Portal&lt;/a&gt;, log in and see the resource group with the resources you just created!&lt;/p&gt;
&lt;h3 id=&quot;using-azure-storage&quot;&gt;&lt;a href=&quot;#using-azure-storage&quot; aria-label=&quot;using azure storage permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Using Azure Storage&lt;/h3&gt;
&lt;p&gt;Azure Storage encompasses many services such as Blobs, Tables, Queues, Files, etc. In our case, we mentioned we will use Tables because of the easy key-value storage. We can think of a page URL as the key, and the times it was counted as the value that we want to retrieve.&lt;/p&gt;
&lt;p&gt;At this point, we want to install the Azure Storage Tables NuGet package (or the equivalent for the language you want). We are actually going to use the &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/cosmos-db/tutorial-develop-table-dotnet#install-the-required-nuget-package&quot;&gt;Cosmos DB Tables API&lt;/a&gt;, since it includes the API for accessing storage tables.
Let’s add the reference to it:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;GetPageViewCount.cs&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;Microsoft&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Azure&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Cosmos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Table&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since we already created our account, we can easily access the Tables service through our code. What we need for this is the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;strong&gt;connection string&lt;/strong&gt;: This is an authentication key that you can get &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/cosmos-db/tutorial-develop-table-dotnet#install-the-required-nuget-package&quot;&gt;from the portal&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;A &lt;strong&gt;Value&lt;/strong&gt; (view count) to store and retrieve in the tables through a &lt;strong&gt;Key&lt;/strong&gt; (URL).&lt;/li&gt;
&lt;li&gt;Code that connects and access the tables through the API package that we installed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let us review how tables store entities work.&lt;/p&gt;
&lt;h3 id=&quot;table-entities&quot;&gt;&lt;a href=&quot;#table-entities&quot; aria-label=&quot;table entities permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Table Entities&lt;/h3&gt;
&lt;p&gt;The simple way to store entities is to create a class that inherits from &lt;code class=&quot;language-text&quot;&gt;TableEntity&lt;/code&gt;. What this means is that the class will need to have two Properties: A &lt;code class=&quot;language-text&quot;&gt;PartitionKey&lt;/code&gt; and a &lt;code class=&quot;language-text&quot;&gt;RowKey&lt;/code&gt; . Both keys, combined, form the &lt;strong&gt;Key&lt;/strong&gt; through which we will &lt;strong&gt;uniquely identify our entity&lt;/strong&gt;. However, separated they serve a different purpose:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;PartitionKey&lt;/code&gt; defines the partition in which the service will store the entity:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Tables are partitioned to support load balancing across storage nodes. A table’s entities are organized by partition. A partition is a consecutive range of entities possessing the same partition key value. The partition key is a unique identifier for the partition within a given table, specified by the PartitionKey property.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;RowKey&lt;/code&gt; is a unique identifier for an entity within a given partition.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since the &lt;code class=&quot;language-text&quot;&gt;PartitionKey&lt;/code&gt; is used for load balancing, it’s important that it’s not hardcoded. For this, we can use the URL of the page in which we are counting the views. The &lt;code class=&quot;language-text&quot;&gt;RowKey&lt;/code&gt; can be hardcoded, because we are already changing the key through the use of the URL in the &lt;code class=&quot;language-text&quot;&gt;PartitionKey&lt;/code&gt;. Eventually we could have different &lt;code class=&quot;language-text&quot;&gt;RowKey&lt;/code&gt; for different scenarios, but for now it will stay as a hardcoded value. You can read more &lt;a href=&quot;https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-the-table-service-data-model&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;After that, the entity can have whichever fields we want. Since we are storing the values, this is how our class will look:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;GetPageViewCount.cs&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ViewCount&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token type-list&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;TableEntity&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ViewCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; URL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;//the partition key for load-balancing and identification&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PartitionKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; URL&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// hardcoded for identification&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RowKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;visits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// the value we want to store&lt;/span&gt;
            Count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token return-type class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;/span&gt; Count &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ViewCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;changing-our-function-to-connect-to-storage&quot;&gt;&lt;a href=&quot;#changing-our-function-to-connect-to-storage&quot; aria-label=&quot;changing our function to connect to storage permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Changing our function to connect to Storage&lt;/h3&gt;
&lt;p&gt;We now have the entity that we want to store and retrieve, so we need to connect to Storage and do precisely that. Table entities are stored in Tables which are identified with a name, so we can choose it and connect to it through a &lt;code class=&quot;language-text&quot;&gt;CloudTable&lt;/code&gt; object. In general, the logic is as follows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Connect to the Storage Account through the connection string.&lt;/li&gt;
&lt;li&gt;Create a table client through which we do transactions (inserts, updates, etc.).&lt;/li&gt;
&lt;li&gt;Get the table through its name.&lt;/li&gt;
&lt;li&gt;Execute transactions on the table.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here are the first 3 steps in code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; tableName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;viewcountertable&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; storageAccount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CloudStorageAccount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token expression language-csharp&quot;&gt;yourStorageAccountConnectionString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; tableClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; storageAccount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CreateCloudTableClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;CloudTable&lt;/span&gt; table &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tableClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetTableReference&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tableName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// we can let our code create the table if needed&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CreateIfNotExistsAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can now do transactions to the table! Let’s get the URL parameter from the body first:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;    &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; requestBody &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;StreamReader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadToEndAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;dynamic&lt;/span&gt;&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; JsonConvert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;DeserializeObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;requestBody&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; pageViewURL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;?.&lt;/span&gt;URL&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And now, we can use &lt;code class=&quot;language-text&quot;&gt;URL&lt;/code&gt; to create a &lt;code class=&quot;language-text&quot;&gt;ViewCount&lt;/code&gt; object that uses it as a key. The logic should be easy to follow but here’s a high-level overview:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Try to retrieve the &lt;code class=&quot;language-text&quot;&gt;ViewCount&lt;/code&gt; object for the URL.&lt;/li&gt;
&lt;li&gt;If it doesn’t exist, create a new &lt;code class=&quot;language-text&quot;&gt;ViewCount&lt;/code&gt; object (with count 0 by default) for that URL.&lt;/li&gt;
&lt;li&gt;Increase the view count on that object by 1.&lt;/li&gt;
&lt;li&gt;Store the updated entity.&lt;/li&gt;
&lt;li&gt;Return the view count to the function caller.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here’s what the code looks like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;// try to retrieve count for the URL&lt;/span&gt;
     &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; retrievedResult &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Execute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TableOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;Retrieve&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;ViewCount&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageViewURL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;visits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

     &lt;span class=&quot;token comment&quot;&gt;// wait for the operation and get the result into a ViewCount object&lt;/span&gt;
     &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; pageViewCount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ViewCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; retrievedResult&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

     &lt;span class=&quot;token comment&quot;&gt;// if the entity didn&apos;t exist, create a new one with count 0&lt;/span&gt;
     pageViewCount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageViewCount &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;ViewCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageViewURL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

     &lt;span class=&quot;token comment&quot;&gt;// augment the view count by one&lt;/span&gt;
     pageViewCount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Count&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

     &lt;span class=&quot;token comment&quot;&gt;// insert or replace the entity with the new count&lt;/span&gt;
     table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Execute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TableOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;InsertOrReplace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageViewCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

     &lt;span class=&quot;token comment&quot;&gt;// return the view count&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ActionResult&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;OkObjectResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageViewCount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Count&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ToString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let’s also make sure we return an error code if we don’t give a “URL” identifier to the function before trying to retrieve an entity:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageViewURL &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ActionResult&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token constructor-invocation class-name&quot;&gt;StatusCodeResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;503&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The function is now ready! Let’s make sure it works by running it locally and performing POST requests that have a “URL” parameter in the body.&lt;/p&gt;
&lt;h3 id=&quot;deploying-and-implementation&quot;&gt;&lt;a href=&quot;#deploying-and-implementation&quot; aria-label=&quot;deploying and implementation permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Deploying and implementation&lt;/h3&gt;
&lt;p&gt;We are now ready to deploy the Azure Function. Something that you might want to make sure of, is that you do not usually want to keep any connection string in code, so we will be getting it through the &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/azure-functions/functions-how-to-use-azure-function-app-settings#settings&quot;&gt;App Settings&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre class=&quot;language-csharp&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;  &lt;span class=&quot;token comment&quot;&gt;// we will have a StorageConnectionString field in the app settings (local.settings.json files) where we store the storage account connection string&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;/span&gt; storageAccountConnectionString &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Environment&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetEnvironmentVariable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;StorageConnectionString&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The App Settings can be changed in the Azure Portal at runtime.&lt;/p&gt;
&lt;p&gt;Lastly, you can implement this on any page by creating a small script that calls into this function and gets the result. It would look something like this if it were in Javascript:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;https://pageviewcounterblog.azurewebsites.net/api/GetViewCounter/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;this-blog-post-URL&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  method&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  body&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  headers&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Success:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that this way, anyone that has access to the function endpoint can call into it. Securing the function goes beyond the scope of this post, especially because this is called in the frontend (whereas you would likely prefer to call this from the backend to authenticate properly and easily). However, something you can do pretty simply is to &lt;a href=&quot;https://www.c-sharpcorner.com/article/handling-cors-in-azure-function/&quot;&gt;add CORS policies&lt;/a&gt; to the function in order to have it be a little more restrictive.&lt;/p&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;Right now you should have a working Azure Function that connects to Azure Storage Table and stores the amount of times that a certain page was visited. And this was all for free (except if you exceed the million requests per month, but you can probably handle paying at that point)!&lt;/p&gt;
&lt;p&gt;This was meant to be a simple experiment that served as a good introduction to some Azure services, and to certain concepts related to computing in general. Plus, it shows a simple way in which you could extend your static sites through serverless computing.&lt;/p&gt;
&lt;p&gt;Feel free to review the code here: &lt;a href=&quot;https://github.com/IgnacioAmigo/PageViewCounterBlog&quot;&gt;https://github.com/IgnacioAmigo/PageViewCounterBlog&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Create a blog with Gatsby.js]]></title><description><![CDATA[Introduction In this post we are going to examine how we created this, the nosleepjavascript.com, blog
(the one that you are currently…]]></description><link>https://nosleepjavascript.com/gatsby-blog/</link><guid isPermaLink="false">https://nosleepjavascript.com/gatsby-blog/</guid><pubDate>Mon, 23 Dec 2019 22:12:03 GMT</pubDate><content:encoded>&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;In this post we are going to examine how we created this, the &lt;a href=&quot;https://nosleepjavascript.com&quot;&gt;nosleepjavascript.com&lt;/a&gt;, blog
(the one that you are currently reading) with Javascript and React, Gatsby as the core framework,
GitHub Pages as a hosting solution and GitHub Actions to automatically deploy when pushing to a particular branch,
which is a rudimentary CD or Continuous Delivery Solution.&lt;/p&gt;
&lt;h2 id=&quot;prerequisites&quot;&gt;&lt;a href=&quot;#prerequisites&quot; aria-label=&quot;prerequisites permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;NodeJs&lt;/a&gt; 12 (Erbium) or higher&lt;/li&gt;
&lt;li&gt;a text editor like &lt;a href=&quot;https://www.vim.org/&quot;&gt;Vim&lt;/a&gt; or an IDE like &lt;a href=&quot;https://code.visualstudio.com/&quot;&gt;Visual Studio Code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;bootstrapping-a-site-with-gatsby&quot;&gt;&lt;a href=&quot;#bootstrapping-a-site-with-gatsby&quot; aria-label=&quot;bootstrapping a site with gatsby permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bootstrapping a site with Gatsby&lt;/h2&gt;
&lt;h3 id=&quot;what-is-gatsby&quot;&gt;&lt;a href=&quot;#what-is-gatsby&quot; aria-label=&quot;what is gatsby permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is Gatsby?&lt;/h3&gt;
&lt;p&gt;According to their &lt;a href=&quot;https://www.gatsbyjs.org/&quot;&gt;website&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Gatsby is a free and open source framework based on React that helps developers build blazing fast websites and apps&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We wanted to do a simple Tech Blog without any fancy stuff and Blogs naturally
are pretty much static sites (i.e. they only need a backend that serves js, css, images and html static files),
so we looked for a static site generator.&lt;/p&gt;
&lt;p&gt;I had good experiences with &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; in the past,
so it was the first option we considered but we wanted to inspect the
ecosystem and see whether there were some other options available.&lt;/p&gt;
&lt;p&gt;Enter Gatsby: we have been hearing very good things about Gatsby.js so
we wanted to explore it.&lt;/p&gt;
&lt;p&gt;I usually check a couple of important aspects of open source software before
even beginning exploring it and Gatsby checked all the boxes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;excellent documentation&lt;/li&gt;
&lt;li&gt;active community&lt;/li&gt;
&lt;li&gt;wide solutions to common problems (starters, plugins, posts, etc)&lt;/li&gt;
&lt;li&gt;it is a very active project&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We performed some initial spikes and compared the time it took
to create a somewhat complete Blog with Gatsby and Jekyll and both
took us about the same time: 15 minutes.&lt;/p&gt;
&lt;p&gt;A &lt;em&gt;complete&lt;/em&gt; Blog in this context included the following capabilities:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;write posts in markdown&lt;/li&gt;
&lt;li&gt;out of the box Google Analytics integration&lt;/li&gt;
&lt;li&gt;out of the box SEO good practices (metas, titles, etc)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We finally settled in favor of Gatsby because&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it uses modern and familiar technology: Javascript, React, GraphQL, etc&lt;/li&gt;
&lt;li&gt;the plugin and theme API is much better than Jekyll’s&lt;/li&gt;
&lt;li&gt;it seemed very powerful and we wanted to explore more of it in the future&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;why-gatsby&quot;&gt;&lt;a href=&quot;#why-gatsby&quot; aria-label=&quot;why gatsby permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why Gatsby?&lt;/h3&gt;
&lt;p&gt;The things that we liked to most about Gatsby are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;themes API&lt;/strong&gt;: it is hierarchical and allows composition and easily switching in and out of different themes, contrary to Jekyll, that heavily couples the theme with the initial files skeleton and switching between themes is not at all trivial.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;flexibility&lt;/strong&gt;: one of things that amazed us and that we are currently exploring (you will probably hear more about this in future blog posts) is that Gatsby is not only for static websites, it is pretty flexible and you can even create full fledged apps with it (without runtime server side rendering and some other considerations).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;development tools&lt;/strong&gt;: the whole development workflow is very nicely polished and the GraphiQL explorer of the entire site’s data is a very nice quality of life improvement for developers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;install-gatsby&quot;&gt;&lt;a href=&quot;#install-gatsby&quot; aria-label=&quot;install gatsby permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install Gatsby&lt;/h2&gt;
&lt;p&gt;We used a Gatsby &lt;em&gt;starter&lt;/em&gt; called &lt;a href=&quot;https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/&quot;&gt;gatsby-starter-blog&lt;/a&gt;
but you might be interested in other starters that are &lt;a href=&quot;https://www.gatsbyjs.org/starters/?v=2&quot;&gt;provided by the community&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Install Gatsby cli&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g gatsby-cli

&lt;span class=&quot;token comment&quot;&gt;# Create a new gatsby site using the starter-blog starter&lt;/span&gt;
gatsby new my-blog https://github.com/gatsbyjs/gatsby-starter-blog&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check the output to see how to run the app but at this point you have a working blog.&lt;/p&gt;
&lt;p&gt;These are the most relevant files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-config.js&lt;/code&gt; to edit data about your site such as author, description, titles, etc&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-config.js&lt;/code&gt; to add your Google Analytics ID&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;content/name-of-the-post/index.md&lt;/code&gt; to see how to write posts in Markdown&lt;/li&gt;
&lt;li&gt;add &lt;code class=&quot;language-text&quot;&gt;import &amp;quot;prismjs/themes/prism-tomorrow.css&amp;quot;&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;gatsby-browser.js&lt;/code&gt; to enable &lt;strong&gt;syntax highlighting&lt;/strong&gt; of code blocks. This starter uses &lt;a href=&quot;https://prismjs.com/&quot;&gt;prism.js&lt;/a&gt; but it does not add the css theme by default. Check prism.js documentation to see other themes available.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And you are done! Told you! It is super fast and easy.&lt;/p&gt;
&lt;p&gt;Useful links&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gatsbyjs.org/docs/quick-start/&quot;&gt;https://www.gatsbyjs.org/docs/quick-start/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;host-your-site-in-github-pages&quot;&gt;&lt;a href=&quot;#host-your-site-in-github-pages&quot; aria-label=&quot;host your site in github pages permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Host your site in &lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;GitHub pages is a static page hosting solution, if you are a software developer
this hosting solution is pretty near to our daily roaming places so that is why we chose it.&lt;/p&gt;
&lt;p&gt;There are tons of alternatives but if you already host your page’s code in GitHub
then this will be pretty easy to setup.&lt;/p&gt;
&lt;p&gt;Follow the instructions on &lt;a href=&quot;https://pages.github.com/&quot;&gt;the website&lt;/a&gt; to enable GitHub pages.&lt;/p&gt;
&lt;p&gt;These are the extra steps we took for this blog.&lt;/p&gt;
&lt;h3 id=&quot;1-make-code-classlanguage-textdevelopcode-your-default-branch-only-for-project-site&quot;&gt;&lt;a href=&quot;#1-make-code-classlanguage-textdevelopcode-your-default-branch-only-for-project-site&quot; aria-label=&quot;1 make code classlanguage textdevelopcode your default branch only for project site permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1 make &lt;code class=&quot;language-text&quot;&gt;develop&lt;/code&gt; your default branch (only for &lt;em&gt;project site&lt;/em&gt;)&lt;/h3&gt;
&lt;p&gt;Since this blog qualifies as a &lt;em&gt;project site&lt;/em&gt; (per repo) instead of a &lt;em&gt;user or organization site&lt;/em&gt;
we need to have the following repo branch configuration:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;develop&lt;/code&gt;: where our Gatsby code lives&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt;: where our Gatsby-generated static files for our website are stored&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These generated static files will be the ones that GitHub pages will deploy and show.&lt;/p&gt;
&lt;p&gt;Keep in mind that you will be managing two code bases, one is your Gatsby site, the code that you will
be interacting with as a developer and then we have the generated static site code that will be the one
that we serve.
Think of these two code bases as the source code and the compiled target code in traditional
compiled programming languages such as C/C++ or Rust.&lt;/p&gt;
&lt;h3 id=&quot;2-adjust-the-code-classlanguage-textpackagejsoncode-deploy-script&quot;&gt;&lt;a href=&quot;#2-adjust-the-code-classlanguage-textpackagejsoncode-deploy-script&quot; aria-label=&quot;2 adjust the code classlanguage textpackagejsoncode deploy script permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2 Adjust the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; deploy script&lt;/h3&gt;
&lt;p&gt;It should look like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby build --prefix-paths &amp;amp;&amp;amp; gh-pages -d public -b master&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;--prefix-paths&lt;/code&gt; is only useful if you are going to use the default GitHub domain: &lt;code class=&quot;language-text&quot;&gt;username.github.io/reponame&lt;/code&gt;. Remove it if you are making your site accessible from some &lt;code class=&quot;language-text&quot;&gt;domain.com&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; is a helper node package that you need to install: &lt;code class=&quot;language-text&quot;&gt;npm install --dev gh-pages&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-b master&lt;/code&gt; specifies to &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; package that you want to deploy to the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3-adjust-your-code-classlanguage-textpathprefixcode&quot;&gt;&lt;a href=&quot;#3-adjust-your-code-classlanguage-textpathprefixcode&quot; aria-label=&quot;3 adjust your code classlanguage textpathprefixcode permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3 Adjust your &lt;code class=&quot;language-text&quot;&gt;pathPrefix&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;IMPORTANT! Only do this if you are using the default GitHub domain. If you are using a custom domain,
like &lt;code class=&quot;language-text&quot;&gt;myblog.com&lt;/code&gt; you should probably leave it unset, or if you want your blog to live in a custom path
of your custom domain like &lt;code class=&quot;language-text&quot;&gt;myblog.com/custompath&lt;/code&gt; then adjust accordingly.&lt;/p&gt;
&lt;p&gt;Go to &lt;code class=&quot;language-text&quot;&gt;gatsby-config.js&lt;/code&gt; and set the top level property&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;pathPrefix&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; reponame&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;4-deploy&quot;&gt;&lt;a href=&quot;#4-deploy&quot; aria-label=&quot;4 deploy permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4 deploy!&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# make sure you commit and push your changes to develop&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; commit &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; push origin develop

&lt;span class=&quot;token comment&quot;&gt;# deploy!&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now if you go to &lt;code class=&quot;language-text&quot;&gt;username.github.io/reponame&lt;/code&gt; you should be able to navigate your site!&lt;/p&gt;
&lt;p&gt;Congratulations! Your site is live!&lt;/p&gt;
&lt;h2 id=&quot;optional-buy-a-domain-and-use-it&quot;&gt;&lt;a href=&quot;#optional-buy-a-domain-and-use-it&quot; aria-label=&quot;optional buy a domain and use it permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;[optional] Buy a domain and use it&lt;/h2&gt;
&lt;p&gt;We used &lt;code class=&quot;language-text&quot;&gt;GoDaddy&lt;/code&gt; but we have no affiliations with them and there are plenty of
domain name providers. Choose the right one for you, buy your domain and then adjust DNS accordingly.&lt;/p&gt;
&lt;h3 id=&quot;1-setup-your-dns&quot;&gt;&lt;a href=&quot;#1-setup-your-dns&quot; aria-label=&quot;1 setup your dns permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1 Setup your DNS&lt;/h3&gt;
&lt;p&gt;Most of the domain providers will let you set up the DNS records for your site. We are going to use
that to redirect to your GitHub page, set up the following records in your DNS managing tool.&lt;/p&gt;
&lt;p&gt;Read the official &lt;a href=&quot;https://help.github.com/en/github/working-with-github-pages/about-custom-domains-and-github-pages&quot;&gt;instructions&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But here is the gist:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;for apex domain&lt;/strong&gt;: create an 4 &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt; records, each with one of these IPs&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token number&quot;&gt;185.199&lt;/span&gt;.108.153
&lt;span class=&quot;token number&quot;&gt;185.199&lt;/span&gt;.109.153
&lt;span class=&quot;token number&quot;&gt;185.199&lt;/span&gt;.110.153
&lt;span class=&quot;token number&quot;&gt;185.199&lt;/span&gt;.111.153&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;for &lt;code class=&quot;language-text&quot;&gt;www.&lt;/code&gt;&lt;/strong&gt;: create a &lt;code class=&quot;language-text&quot;&gt;CNAME&lt;/code&gt; record with a key of &lt;code class=&quot;language-text&quot;&gt;www&lt;/code&gt; and a value of &lt;code class=&quot;language-text&quot;&gt;username.github.io&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You may have both without a problem.&lt;/p&gt;
&lt;h3 id=&quot;2-setup-you-cname-in-github&quot;&gt;&lt;a href=&quot;#2-setup-you-cname-in-github&quot; aria-label=&quot;2 setup you cname in github permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2 Setup you CNAME in GitHub&lt;/h3&gt;
&lt;p&gt;If you are using &lt;code class=&quot;language-text&quot;&gt;npm run deploy&lt;/code&gt; to deploy you app then go to your repo’s settings,
scroll to the bottom and add the custom domain in the &lt;strong&gt;Custom Domain&lt;/strong&gt; input.
You should add your naked or apex domain, without the &lt;code class=&quot;language-text&quot;&gt;www&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you are using GitHub actions (more on this later) then you need to add
this exact file to your source code in the &lt;code class=&quot;language-text&quot;&gt;develop&lt;/code&gt; branch,
it should be named exactly &lt;code class=&quot;language-text&quot;&gt;CNAME&lt;/code&gt; and it should contain your domain as the only line of text.&lt;/p&gt;
&lt;p&gt;CNAME&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;myblog.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Depending on your domain provider these changes in the DNS records might take
from a couple of minutes to a couple of days (in our case it was pretty fast with GoDaddy).&lt;/p&gt;
&lt;p&gt;Checkout the &lt;code class=&quot;language-text&quot;&gt;dig&lt;/code&gt; linux/unix command to diagnose DNS updates (probably will do a blog post about this)&lt;/p&gt;
&lt;h2 id=&quot;deploy-automatically-with-github-actions-cd&quot;&gt;&lt;a href=&quot;#deploy-automatically-with-github-actions-cd&quot; aria-label=&quot;deploy automatically with github actions cd permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Deploy automatically with GitHub Actions (CD)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://help.github.com/en/actions/automating-your-workflow-with-github-actions&quot;&gt;GitHub Actions&lt;/a&gt; is an automation
service provided by GitHub with free tiers and quick access if you host your code in GitHub.
You may use other automation tools for this but the steps will definitely vary greatly.&lt;/p&gt;
&lt;p&gt;A bit of a glossary:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;actions: a list of steps to perform a reusable task, it accepts parameters (yes, the service is called “GitHub actions” and one of the unit of abstractions inside the service are also called “actions”).&lt;/li&gt;
&lt;li&gt;Workflow: an automation that will executed by GitHub when some event that you define happens (i.e. push to a branch). It will run a number of steps that might be actions or simple bash commands&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;1-create-a-workflow&quot;&gt;&lt;a href=&quot;#1-create-a-workflow&quot; aria-label=&quot;1 create a workflow permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1 Create a Workflow&lt;/h3&gt;
&lt;p&gt;Create the Workflow file in your &lt;code class=&quot;language-text&quot;&gt;develop&lt;/code&gt; branch at &lt;code class=&quot;language-text&quot;&gt;.github/workflows/deploy.yml&lt;/code&gt;
You can call it whatever you like as long as it is inside that directory.&lt;/p&gt;
&lt;p&gt;Add this to the file contents&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Gatsby Publish

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; develop

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest

    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v1
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; enriikke/gatsby&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;gh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@v2
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;access-token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.ACCESS_TOKEN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;deploy-branch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; master&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You may create this via the GitHub actions UI in your repo’s GitHub page.&lt;/p&gt;
&lt;p&gt;Notice we are using two actions, one is a standard action provided
by GitHub to download the repo’s code in the
automation runner (think of it as a virtual machine) and
the other one &lt;a href=&quot;https://github.com/enriikke/gatsby-gh-pages-action&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-gh-pages&lt;/code&gt;&lt;/a&gt; is a third party provided one.&lt;/p&gt;
&lt;p&gt;I inspected the code of the latter and it seemed OK but I always recommend checking third party
code before using it to avoid any potential security attacks.
In this case it is even more important because this action will have
access to an &lt;code class=&quot;language-text&quot;&gt;ACCESS_TOKEN&lt;/code&gt; that we will be creating in the next step
and that gives the script access to push to your repo.&lt;/p&gt;
&lt;p&gt;TLDR: be careful to whom you give this sort of permissions to.&lt;/p&gt;
&lt;p&gt;Please note that if you are doing this step you must have added the CNAME file to your source
as explained in the section above.&lt;/p&gt;
&lt;h3 id=&quot;2-set-up-an-access-token&quot;&gt;&lt;a href=&quot;#2-set-up-an-access-token&quot; aria-label=&quot;2 set up an access token permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2 Set up an access token&lt;/h3&gt;
&lt;p&gt;You may have noticed this line in your Workflow:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;access-token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.ACCESS_TOKEN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is telling GitHub actions to read a variable called &lt;code class=&quot;language-text&quot;&gt;ACCESS_TOKEN&lt;/code&gt; from your repo’s secrets
and pass it as a parameter named &lt;code class=&quot;language-text&quot;&gt;access-token&lt;/code&gt; to the &lt;code class=&quot;language-text&quot;&gt;enriikke/gatsby-gh-pages-action@v2&lt;/code&gt; action.&lt;/p&gt;
&lt;p&gt;This will give the action permissions to push to your master branch to deploy your code.&lt;/p&gt;
&lt;p&gt;Follow the following instructions to set up your token. Please note that the name
is important so be sure to name it &lt;code class=&quot;language-text&quot;&gt;ACCESS_TOKEN&lt;/code&gt; or if you want a different
name make sure you change the name you use in your Workflow. This is just a variable,
so treat it like so.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line&quot;&gt;create a token&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets#creating-encrypted-secrets&quot;&gt;use it in your Workflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;closing&quot;&gt;&lt;a href=&quot;#closing&quot; aria-label=&quot;closing permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Closing&lt;/h2&gt;
&lt;p&gt;At this point you will have a proper Gatsby blog deployed to the cloud.&lt;/p&gt;
&lt;p&gt;Lets put a list of things you probably want to take care before you really
consider this blog production-ready.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;setup google analytics id to analyse traffic&lt;/li&gt;
&lt;li&gt;setup HTTPS for free via settings in your GitHub repo&lt;/li&gt;
&lt;li&gt;register your site in &lt;a href=&quot;https://stackoverflow.com/questions/49073043/get-github-pages-site-found-in-google-search-results&quot;&gt;google search console&lt;/a&gt; to improve SEO&lt;/li&gt;
&lt;li&gt;add proper meta data to improve your SEO&lt;/li&gt;
&lt;li&gt;generate real content to improve SEO&lt;/li&gt;
&lt;li&gt;start writing posts!&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item></channel></rss>