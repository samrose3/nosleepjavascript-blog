<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);border:0;margin:0;}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid rgba(253, 214, 23, 0.5);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#FF00FF;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><style data-href="/styles.a03ac9cc63f55f1507aa.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.28.2"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=5c53dc1031075781fe637e715c3e316d" type="image/png"/><link rel="icon" href="/favicon.svg?v=5c53dc1031075781fe637e715c3e316d" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=5c53dc1031075781fe637e715c3e316d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=5c53dc1031075781fe637e715c3e316d"/><title data-react-helmet="true">How to share React Components between Applications via NPM | NoSleep Javascript Blog</title><meta data-react-helmet="true" name="title" content="How to share React Components between Applications via NPM"/><meta data-react-helmet="true" name="description" content="In this post we explore in detail how to share React Components which are typically made of a bundle of Javascript, CSS (styles), Images, etc. We explore how to package and bundle the code with Webpack so that it can be published and distributed via a public or private NPM repository and later consumed appropriately. We also analyze different theming strategies for larger Component Libraries and UI Frameworks. And finally we provide a recommended way of packaging your Components in a simple and very flexible way.
By franleplant"/><meta data-react-helmet="true" property="og:title" content="How to share React Components between Applications via NPM"/><meta data-react-helmet="true" property="og:description" content="In this post we explore in detail how to share React Components which are typically made of a bundle of Javascript, CSS (styles), Images, etc. We explore how to package and bundle the code with Webpack so that it can be published and distributed via a public or private NPM repository and later consumed appropriately. We also analyze different theming strategies for larger Component Libraries and UI Frameworks. And finally we provide a recommended way of packaging your Components in a simple and very flexible way.
By franleplant"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="franleplant"/><meta data-react-helmet="true" name="twitter:title" content="How to share React Components between Applications via NPM"/><meta data-react-helmet="true" name="twitter:description" content="In this post we explore in detail how to share React Components which are typically made of a bundle of Javascript, CSS (styles), Images, etc. We explore how to package and bundle the code with Webpack so that it can be published and distributed via a public or private NPM repository and later consumed appropriately. We also analyze different theming strategies for larger Component Libraries and UI Frameworks. And finally we provide a recommended way of packaging your Components in a simple and very flexible way.
By franleplant"/><script data-react-helmet="true" id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/c388336980630bd93629517cb/79c014026202565af1500f561.js");
          </script><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>            
              (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-2006751746052752",
                enable_page_level_ads: true
              });
          </script><link as="script" rel="preload" href="/webpack-runtime-04fbafd859ab94f12b33.js"/><link as="script" rel="preload" href="/styles-55e82d6ff5158c00b714.js"/><link as="script" rel="preload" href="/framework-741ade27086b2708e961.js"/><link as="script" rel="preload" href="/app-b1e139d0da4ec73b7381.js"/><link as="script" rel="preload" href="/201ad6c3f2c882b9d9cf079e4b183f9823aadb3d-8b06601edeb74dd5b1c5.js"/><link as="script" rel="preload" href="/07df214fa9a6bfa95f2aa0c4b93680dbfb4b3ad9-8b678077d6dbe8f052d8.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-13d8f6300d73de8b3055.js"/><link as="fetch" rel="preload" href="/page-data/package-react-components/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1o0b8os">.css-1o0b8os{margin-left:auto;margin-right:auto;max-width:52rem;padding:1.625rem 1.21875rem;}</style><div class="css-1o0b8os edujns40"><style data-emotion-css="h0tuly">:not(pre) > code[class*="language-"]{word-break:break-word;}.code-block-title{margin-bottom:-0.6rem;padding:0.5em 1em;font-family:Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace;background-color:black;color:white;z-index:0;border-top-left-radius:0.3em;border-top-right-radius:0.3em;}button,input[type="submit"]{background-color:#FF00FF !important;border:0;}button,input[type=submit]:hover{background-color:#FF00FF !important;}button,input{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:4px 10px;border:1px solid #ccc;outline:0 !important;border-radius:4px;box-sizing:boder-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}input:focus{border:1px solid #FF00FF !important;box-shadow:0px 0px 2px #FF00FFDE;}blockquote{margin-top:40px;margin-bottom:40px;border-left:6px solid #FDD617;background:rgba(253,214,23,0.1);padding-top:20px;padding-bottom:20px;color:rgba(0,0,0,0.8);}</style><header><style data-emotion-css="1151z2w">.css-1151z2w{margin:0;}.css-1151z2w img{max-width:25%;margin:0;}</style><h3 class="css-1151z2w e1k5ywqr0"><a href="/"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgOTYwIDQxMC44IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA5NjAgNDEwLjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggZmlsbD0iIzAxMDIwMiIgZD0iTTQ0OS40LDI0OGgtMTcuM2wtMjUuNS00NC44VjI0OGgtMTcuNHYtNzJoMTcuNGwyNS41LDQ0LjhWMTc2aDE3LjNWMjQ4eiIvPg0KCQkJPHBhdGggZmlsbD0iIzAxMDIwMiIgZD0iTTUyMS40LDIxMy41YzAsNy0xLjMsMTMuMi0zLjksMTguN2MtMi42LDUuNC02LjMsOS42LTExLjEsMTIuNWMtNC44LDIuOS0xMC4zLDQuNC0xNi40LDQuNA0KCQkJCWMtNi4xLDAtMTEuNi0xLjQtMTYuMy00LjJjLTQuOC0yLjgtOC41LTYuOS0xMS4xLTEyLjFjLTIuNy01LjItNC0xMS4zLTQuMi0xOC4xdi00LjFjMC03LjEsMS4zLTEzLjMsMy45LTE4LjcNCgkJCQljMi42LTUuNCw2LjMtOS42LDExLjEtMTIuNWM0LjgtMi45LDEwLjMtNC40LDE2LjUtNC40YzYuMSwwLDExLjUsMS41LDE2LjMsNC40YzQuOCwyLjksOC41LDcsMTEuMiwxMi40YzIuNyw1LjQsNCwxMS41LDQsMTguNA0KCQkJCVYyMTMuNXogTTUwMy44LDIxMC40YzAtNy4yLTEuMi0xMi42LTMuNi0xNi4zYy0yLjQtMy43LTUuOC01LjYtMTAuMy01LjZjLTguNywwLTEzLjMsNi41LTEzLjgsMTkuNmwwLDUuMw0KCQkJCWMwLDcuMSwxLjIsMTIuNSwzLjUsMTYuM2MyLjMsMy44LDUuOCw1LjcsMTAuNCw1LjdjNC40LDAsNy44LTEuOSwxMC4xLTUuNnMzLjYtOS4xLDMuNi0xNi4xVjIxMC40eiIvPg0KCQkJPHBhdGggZmlsbD0iIzAxMDIwMiIgZD0iTTU2Ny41LDIyOC45YzAtMi41LTAuOS00LjUtMi43LTUuOWMtMS44LTEuNC01LTIuOS05LjUtNC40Yy00LjUtMS41LTguMi0zLTExLjEtNC40DQoJCQkJYy05LjMtNC42LTE0LTEwLjktMTQtMTguOWMwLTQsMS4yLTcuNSwzLjUtMTAuNmMyLjMtMy4xLDUuNi01LjQsOS45LTcuMWM0LjMtMS43LDktMi41LDE0LjMtMi41YzUuMiwwLDkuOCwwLjksMTMuOSwyLjgNCgkJCQljNC4xLDEuOCw3LjMsNC41LDkuNiw3LjljMi4zLDMuNCwzLjQsNy4zLDMuNCwxMS43aC0xNy4zYzAtMi45LTAuOS01LjItMi43LTYuOGMtMS44LTEuNi00LjItMi40LTcuMy0yLjQNCgkJCQljLTMuMSwwLTUuNiwwLjctNy4zLDIuMWMtMS44LDEuNC0yLjcsMy4xLTIuNyw1LjJjMCwxLjgsMSwzLjUsMyw1czUuNSwzLjEsMTAuNCw0LjdjNSwxLjYsOS4xLDMuMywxMi4zLDUuMg0KCQkJCWM3LjgsNC41LDExLjcsMTAuNywxMS43LDE4LjZjMCw2LjMtMi40LDExLjItNy4xLDE0LjhjLTQuOCwzLjYtMTEuMyw1LjQtMTkuNSw1LjRjLTUuOCwwLTExLjEtMS0xNS45LTMuMQ0KCQkJCWMtNC43LTIuMS04LjMtNS0xMC43LTguNmMtMi40LTMuNi0zLjYtNy44LTMuNi0xMi42aDE3LjRjMCwzLjksMSw2LjcsMyw4LjVjMiwxLjgsNS4yLDIuNyw5LjcsMi43YzIuOSwwLDUuMS0wLjYsNi44LTEuOQ0KCQkJCUM1NjYuNywyMzIuOCw1NjcuNSwyMzEuMSw1NjcuNSwyMjguOXoiLz4NCgkJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik02MTEuMiwyMzQuNmgzMC4yVjI0OGgtNDcuNnYtNzJoMTcuNFYyMzQuNnoiLz4NCgkJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik02OTMuNCwyMTcuNGgtMjcuM3YxNy4yaDMyLjNWMjQ4aC00OS42di03Mmg0OS43djEzLjRoLTMyLjR2MTUuMmgyNy4zVjIxNy40eiIvPg0KCQkJPHBhdGggZmlsbD0iIzAxMDIwMiIgZD0iTTc1MC4xLDIxNy40aC0yNy4zdjE3LjJoMzIuM1YyNDhoLTQ5LjZ2LTcyaDQ5Ljd2MTMuNGgtMzIuNHYxNS4yaDI3LjNWMjE3LjR6Ii8+DQoJCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNNzc5LjUsMjIzLjZWMjQ4aC0xNy40di03MmgyOC44YzUuNSwwLDEwLjQsMSwxNC42LDNjNC4yLDIsNy41LDQuOSw5LjgsOC43YzIuMywzLjcsMy41LDgsMy41LDEyLjcNCgkJCQljMCw3LTIuNSwxMi42LTcuNSwxNi44Yy01LDQuMi0xMS45LDYuMy0yMC43LDYuM0g3NzkuNXogTTc3OS41LDIxMC4yaDExLjRjMy40LDAsNS45LTAuOCw3LjctMi41czIuNi00LjEsMi42LTcuMQ0KCQkJCWMwLTMuNC0wLjktNi4xLTIuNy04LjFjLTEuOC0yLTQuMy0zLTcuNC0zLjFoLTExLjZWMjEwLjJ6Ii8+DQoJCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNMzk2LjEsMjcwaDkuN3Y1MS4yYzAsNi43LTIsMTItNi4xLDE2Yy00LjEsNC05LjQsNS45LTE1LjksNS45Yy02LjYsMC0xMS45LTEuOC0xNS44LTUuMw0KCQkJCWMtMy45LTMuNS01LjgtOC42LTUuNi0xNS4zbDAuMS0wLjNoOS40YzAsNC41LDEsNy44LDMuMSwxMGMyLjEsMi4yLDUsMy4zLDguOSwzLjNjMy42LDAsNi41LTEuMyw4LjgtMy45DQoJCQkJYzIuMy0yLjYsMy40LTYuMSwzLjQtMTAuNFYyNzB6Ii8+DQoJCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNNDU4LjcsMzIzLjVoLTI3LjFsLTYuNCwxOC42aC05LjlsMjYtNzJoOC40bDI1LjQsNzJINDY1TDQ1OC43LDMyMy41eiBNNDM0LjQsMzE1LjNoMjEuNWwtMTAuNS0zMC45DQoJCQkJaC0wLjNMNDM0LjQsMzE1LjN6Ii8+DQoJCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNNTAzLjEsMzIzLjFsMS42LDZoMC4zbDEuNi02bDE4LjYtNTMuMWgxMC41bC0yNi44LDcyaC04LjRsLTI2LjgtNzJoMTAuNkw1MDMuMSwzMjMuMXoiLz4NCgkJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik01NzguOCwzMjMuNWgtMjcuMWwtNi40LDE4LjZoLTkuOWwyNi03Mmg4LjRsMjUuNCw3MmgtOS45TDU3OC44LDMyMy41eiBNNTU0LjUsMzE1LjNoMjEuNWwtMTAuNS0zMC45DQoJCQkJaC0wLjNMNTU0LjUsMzE1LjN6Ii8+DQoJCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNNjQ0LjEsMzIzLjljMC0zLjMtMS4yLTYtMy41LTguMmMtMi4zLTIuMi02LjUtNC4xLTEyLjQtNS42Yy03LjMtMS44LTEzLTQuNS0xNy4xLTgNCgkJCQljLTQuMS0zLjUtNi4yLTgtNi4yLTEzLjNjMC01LjYsMi4yLTEwLjMsNi42LTE0LjFzMTAuMi01LjYsMTcuMi01LjZjNy42LDAsMTMuNiwyLjIsMTguMSw2LjVjNC41LDQuMyw2LjcsOS4zLDYuNiwxNS4xbC0wLjEsMC4zDQoJCQkJSDY0NGMwLTQuMS0xLjQtNy41LTQuMy0xMC4xYy0yLjktMi43LTYuNS00LTExLTRjLTQuNiwwLTgsMS4xLTEwLjUsMy4zcy0zLjYsNS4xLTMuNiw4LjZjMCwzLjEsMS4zLDUuNyw0LDcuOA0KCQkJCWMyLjcsMi4xLDcsMy45LDEyLjksNS41YzcuMywxLjksMTIuOCw0LjcsMTYuNiw4LjNjMy44LDMuNyw1LjcsOC4yLDUuNywxMy42YzAsNS44LTIuMywxMC41LTYuOSwxNGMtNC42LDMuNS0xMC41LDUuMy0xNy45LDUuMw0KCQkJCWMtNywwLTEzLjEtMS45LTE4LjQtNS44Yy01LjMtMy45LTcuOS05LjEtNy43LTE1LjZsMC4xLTAuM2g5LjNjMCw0LjUsMS43LDgsNS4xLDEwLjVjMy40LDIuNSw3LjMsMy43LDExLjYsMy43DQoJCQkJYzQuNiwwLDguMy0xLDExLTMuMUM2NDIuOCwzMzAuMiw2NDQuMSwzMjcuNCw2NDQuMSwzMjMuOXoiLz4NCgkJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik03MTkuMSwzMTlsMC4xLDAuM2MwLjEsNi44LTIuMiwxMi40LTcuMSwxN2MtNC45LDQuNi0xMS4zLDYuOC0xOS4zLDYuOGMtOC4xLDAtMTQuOC0yLjktMTkuOS04LjcNCgkJCQljLTUuMS01LjgtNy43LTEzLjEtNy43LTIydi0xMi44YzAtOC45LDIuNi0xNi4yLDcuNy0yMmM1LjEtNS44LDExLjgtOC43LDE5LjktOC43YzguMSwwLDE0LjYsMi4yLDE5LjQsNi41DQoJCQkJYzQuOCw0LjMsNy4yLDEwLjEsNywxNy4ybC0wLjEsMC4zaC05LjRjMC01LTEuNS05LTQuNS0xMmMtMy0yLjktNy4yLTQuNC0xMi42LTQuNGMtNS40LDAtOS44LDIuMi0xMyw2LjYNCgkJCQljLTMuMiw0LjQtNC44LDkuOC00LjgsMTYuM3YxMi45YzAsNi42LDEuNiwxMiw0LjgsMTYuNGMzLjIsNC40LDcuNiw2LjYsMTMsNi42YzUuNCwwLDkuNi0xLjUsMTIuNi00LjRjMy0yLjksNC41LTcsNC41LTEyLjENCgkJCQlINzE5LjF6Ii8+DQoJCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNNzQxLjYsMzEwLjhWMzQyaC05Ljd2LTcyaDI0LjZjNy45LDAsMTMuOSwxLjcsMTguMSw1LjJjNC4yLDMuNSw2LjIsOC42LDYuMiwxNS4yYzAsMy43LTEsNi45LTIuOSw5LjYNCgkJCQljLTEuOSwyLjctNC43LDQuOS04LjQsNi41YzQsMS4zLDYuOCwzLjQsOC41LDYuM2MxLjcsMi45LDIuNiw2LjUsMi42LDEwLjd2Ni44YzAsMi4yLDAuMiw0LjMsMC43LDZjMC41LDEuOCwxLjQsMy4yLDIuNiw0LjR2MS4yDQoJCQkJaC0xMGMtMS4zLTEuMS0yLjEtMi44LTIuNS00LjljLTAuNC0yLjItMC41LTQuNC0wLjUtNi43di02LjZjMC0zLjktMS4xLTctMy40LTkuNHMtNS4zLTMuNi05LjItMy42SDc0MS42eiBNNzQxLjYsMzAzLjFoMTMuOQ0KCQkJCWM1LjUsMCw5LjUtMSwxMS45LTMuMXMzLjYtNS4zLDMuNi05LjZjMC00LjEtMS4yLTcuMi0zLjUtOS40Yy0yLjQtMi4yLTYtMy4zLTExLTMuM2gtMTQuOVYzMDMuMXoiLz4NCgkJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik04MDcuMSwzNDJoLTkuOHYtNzJoOS44VjM0MnoiLz4NCgkJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik04MzQuNywzMTMuMVYzNDJIODI1di03MmgyNy42YzcuNywwLDEzLjcsMiwxNy45LDUuOWM0LjMsNCw2LjQsOS4yLDYuNCwxNS42YzAsNi41LTIuMSwxMS44LTYuNCwxNS43DQoJCQkJYy00LjMsMy45LTEwLjMsNS45LTE3LjksNS45SDgzNC43eiBNODM0LjcsMzA1LjVoMTcuOGM0LjksMCw4LjUtMS4zLDEwLjktMy45YzIuNC0yLjYsMy42LTUuOSwzLjYtOS45cy0xLjItNy4zLTMuNi0xMA0KCQkJCXMtNi4xLTQtMTAuOS00aC0xNy44VjMwNS41eiIvPg0KCQkJPHBhdGggZmlsbD0iIzAxMDIwMiIgZD0iTTkzOS44LDI3Ny42SDkxNlYzNDJoLTkuN3YtNjQuNGgtMjMuNVYyNzBoNTdWMjc3LjZ6Ii8+DQoJCTwvZz4NCgk8L2c+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiMwMTAyMDIiIGQ9Ik0xMDIuNSwxNDQuN0wyNy43LDcwYy0zLjMsMy4yLTYuNiw2LjQtOS44LDkuOGw3NC43LDc0LjdDOTUuOCwxNTEuMSw5OS4xLDE0Ny44LDEwMi41LDE0NC43eiIvPg0KCQk8cGF0aCBmaWxsPSIjMDEwMjAyIiBkPSJNMTA3LjYsMTguM2MtNC4zLDEuNy04LjUsMy42LTEyLjYsNS42bDQyLjUsOTYuOWM0LjEtMiw4LjMtMy45LDEyLjYtNS41TDEwNy42LDE4LjN6Ii8+DQoJPC9nPg0KCTxjaXJjbGUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDEwMjAyIiBzdHJva2Utd2lkdGg9IjEzLjc5NDQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgY3g9IjIwNC43IiBjeT0iMjU2LjciIHI9IjEyMi40Ii8+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiNGRkQ3MDMiIGQ9Ik0yNzMuNSwxOTcuN2MtMy4yLDQuNC04LjQsNy40LTE0LjMsNy40Yy05LjcsMC0xNy42LTcuOS0xNy42LTE3LjZjMC00LjQsMS42LTguNCw0LjMtMTEuNQ0KCQkJYy0xMi4zLTYuMy0yNi4zLTkuOS00MS4xLTkuOWMtNTAsMC05MC42LDQwLjYtOTAuNiw5MC42czQwLjYsOTAuNiw5MC42LDkwLjZzOTAuNi00MC42LDkwLjYtOTAuNg0KCQkJQzI5NS4zLDIzNC4yLDI4Ny4xLDIxMy42LDI3My41LDE5Ny43eiBNMjA0LjcsMjkyLjdjLTE5LjksMC0zNi0xNi4xLTM2LTM2YzAtMTkuOSwxNi4xLTM2LDM2LTM2czM2LDE2LjEsMzYsMzYNCgkJCVMyMjQuNiwyOTIuNywyMDQuNywyOTIuN3oiLz4NCgk8L2c+DQoJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDEwMjAyIiBzdHJva2Utd2lkdGg9IjExLjAzNTUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTIwNC43LDI1Ni43Ii8+DQo8L2c+DQo8L3N2Zz4NCg==" alt="NoSleep Javascript"/></a></h3></header><main><article><header><style data-emotion-css="ykg09r">.css-ykg09r{margin-top:1.625rem;margin-bottom:0;}</style><h1 class="css-ykg09r">How to share React Components between Applications via NPM</h1><style data-emotion-css="1jp1cwv">.css-1jp1cwv{display:block;margin-bottom:1.625rem;}</style><div style="font-size:0.87055rem;line-height:1.625rem" class="css-1jp1cwv">January 21, 2020 • 25 min read<style data-emotion-css="p445hl">.css-p445hl{margin-top:10px;margin-left:-5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-p445hl e17mrjfc0"><style data-emotion-css="9dqtmz">.css-9dqtmz{box-sizing:border-box;margin:0;margin-top:5px;padding:0;color:black;line-height:1.5;display:inline-block;height:auto;margin-right:8px;padding:0 7px;font-size:12px;line-height:20px;white-space:nowrap;background:rgba(253,214,23,0.05);border:1px solid #FDD617;border-radius:4px;cursor:pointer;}.css-9dqtmz:hover{background:rgba(253,214,23,0.5);}</style><span class="css-9dqtmz e17mrjfc1">#React</span><span class="css-9dqtmz e17mrjfc1">#Javascript</span><span class="css-9dqtmz e17mrjfc1">#Typescript</span><span class="css-9dqtmz e17mrjfc1">#CSS</span><span class="css-9dqtmz e17mrjfc1">#Webpack</span><span class="css-9dqtmz e17mrjfc1">#NPM</span><span class="css-9dqtmz e17mrjfc1">#code sharing</span><span class="css-9dqtmz e17mrjfc1">#publishing</span></div></div></header><section><h2 id="table-of-contents"><a href="#table-of-contents" aria-label="table of contents permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Table of Contents</h2>
<div class="toc">
<ul>
<li><a href="#introduction-how-to-share-react-components-between-applications">Introduction: How to share React Components between Applications?</a></li>
<li>
<p><a href="#to-inline-or-not-to-inline">To Inline or not to Inline</a></p>
<ul>
<li><a href="#not-inline">Not-Inline</a></li>
<li><a href="#inline">Inline</a></li>
</ul>
</li>
<li>
<p><a href="#theming">Theming</a></p>
<ul>
<li><a href="#regular-css-class-names">Regular CSS Class Names</a></li>
<li><a href="#css-theme-variables">CSS Theme variables</a></li>
<li><a href="#inline-css-through-css-in-js">Inline CSS (through CSS-in-JS)</a></li>
</ul>
</li>
<li>
<p><a href="#tldr-how-to-package-and-publish-front-end-libraries-in-2020">TLDR: How to package and publish Front End libraries in 2020</a></p>
<ul>
<li><a href="#using-create-react-library">Using create-react-library</a></li>
</ul>
</li>
<li><a href="#closing">Closing</a></li>
<li>
<p><a href="#appendix-1-how-to-use-peer-dependencies">Appendix 1: How to use Peer Dependencies</a></p>
<ul>
<li><a href="#what-are-peer-dependencies">What are Peer Dependencies?</a></li>
<li><a href="#how-do-i-mark-a-dependency-as-a-peer-dependency">How do I mark a dependency as a Peer Dependency?</a></li>
</ul>
</li>
<li>
<p><a href="#appendix-2-active-vs-passive-compilation">Appendix 2: Active vs Passive compilation</a></p>
<ul>
<li><a href="#passive-compilation">Passive Compilation</a></li>
<li><a href="#active-compilation">Active Compilation</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="introduction-how-to-share-react-components-between-applications"><a href="#introduction-how-to-share-react-components-between-applications" aria-label="introduction how to share react components between applications permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction: How to share React Components between Applications?</h2>
<blockquote>
<p>Check <a href="#tldr-how-to-package-and-publish-front-end-libraries-in-2020">TLDR</a> if you don’t want all the
details and just want the recommended solution.</p>
</blockquote>
<p>There are diverse situation in which we want to create an NPM package that contains
a <a href="https://reactjs.org/">React</a> Component with CSS and images.</p>
<p>This situation is particularly common inside companies that want to share components,
and pieces of code in general, between apps usually inside a private NPM repository, but
it also applies when authoring Open Source software like a single Component package such as a Date Picker
or a Multi Select and also when authoring Component Libraries or UI Frameworks like <a href="https://react-bootstrap.github.io/">React Bootstrap</a>,
<a href="https://ant.design/">Ant Design</a>, <a href="https://babeljs.io/">Semantic UI</a>, <a href="https://material-ui.com/">Material UI</a>, etc (more on these later).</p>
<p>This problem might seem simple enough but it turns out that it has a lot of nuances and trade-offs.</p>
<p>The main challenge in packaging a <a href="https://reactjs.org/">React</a> Component is surprisingly not Javascript,
but all the Assets that might be related to that component such as CSS, Images, SVGs and fonts.
These assets are directly related to our Javascript code via some of the following statements:</p>
<ul>
<li><code class="language-text">imports image from &#39;./image.{png,jpg,svg}&#39;</code> in Javascript</li>
<li><code class="language-text">import classNames from &#39;./styles.{css,scss,less)&#39;</code> in Javascript</li>
<li><code class="language-text">url(image.{png,jpg,svg})</code> in CSS</li>
<li><code class="language-text">font-family and @import</code> in CSS</li>
</ul>
<p><a href="https://webpack.js.org/">Webpack</a> can understand all these dependency statements via <em>loaders</em> and completely
analyse the cross-language and cross-file-type dependency graph, which for a very simple
component might look something like this.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">            --&gt; styles.css --&gt; otherImage.svg
MyComponent --&gt; image.svg</code></pre></div>
<p>It turns out that there are a lot of schemes for representing this graph in a Packaged NPM module,
each with its own trade-offs. Analysing each alternative is the main purpose of this post.</p>
<p>Unfortunately in early 2020 there is still no universal standard way of <em>packaging a Front End</em> module with all
its assets, but a lot of progress has been made and there are actually lots of promising solutions.</p>
<p>We are going to explore how this problem is tackled in the wild by studying
each technique and providing examples of real world, production-ready libraries that
use them and in the end of this post we are going
to recommend a particular solution to this problem based of my experience.</p>
<p>Additionally we are going to explore how each of these packaging schemes enable
different <strong>Theming</strong> schemes and, at the end, recommend one (<em>Theming</em> is a way of modifying the
styles of a set of components to fit your use case i.e. changing the buttons colors in a
UI framework such as Bootstrap to fit your company’s graphics design spec).</p>
<p>Most of this post is also applicable to any piece of Front End Javascript code that is related
to CSS, images, etc, such as <a href="https://angular.io/">Angular</a> Components / Directives, <a href="https://vuejs.org/">Vue</a> Components, etc.</p>
<h2 id="to-inline-or-not-to-inline"><a href="#to-inline-or-not-to-inline" aria-label="to inline or not to inline permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>To Inline or not to Inline</h2>
<p>In the context of Front End assets, inlining means to bake those assets directly
into the Javascript code (bundle) generated by our bundlers or compilers such as Webpack or <a href="https://babeljs.io/">Babel</a>.</p>
<p>CSS can be inlined without any third party library by using the <code class="language-text">style</code> HTML attribute,
but this has some limitations such as not being able to use pseudo selectors like <code class="language-text">:hover</code>
and media queries so, to enable all these regular CSS features
a third party <strong>CSS-in-JS</strong> library is recommended such as <a href="https://emotion.sh/docs/introduction">Emotion</a>
or <a href="https://www.styled-components.com/">Styled-components</a> (more on this later).</p>
<p>Images can be inlined by Webpack’s <a href="https://webpack.js.org/loaders/url-loader/">url-loader</a> in the form of <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">Data URL</a> with Base64 encoding.
SVG can be inlined by turning an <code class="language-text">.svg</code> file into a <a href="https://reactjs.org/">React</a> Component (An SVG file is just a regular HTML tree)
or by using Webpack’s <a href="https://github.com/webpack-contrib/svg-inline-loader">inline-svg-loader</a></p>
<p>For a deeper exploration of how to deal with <code class="language-text">svg</code> in React checkout this <a href="https://medium.com/@rossbulat/working-with-svgs-in-react-d09d1602a219">post</a></p>
<p>The main advantage of inlining is that after you bundle all your code base you end up with
a single Javascript file that contains all the dependencies it needs to run, even CSS and Images.</p>
<p>This makes it <em>very</em> easy to package and publish to <a href="https://www.npmjs.com/">NPM</a> and it makes very easy
for <strong>Component Consumers</strong> to <em>use</em> your module.</p>
<p>Using <strong>CSS-in-JS</strong> libraries like <a href="https://emotion.sh/docs/introduction">Emotion</a> or <a href="https://www.styled-components.com/">Styled-components</a> makes up for a very
nice <strong>Run-Time</strong> <strong>Theming</strong> API. Since everything is Javascript, your Themes are regular Javascript
object that can be composed or broken down into parts as any other regular JS object,
and these can be altered at Run-Time, Themes can be composed, and they provide
a much simpler strategy than Build-Time CSS generated Themes like <a href="https://react-bootstrap.github.io/">Bootstrap</a> or <a href="https://ant.design/">Ant Design</a>.
<a href="https://material-ui.com/">Material UI React</a> uses a Run-Time Theme via a custom <strong>CSS-in-JS</strong> solution.</p>
<p>Inlining is particularly useful for Component libraries or even UI Frameworks because
they tend to be mostly CSS heavy and with a couple of SVGs at most, both of which are efficiently
inlined.</p>
<p>Images are a bit more problematic because they are inlined in <a href="https://medium.com/snapp-mobile/dont-use-base64-encoded-images-on-mobile-13ddeac89d7c">Base64</a> making them 30% bigger.</p>
<p>In my experience, most Component Libraries do not tend to use an overabundance
of images and if they do they usually are rather small.</p>
<p>Most high resolution images are dynamic content that is usually dealt by
Applications and not libraries, although libraries can render images, they do not
ship with those images since they are <em>Content</em> provided by APIs
or static files in the App.</p>
<p>The main drawback of inlining is that you turn multiple files that can
be fetched in parallel by the browser to a single larger file that cannot,
this will become more noticeable in larger code bases such as big Component Libraries
or Applications.</p>
<p>If you have a big enough library of components you might be able to break it
into independent chunks that can be dynamically imported by Applications,
allowing more parallelism.
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">Dynamic imports</a> is a new Javascript feature that lets you express a dynamically loaded
dependency that will be <em>fetched</em> and <em>interpreted</em> only when needed if needed at all.
This feature allows bigger and complex applications to reduce the initial load time by
loading only what is necessary for the particular portion of the app that the user is interacting with.
This is actually not a super far fetched solution since dynamic imports
are becoming <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">widely available</a> and Webpack has been making good
progress towards an easier configuration for multiple chunks.</p>
<h3 id="not-inline"><a href="#not-inline" aria-label="not inline permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Not-Inline</h3>
<h4 id="as-component-authors"><a href="#as-component-authors" aria-label="as component authors permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Authors</h4>
<p>The configuration is pretty standard and you can use
already made solutions such as <a href="https://www.npmjs.com/package/create-react-library">create-react-library</a>.</p>
<p>You will end up with a bundle made of different files.</p>
<p>A typical output might look like this:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">/dist
  - bundle.js
  - bundle.css
  images/
    - dog.jpg</code></pre></div>
<p>This is what you as an Author would publish to <a href="https://www.npmjs.com/">NPM</a>.</p>
<p><code class="language-text">bundle.css</code> will use the image by doing <code class="language-text">url(./images/dog.jpg)</code>, so
both files need to be served on the following URLs</p>
<ul>
<li><code class="language-text">yourSite.com/public/bundle.css</code></li>
<li><code class="language-text">yourSite.com/public/images/dog.jpg</code></li>
</ul>
<p><code class="language-text">public</code> can be any path with a trivial length, the important part is
that they are both served from <a href="https://stackoverflow.com/questions/940451/using-relative-url-in-css-file-what-location-is-it-relative-to">the same path</a></p>
<p>Aside from properly documenting how the files inside your package
relate to each other there is not much else you can do.</p>
<p>You can also use this strategy by allowing access to your module via a CDN
(<em>Content Delivery Network</em> use to load Javascript, CSS, etc from specialized servers, checkout <a href="https://unpkg.com/">UNPKG</a>),
by which <em>Component Consumers</em> can simply reference the module.</p>
<h4 id="as-component-consumers"><a href="#as-component-consumers" aria-label="as component consumers permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumers</h4>
<p>This is where this approach has a hard time providing a good Consumer experience.</p>
<p>Consumers need to:</p>
<ul>
<li><code class="language-text">import module from &#39;module&#39;</code> for Javascript, in every file that uses the module</li>
<li>
<p>Import the CSS by using either:</p>
<ul>
<li>A bundler like Webpack:</li>
<li><code class="language-text">import &quot;module.css&quot;</code> only once in your Application</li>
<li>HTML link:</li>
<li><code class="language-text">cp ./node_modules/module/module.css ./public/images/dog.jpg</code>: copy the CSS file to your public directory</li>
<li><code class="language-text">&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;public/module.css&quot;&gt;</code>: load the CSS in your page.</li>
</ul>
</li>
<li>
<p>Serve images at the path the module’s CSS and/or Javascript files expect them, in this case at <code class="language-text">./images/dog.jpg</code></p>
<ul>
<li><code class="language-text">cp ./node_modules/module/images/dog.jpg ./public/images/dog.jpg</code></li>
<li>Serve <code class="language-text">public/images/dog.jpg</code> by properly configuring your Application</li>
</ul>
</li>
</ul>
<p>We assume that <code class="language-text">public</code> is your App’s public directory from where you serve your
static files and assets, for convenience the directory is called <code class="language-text">public</code> and the
URL path is also called <code class="language-text">public</code>.</p>
<p>Notice how to <em>Consume</em> a simple module you need to do a lot of steps and
while there are tools to automate the process such as <a href="https://webpack.js.org/">Webpack</a>, <a href="https://gruntjs.com/">Grunt</a>, <a href="https://gulpjs.com/">Gulp</a>
or a package like <a href="https://www.npmjs.com/package/npm-assets">npm-assets</a>, the overall experience is not optimal.</p>
<p>An obvious additional problem is potential <em>name conflicts</em>,
for example if two libraries need to serve <code class="language-text">images/dog.jpg</code>.</p>
<p><em>Component Authors</em> might make the module available via a CDN and that might
remove the need to fiddle around with CSS and Images but you will need to
access the library via a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Global_object">Browser Global</a> like the good old days, and by doing this
you are removing the possibility of bundling optimizations such as <a href="https://webpack.js.org/guides/tree-shaking/">Tree Shaking</a> that
will become more and more common in the future.</p>
<h3 id="inline"><a href="#inline" aria-label="inline permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inline</h3>
<h4 id="as-component-authors-1"><a href="#as-component-authors-1" aria-label="as component authors 1 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Authors</h4>
<p>The Webpack configuration is about the same as with <strong>Not-inline</strong> and
is actually not that hard and a working example
will be provided at the end of this post.</p>
<p>You also will be able to use <a href="https://www.npmjs.com/package/create-react-library">create-react-library</a> since it <a href="https://github.com/transitive-bullshit/create-react-library/issues/46">inlines by default</a>.</p>
<p>The key Webpack configuration is the inclusion of <a href="https://webpack.js.org/loaders/url-loader/">url-loader</a> to
inline images and files right into the final Javascript bundle.</p>
<p>If you use <strong>CSS-in-JS</strong> libraries such as <a href="https://emotion.sh/docs/introduction">Emotion</a> or <a href="https://www.styled-components.com/">Styled-components</a> then
you will be able to use all the CSS features, plus compose them via Javascript and the
<strong>Theming</strong> experience will be awesome.
You can easily create a Run-Time default Theme and provide
hooks for <em>Component Consumers</em> to easily change it at Run-Time.</p>
<p>For larger Component Libraries you will have a greater experience with writing
and maintaining CSS. You will avoid completely some CSS exclusive problems such as:</p>
<ul>
<li>Global Scope and rule collisions.</li>
<li>Specificity (inline-styles have maximum specificity, <strong>CSS-in-JS</strong> libraries simulate this).</li>
<li>Style composition. I believe that regular Javascript object composition is better than CSS cascading global composition model, plus you can create a custom system that fits your team and your business logic (remember, it’s regular Javascript). You can easily publish your Themes as private NPM packages internally to shared them among Applications.</li>
</ul>
<p>While regular inline-styles will go a long way, you will most likely
need features that inline-styles do not provide and that regular CSS do such
as pseudo selectors like <code class="language-text">:hover</code> and media queries.
To solve this problem and provide better Developer Experience overall is that
<strong>CSS-in-JS</strong> exists.</p>
<p>I recommend going for <a href="https://emotion.sh/docs/introduction">Emotion</a> or <a href="https://www.styled-components.com/">Styled-components</a> since they
are very mature and feature rich, have
good documentation and an active community.</p>
<h4 id="as-component-consumers-1"><a href="#as-component-consumers-1" aria-label="as component consumers 1 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumers</h4>
<p>Here is where the <strong>Inline</strong> approach <em>shines</em>.
To use a module with all its styles and assets such as images
you simply need to write a single line of code:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> module <span class="token keyword">from</span> <span class="token string">"module"</span><span class="token punctuation">;</span></code></pre></div>
<p>That is all!</p>
<p>If you want to import the module dynamically (to parallelize and defer its loading
in the client) the experience is very similar:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Inside some function or component</span>
<span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"module"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>If you have Webpack configured correctly to create chunks that can be
dynamically loaded, this is called <code class="language-text">Code Splitting</code>, then <code class="language-text">module</code>
will be an independent file lazy loaded, only when it is needed.</p>
<p>Latest version of Webpack make this configuration almost trivial,
check out their <a href="https://webpack.js.org/guides/code-splitting/">docs</a>.</p>
<p>This approach also works with the <em>Classic Way</em> of using dependencies via Browser Globals.</p>
<h2 id="theming"><a href="#theming" aria-label="theming permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Theming</h2>
<p>For Component Libraries or UI Frameworks <strong>Theming</strong> is a <em>must</em>. They need to provide a way
for Component Consumers to change the default look of the components to fit
their brand or their business.</p>
<p>Let’s inspect different strategies of providing Theming and Customization hooks.</p>
<h3 id="regular-css-class-names"><a href="#regular-css-class-names" aria-label="regular css class names permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Regular CSS Class Names</h3>
<p>This approach works great for single or few component libraries but falls
very short for larger Component Libraries or UI Frameworks.</p>
<p>The basic premise is that Consumers use well defined CSS class names
to alter the Component’s looks.</p>
<p>This approach works only at <strong>Run-Time</strong>.</p>
<h4 id="as-component-author"><a href="#as-component-author" aria-label="as component author permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Author</h4>
<ul>
<li>You write regular CSS Classes (without CSS modules) and you relate them to your components via
<code class="language-text">className</code>.</li>
<li>You can use LESS or SASS or any other CSS preprocessor.</li>
<li>You should use Class Names naming conventions such as <a href="http://getbem.com/introduction/">BEM</a> or <a href="http://smacss.com/">SMACSS</a> among others.</li>
<li>You <strong>cannot</strong> use CSS Modules since they generate pseudo random Class Names that cannot be used consistently by Consumers to customize or theme your components.</li>
<li>You structure your classes carefully to allow Component Consumers to Theme or Customize your components styles by overriding some of those classes.</li>
</ul>
<h4 id="as-component-consumer"><a href="#as-component-consumer" aria-label="as component consumer permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumer</h4>
<p>You use the Component Author provided class names to alter the component’s looks.</p>
<h3 id="css-theme-variables"><a href="#css-theme-variables" aria-label="css theme variables permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS Theme variables</h3>
<p>This approach is much more robust. The main premise is that Component Authors
use a set of well defined CSS, LESS or SASS variables to derive the rest of the styles.
These variables conform the Theme. Component Consumers can alter these variables
to generate different looking themes.</p>
<p>Examples of these are</p>
<ul>
<li><a href="https://ant.design/">AntDesing</a></li>
<li><a href="https://react-bootstrap.github.io/">Bootstrap</a></li>
<li><a href="https://react.semantic-ui.com/">Semantic-UI</a></li>
</ul>
<p>This approach works only at <strong>Build-Time</strong> and <strong>may require a build system</strong>,
depending on whether you use CSS variables and target only supported browsers or
you use SASS, LESS or a transpiled version of CSS variables (i.e. using <a href="https://www.npmjs.com/package/postcss-css-variables">this PostCss plugin</a>)</p>
<h4 id="as-component-authors-2"><a href="#as-component-authors-2" aria-label="as component authors 2 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Authors</h4>
<ul>
<li>Carefully abstract the core theme variables and derive the rest of the styles from it.</li>
<li>Provides a build system or build system integration documentation for Component Consumers to alter theme variables and compile new stylesheets.</li>
<li>Works with or without CSS Modules.</li>
</ul>
<h4 id="as-component-consumers-2"><a href="#as-component-consumers-2" aria-label="as component consumers 2 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumers</h4>
<ul>
<li>
<p>You will need to either:</p>
<ul>
<li>build an out of band StyleSheet with the Component Author’s provided build system ala Bootstrap or Ant Design.</li>
<li>integrate Component’s Author build system into yours and build it in-band with the rest of your app.</li>
</ul>
</li>
<li>Run-Time build is not possible and you must work around it.</li>
</ul>
<p><strong>Note</strong></p>
<p><em>Out of band</em> and <em>in band</em> are terms I got from signal processing theory and in this case I’m using it to
describe whether you build the StyleSheet in a separate build process and codebase (out of band)
or you integrate the necessary build configurations into your own build process and codebase (in band).</p>
<h3 id="inline-css-through-css-in-js"><a href="#inline-css-through-css-in-js" aria-label="inline css through css in js permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inline CSS (through CSS-in-JS)</h3>
<p>This approach uses Core Theme Variables defined at Run-Time and
passed through Javascript to components to alter their looks.</p>
<p>It works well with the <strong>Inline</strong> Paradigm</p>
<p>This approach works at <strong>Run-Time</strong> and does not require a build system.</p>
<h4 id="as-component-authors-3"><a href="#as-component-authors-3" aria-label="as component authors 3 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Authors</h4>
<ul>
<li>Carefully abstract the core theme variables and derive the rest of the styles from it.</li>
<li>Use CSS-in-JS libraries such as Emotion or styled-components.</li>
<li>Use those libraries to provide theming hooks to Component Consumers.</li>
</ul>
<h4 id="as-component-consumers-3"><a href="#as-component-consumers-3" aria-label="as component consumers 3 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumers</h4>
<ul>
<li>You must use the same CSS-in-JS libraries that the Component Author used.</li>
<li>You simply define regular Javascript objects with core theme variables and pass them to Components.</li>
</ul>
<h2 id="tldr-how-to-package-and-publish-front-end-libraries-in-2020"><a href="#tldr-how-to-package-and-publish-front-end-libraries-in-2020" aria-label="tldr how to package and publish front end libraries in 2020 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TLDR: How to package and publish Front End libraries in 2020</h2>
<p>This is my ideal setup for packaging and publishing
Front End libraries such as React Components in 2020.</p>
<p>This approach uses an Inline, Actively Compiled (see Appendix 2), Run-Time Theming model,
that uses the following technologies:</p>
<ul>
<li>React as the main component framework</li>
<li>CSS-in-JS via Emotion</li>
<li>Inline CSS via <strong>CSS-in-JS</strong> and the rest of the assets are inlined via Webpack’s <code class="language-text">url-loader</code></li>
<li>Webpack as the bundler</li>
</ul>
<p>Check the full <a href="https://github.com/franleplant/inline-react-package-example">working source here</a></p>
<p>To publish it to NPM:</p>
<ul>
<li>make sure you have the <code class="language-text">package.json#main</code> file pointing to the output of your compilation, in this case <code class="language-text">dist/index.js</code></li>
<li>run <code class="language-text">npm version patch | minor | major</code> to bump the version in <code class="language-text">package.json</code> and create git tags</li>
<li>run <code class="language-text">npm publish</code></li>
</ul>
<p>Make sure you publish to the right NPM repository before doing it as most of the time
companies do not want private packages to be publicly available by mistake.
Read more <a href="https://docs.npmjs.com/misc/registry">here</a></p>
<p><strong>Webpack configuration</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This is where we define the Inline magic.</span>
<span class="token comment">// This loader will turn all .svg, .jpg and .png files</span>
<span class="token comment">// into something that can be inlined in the final bundle</span>
<span class="token keyword">const</span> fileRules <span class="token operator">=</span> <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(svg|jpg|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">"url-loader"</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// All files no matter what size</span>
        limit<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Pretty standard babel configurations for modern react apps</span>
<span class="token keyword">const</span> jsRules <span class="token operator">=</span> <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">"babel-loader"</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@babel/preset-env"</span><span class="token punctuation">,</span> <span class="token string">"@babel/preset-react"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">"./src/index.js"</span><span class="token punctuation">,</span>
  <span class="token comment">// Will defer minifaction to Applications bundler</span>
  mode<span class="token operator">:</span> <span class="token string">"development"</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"dist"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">"umd"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// Manually tell webpack about our "peerDependencies"</span>
  <span class="token comment">// that should not be included in the final bundle and</span>
  <span class="token comment">// will be provided by the Component Consumer, like an Application</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"react"</span><span class="token punctuation">,</span>
    <span class="token string">"react-dom"</span><span class="token punctuation">,</span>
    <span class="token string">"@emotion/core"</span><span class="token punctuation">,</span>
    <span class="token string">"@emotion/styled"</span><span class="token punctuation">,</span>
    <span class="token string">"emotion-theming"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>jsRules<span class="token punctuation">,</span> fileRules<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p><strong>Example Component with CSS-in-JS, inline assets and Theming</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">"@emotion/styled"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ThemeProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"emotion-theming"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> dog1 <span class="token keyword">from</span> <span class="token string">"./dog.jpg"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> dog2 <span class="token keyword">from</span> <span class="token string">"./dog2.jpg"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultTheme <span class="token operator">=</span> <span class="token punctuation">{</span>
  colors<span class="token operator">:</span> <span class="token punctuation">{</span>
    primary<span class="token operator">:</span> <span class="token string">"blue"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Use regular CSS features through CSS-in-JS</span>
<span class="token comment">// instrumented by Emotion</span>
<span class="token keyword">const</span> Container <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  margin: 10px;
  padding: 10px;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
  &amp; > div {
    margin: 10px;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Name <span class="token operator">=</span> styled<span class="token punctuation">.</span>span<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  font-weight: bold;
  color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span>theme<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>primary<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Use the image from CSS-in-JS</span>
<span class="token keyword">const</span> Dog2 <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  background: center / contain no-repeat url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dog2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">);
  width: 100px;
  height: 100px;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Use the image from Javascript code</span>
<span class="token keyword">const</span> <span class="token function-variable function">Dog1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>dog1<span class="token punctuation">}</span> width<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ThemeProvider
      theme<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ancestorTheme <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"theme"</span><span class="token punctuation">,</span> ancestorTheme<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>defaultTheme<span class="token punctuation">,</span> <span class="token operator">...</span>ancestorTheme <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">></span>
      <span class="token operator">&lt;</span>Container<span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>
          Im MyComponent<span class="token punctuation">,</span> hi <span class="token operator">&lt;</span>Name<span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Name<span class="token operator">></span><span class="token punctuation">,</span> and
          my color comes <span class="token keyword">from</span> a theme
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
          Here are some pictures <span class="token keyword">of</span> dogs
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>Dog1 <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Dog2 <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Component Consumer</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token comment">// In _real_ applications you would use it like this</span>
<span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">"my-lib"</span><span class="token punctuation">;</span>

<span class="token comment">// Theming API!</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ThemeProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"emotion-theming"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> appTheme <span class="token operator">=</span> <span class="token punctuation">{</span>
  colors<span class="token operator">:</span> <span class="token punctuation">{</span>
    primary<span class="token operator">:</span> <span class="token string">"green"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span>We are using MyComponent<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span>
        It was Actively Compiled and now we can use it <span class="token keyword">from</span>
        a Create React App Application
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token comment">/* App defined theme at runtime */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>ThemeProvider theme<span class="token operator">=</span><span class="token punctuation">{</span>appTheme<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>MyComponent name<span class="token operator">=</span><span class="token string">"Luke Skywalker"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Notes</strong></p>
<ul>
<li>make sure you have a single copy of <code class="language-text">@emotion/core</code> in your final Application bundle to enable Theming. This is done by properly managing <code class="language-text">peerDependencies</code> (more on this later).</li>
<li>see it working in action in the linked repo.</li>
</ul>
<h3 id="using-create-react-library"><a href="#using-create-react-library" aria-label="using create react library permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using create-react-library</h3>
<p>We can achieve the same by using <a href="https://www.npmjs.com/package/create-react-library">create-react-library</a>, the library
code is the same and we remove the need for manually configuring Webpack, the
output bundle is slightly different since <em>create-react-library</em>
uses <a href="https://rollupjs.org/">Rollup</a> instead of Webpack.</p>
<p>Checkout the code <a href="https://github.com/franleplant/inline-react-package-example-crl">here</a>, I am using the vanilla configurations that create-react-library
provides with one exception:</p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>  url(),
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>  url({limit: Infinity}),</span></code></pre></div>
<p>This forces everything to be inlined no matter what is its size.</p>
<h2 id="closing"><a href="#closing" aria-label="closing permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Closing</h2>
<p>Congratulations reading this far!</p>
<p>You now know how to share code between different consumers such as Applications and
when to apply each of the studied solutions.</p>
<p>If you have any questions let me know!</p>
<hr>
<h2 id="appendix-1-how-to-use-peer-dependencies"><a href="#appendix-1-how-to-use-peer-dependencies" aria-label="appendix 1 how to use peer dependencies permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Appendix 1: How to use Peer Dependencies</h2>
<blockquote>
<p>TODO double check how we are handling externals</p>
</blockquote>
<p>As a <strong>Component Author</strong> you need to manage <strong>Peer Dependencies</strong> correctly to allow
<strong>Component Consumers</strong> make the best possible final bundle avoiding duplication of dependencies
but also some libraries such as <code class="language-text">React</code> and <code class="language-text">Emotion</code> don’t work correctly if there are multiple versions
of them running at the same time.</p>
<h3 id="what-are-peer-dependencies"><a href="#what-are-peer-dependencies" aria-label="what are peer dependencies permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What are Peer Dependencies?</h3>
<p>Every dependency that <em>might</em> or <em>should</em> be shared by multiple libraries used by a single <strong>Component Consumer</strong>
should be treated as <strong>Peer Dependencies</strong>.</p>
<p>Examples of obvious Peer Dependencies are</p>
<ul>
<li><code class="language-text">react</code>: use by lots of components, breaks if there are more than one copy of it running</li>
<li><code class="language-text">lodash</code>: used by lots of libraries and components</li>
<li><code class="language-text">redux</code></li>
<li><code class="language-text">@emotion/core</code>: Theming breaks if you have more than one copy at the same time. <a href="https://github.com/emotion-js/emotion/issues/1479">ref</a></li>
</ul>
<h3 id="how-do-i-mark-a-dependency-as-a-peer-dependency"><a href="#how-do-i-mark-a-dependency-as-a-peer-dependency" aria-label="how do i mark a dependency as a peer dependency permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I mark a dependency as a Peer Dependency?</h3>
<p>In your <code class="language-text">package.json</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// These are dependencies your lib expects to be present in your</span>
<span class="token comment">// Component Consumer's context (i.e. the bundle)</span>
<span class="token string">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">"react"</span><span class="token operator">:</span> <span class="token string">"~16.0.0"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Most of the time you will need your peer dependencies</span>
<span class="token comment">// to be installed when testing your library.</span>
<span class="token string">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">"react"</span><span class="token operator">:</span> <span class="token string">"~16.0.0"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Important</strong> make sure you are as wide as possible with the version ranges of your peer dependencies, this will
allow your package, as a Component Author, to be used without frictions in more situations.</p>
<p>In your <code class="language-text">webpack.config.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// This tells webpack to not include these dependencies in the final bundle</span>
<span class="token comment">// since you expect them to be provided in the Component Consumer's context.</span>
externals<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"react"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="appendix-2-active-vs-passive-compilation"><a href="#appendix-2-active-vs-passive-compilation" aria-label="appendix 2 active vs passive compilation permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Appendix 2: Active vs Passive compilation</h2>
<blockquote>
<p><strong>TLDR: Do not use <em>Passively compiled</em> dependecies ever!</strong></p>
</blockquote>
<p>I have seen situations in which packages are distributed raw,
without being compiled before being published, this means <strong>Component Authors</strong>
package and distribute the raw sources like Typescript, ES2054, JSX, CSS Modules, etc.,
and rely on <strong>Component Consumers</strong>, like Applications, to compile them usually
by configuring Webpack to also treat <code class="language-text">node_modules/my-raw-dependency</code>
as part of the Application source.</p>
<p>This is what I call <strong>Passive compilation</strong> because <strong>Component Authors</strong>
delegate their package compilation to the <strong>Component Consumers</strong>, instead
of <strong>Active compilation</strong> in which each package is distributed already compiled
by its <strong>Component Author</strong>.</p>
<p>Today you can go a long way with Webpack abstractions like
<a href="https://create-react-app.dev/">Create React App</a> and <a href="https://www.npmjs.com/package/create-react-library">Create React Library</a>, but you need to
do things in a fairly standard way and <strong>Passive Compilation</strong> is not at all
a standard way of distributing code.</p>
<p>Check what the team behind <a href="https://github.com/facebook/create-react-app/issues/5103#issuecomment-425459196">Create React App has to say about it</a>.</p>
<p>It wouldn’t surprise me if other standardized high level build tools take a similar stand for
reasons we are going to talk about more later.</p>
<p>In my experience Webpack configurations are something that most developers
do not know or do not want to touch so
<strong>having these sorts of abstractions inside
your company will save you a lot of trouble and maintenance,
which translates to less operation costs</strong>.
These Webpack abstractions have lots of smart people working on them and
pouring their past experiences in creating something that will cover
lots of use cases you probably won’t ever think of, so you are getting even
more things for free than you anticipate.</p>
<p>Additionally, having custom Webpack configurations creates a potential
opportunity to tightly couple other parts of your system like configurations,
Services URLs, CDNs, PORT assignment, etc. to your Webpack build and configuration
which makes it potentially brittle to any tweaks since it might affect some
tightly coupled relationship in some obscure place. Relying on standard Webpack abstractions
provides a very clear interface where you can pass configuration values and custom behaviors
effectively reducing this coupling.</p>
<p>Finally, and with a more of a “business” look, it is much more
efficient and effective to rely on pre-made solutions for Application bundling and compilation.
Webpack and the other bundlers are hard to configure exactly right and as a company you will
need to maintain and bug fix your hand made configurations if you do them yourself.
It is effectively one more source of bugs you will have to deal with,
so rely as much as possible on third party open source solutions and for that
you <em>must</em> avoid <strong>Passive Compilation</strong>.</p>
<h3 id="passive-compilation"><a href="#passive-compilation" aria-label="passive compilation permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Passive Compilation</h3>
<h4 id="as-component-authors-4"><a href="#as-component-authors-4" aria-label="as component authors 4 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Authors</h4>
<h5 id="advantages"><a href="#advantages" aria-label="advantages permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advantages</h5>
<p>It is trivial to setup since you simply distribute your raw files.
Some sort of an attempt at <strong>Active Compilation</strong> will be required
if you want to unit test your library, but it could be a subset of the <em>real</em>
configuration that <strong>Actively Compiling</strong> your library for distribution would require.</p>
<p>It removes the need to think about distributing CSS because each <strong>Component Consumer</strong> (Applications)
will compile raw CSS modules or SASS or LESS into a single final bundle that will
include your <strong>Passively Compiled</strong> dependency styles.</p>
<p>Same goes for other assets such as fonts and images. Since Applications are treating
dependencies as sources then all these things will be covered by whatever
strategy the Application’s Webpack configuration uses, like <code class="language-text">file-loader</code>, etc.</p>
<p>Providing a <strong>Theming</strong> API is also pretty simple as long as you have SASS or LESS
core variables that define your theme and from which the rest of the library’s
styles depend on and as long as the <strong>Component Consumers</strong> support these type of preprocessing.</p>
<h5 id="disadvantages"><a href="#disadvantages" aria-label="disadvantages permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disadvantages</h5>
<p>You must either specify or follow a specification of what Webpack loaders,
loader configuration, CSS configuration, Babel configuration, etc. your library
requires in order for Apps to compile it successfully. You could also construct
some sort of Webpack composition hook but that can get really complicated really
soon without the proper care. An obvious problem with config composition is
conflicts with a given loader configuration, such as Babel, where the App uses
certain configurations and the library uses others. In general I would say that
the library and the consumer App cannot have too different bundling configurations
if they want to work properly together, which means of course <em>tight coupling</em>.</p>
<p>You have less encouragement to create a library public API and
simply let <em>Component Consumers</em> use any of your library files
directly i.e. <code class="language-text">import something from &#39;A/src/some/deep/nested/file.js&#39;</code>.</p>
<p>This will make even harder to migrate your library to an <strong>Actively Compiled</strong>
strategy down the road because <em>Component Consumer</em> Apps will be tightly coupled
to your library’s internal file structure and providing that same per-file API
in Webpack is not trivial and has caveats (sharing code and such).</p>
<p>By far, the <strong>biggest disadvantage</strong> with <strong>Passive compilation</strong> is that it will
<strong>infect</strong> everything that it touches.
If you are creating a new package that is <strong>Actively compiled</strong>
but it uses some of the <strong>Passively compiled</strong> packages then BINGO,
you need to customize your package build to compile those <strong>passively compiled</strong>
packages and you end up in a very similar situation than simply making
your new package <strong>Passively compiled</strong>. Which locks you down into this paradigm
and all its flaws.</p>
<p>I have been able to partially solve this situation by making those
<strong>Passively compiled</strong> dependencies be <code class="language-text">peerDependencies</code>, but you still need to
handle them somehow in a test environment (probably by mocking them entirely,
<a href="https://jestjs.io/">Jest</a> does make this fairly easy)
and if you have any sort of playground or documentation page where
you display your component then BINGO again, you need to compile
<strong>Passively compiled</strong> dependencies to make it work.</p>
<p>If this seems crazy to you I can already tell you that I have
experienced this in my day to day Job and is super frustrating.</p>
<h4 id="as-component-consumers-4"><a href="#as-component-consumers-4" aria-label="as component consumers 4 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumers</h4>
<h5 id="advantages-1"><a href="#advantages-1" aria-label="advantages 1 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advantages</h5>
<p>It is fairly easy to setup with some tweaks to the inclusion paths in your Webpack config.</p>
<p><strong>Theming</strong> is easy because you just need to overwrite some SASS or LESS variables and your
build system will do the rest.</p>
<h5 id="disadvantages-1"><a href="#disadvantages-1" aria-label="disadvantages 1 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disadvantages</h5>
<p>You cannot use Webpack abstractions such as <a href="https://create-react-app.dev/">Create React App</a>
because you always need to customize the sources you include,
and since this is a rather rare use case,
most abstractions won’t and probably should not provide this functionality.</p>
<h3 id="active-compilation"><a href="#active-compilation" aria-label="active compilation permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Active Compilation</h3>
<h4 id="as-component-authors-5"><a href="#as-component-authors-5" aria-label="as component authors 5 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Authors</h4>
<p>You actually need to write a full Webpack configuration
to generate the bundle, but it is really not that bad (more on this later).</p>
<p>Alternatively, you can use already made solutions such as <a href="https://www.npmjs.com/package/create-react-library">create-react-library</a> et al.</p>
<p>You will need to make decisions about how to package and distribute your
code which <em>is</em> exactly the main point of this post.</p>
<h4 id="as-component-consumers-5"><a href="#as-component-consumers-5" aria-label="as component consumers 5 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>As Component Consumers</h4>
<p>You don’t need to customize your Webpack config to use the library,
this results in simpler configuration. You can also use standard
pre-made solutions such as <a href="https://create-react-app.dev/">create-react-app</a></p>
<p><strong>Theming</strong> will depend exclusively on what the <em>Component Author</em>
sets up to be the Theming API. If a Component Author use
something like <strong>CSS-in-JS</strong> then the experience will be pretty good.
<a href="https://material-ui.com/">Material-UI React</a> uses this API.</p>
<p>If the Component Author provides a build to compile custom Themes
out of band (outside your Apps build system) then it will be less
optimal in my opinion.
<a href="https://ant.design/">Ant Design</a> and <a href="https://react-bootstrap.github.io/">React Bootstrap</a> use this API.</p></section><style data-emotion-css="10ckprm">.css-10ckprm{text-align:center;border:2px solid #FF00FF;border-radius:5px;margin-bottom:18px;padding:5px;}.css-10ckprm form{margin:0;}.css-10ckprm form > div{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.css-10ckprm form > div > *{margin:0px 4px;}</style><div class="css-10ckprm eosl09g0"><h3>Subscribe to our mailing list!</h3><h4>Get exclusive content, offers and become a friend!</h4><div id="mc_embed_signup"><form action="https://nosleepjavascript.us2.list-manage.com/subscribe/post?u=c388336980630bd93629517cb&amp;id=53ee07001f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group" style="display:inline-block"><label for="mce-EMAIL" style="display:none">email <span style="color:red">*</span> </label><input type="email" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="email address"/></div><div id="mce-responses" style="position:absolute"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_c388336980630bd93629517cb_53ee07001f" tabindex="-1"/></div><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></form></div></div><style data-emotion-css="97rap9">.css-97rap9{margin-bottom:1.625rem;}</style><hr class="css-97rap9"/><footer><style data-emotion-css="k6ta3s">.css-k6ta3s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:4.0625rem;}</style><div class="css-k6ta3s e1rgz5o20"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;margin-right:0.8125rem;margin-bottom:0;min-width:50px;border-radius:100%"><div aria-hidden="true" style="width:100%;padding-bottom:87.99999999999999%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACjUlEQVQ4y2P4jwr+/fsHJL9++dLT1RkbFZGWkrxy+fL379/BpZABAxr/79+/QPLyxYsWpiYqSkoaykou9naLFsz/jw2ga/7z5w+QbKitsVSVKorwWFafHuFgLCYscujgAbjRBGzesnHd9vasnwfm/D+1fH1bgaCgwKSJE+BG49QM8diL508nF8Yc6i1cVZ++tafETlf19GEibIZo/vLp/Zn5bfeWd77YNOX8guYj0+v+f/sIkcanGa5i68SqVeXxFxe2nJxVfW7LEpAwqrXYNUMUndm9dk9P/obOgukFYZeO7iFKM9DZf8GhcmDvriw/y3xvgy0tSetn9xw4fPT6tes/f/4kYDMwSJ88eRIREZ7oqDkhw7cxL8nTzc3dw9va2nbPnr3IwcaAFlTv3r3r6OgMj4i0srZ0d7KzMDU2s7T18w/MzMzOyMxdtnwlclJjQNYJJNva2wMCgyOjon39fH18/ULDwvMLivLyi2Jj41NSUpOSU65dvw63nAE5bew9cNDR1T0yJiYkNAQIAgID0zOycnLzw8IjIyIiMzOz4uISdu7cjaIZYu3nz58mtdaWpUYFBwd4eXkFBASGhYUBrQqPjPLy9k5ISEhLS4uKilm/fj0WzauWLT47p+760uakYA9zKytPT4/wcKDfo9zc3aNjolNT0zIyMkNDIzZs2IjQDKFu374NNHtBR8XVlT0N6WGW1jZBQUH+AQGWFibOjg5ABwNRUlJqSEjY9es3EJohaX3OnDlOri7BQItiYuPi4qNjgFRCdkrC6o789MTY0PDI8LBwX1//iooqeNAiNE+cNFFPT9fJ2dHZ1dXF1c3MzMTCwiIiNDgzJc7PP8DX19fb29vOzn7jxo3I8QwAkD8cNPji0p0AAAAASUVORK5CYII=" alt="franleplant" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/3d0df698a9c84ca995878f7c2815d974/69585/franleplant-profile.png 200w,
/static/3d0df698a9c84ca995878f7c2815d974/497c6/franleplant-profile.png 400w,
/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png 620w" sizes="(max-width: 620px) 100vw, 620px" /><img loading="lazy" sizes="(max-width: 620px) 100vw, 620px" srcset="/static/3d0df698a9c84ca995878f7c2815d974/69585/franleplant-profile.png 200w,
/static/3d0df698a9c84ca995878f7c2815d974/497c6/franleplant-profile.png 400w,
/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png 620w" src="/static/3d0df698a9c84ca995878f7c2815d974/edb0e/franleplant-profile.png" alt="franleplant" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><style data-emotion-css="1uk1gs8">.css-1uk1gs8{margin:0;}</style><p class="css-1uk1gs8">Written by <strong><a href="https://twitter.com/franleplant">franleplant</a></strong>: <!-- -->Tech Lead and Software developer with a degree in Engineering. Woodworker, all things Javascript, Rust and Software Architecture.<!-- --> <a href="https://github.com/franleplant" target="_blank" rel="noopener noreferrer">Github</a></p></div><style data-emotion-css="1cckvuk">.css-1cckvuk{margin-top:-20px;margin-bottom:20px;}</style><div class="css-1cckvuk"><div><a href="https://www.buymeacoffee.com/Kp6R5Zr"><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&amp;emoji=&amp;slug=Kp6R5Zr&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Cookie&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="buy me coffee"/></a></div><div><a href="https://www.patreon.com/bePatron?u=44509257" data-patreon-widget-type="become-patron-button">Become a Patron!</a></div></div></footer></article><style data-emotion-css="e42043">.css-e42043{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media (min-width:800px){.css-e42043{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><nav class="css-e42043 e5iwqvu0"><style data-emotion-css="d6w1ze">.css-d6w1ze{border:1px solid #FF00FF;border-radius:2px;padding:8px 16px;margin:2px;}@media (min-width:800px){.css-d6w1ze{width:49%;}}</style><div class="css-d6w1ze e5iwqvu1"><a rel="prev" href="/page-view-counter/">← <!-- -->Using Azure Functions to create a page view counter</a></div><div class="css-d6w1ze e5iwqvu1"><a rel="next" href="/docker-essentials-for-front-end-developers/">Essential Docker for Javascript and Front End Developers<!-- --> →</a></div></nav><style data-emotion-css="1eyoxlr">.css-1eyoxlr{margin-top:20px;margin-bottom:20px;color:#ccc;}</style><div class="css-1eyoxlr e14frcs80"></div></main><footer>© <!-- -->2021<!-- -->, nosleepjavascript.com</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-154632381-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/package-react-components/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f33cc994945b2249d5ee.js"],"app":["/app-b1e139d0da4ec73b7381.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-b0556ce5127c1a3e2490.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-3241c106c435f58ca4bd.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-ab533fcf78dbe17aad64.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-600ba704604721ac4f4a.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-13d8f6300d73de8b3055.js"]};/*]]>*/</script><script src="/polyfill-f33cc994945b2249d5ee.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-13d8f6300d73de8b3055.js" async=""></script><script src="/07df214fa9a6bfa95f2aa0c4b93680dbfb4b3ad9-8b678077d6dbe8f052d8.js" async=""></script><script src="/201ad6c3f2c882b9d9cf079e4b183f9823aadb3d-8b06601edeb74dd5b1c5.js" async=""></script><script src="/app-b1e139d0da4ec73b7381.js" async=""></script><script src="/framework-741ade27086b2708e961.js" async=""></script><script src="/styles-55e82d6ff5158c00b714.js" async=""></script><script src="/webpack-runtime-04fbafd859ab94f12b33.js" async=""></script></body></html>